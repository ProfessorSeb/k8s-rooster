apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.1-0.20251023132335-bf7d6b742e6a
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
  name: agentgatewaybackends.agentgateway.dev
spec:
  conversion:
    strategy: None
  group: agentgateway.dev
  names:
    categories:
    - kgateway
    kind: AgentgatewayBackend
    listKind: AgentgatewayBackendList
    plural: agentgatewaybackends
    shortNames:
    - agbe
    singular: agentgatewaybackend
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Backend configuration acceptance status
      jsonPath: .status.conditions[?(@.type=='Accepted')].status
      name: Accepted
      type: string
    - description: The age of the backend.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: spec defines the desired state of AgentgatewayBackend.
            properties:
              ai:
                description: ai represents a LLM backend.
                properties:
                  groups:
                    description: "groups specifies a list of groups in priority order\
                      \ where each group defines\na set of LLM providers. The priority\
                      \ determines the priority of the backend endpoints chosen.\n\
                      Note: provider names must be unique across all providers in\
                      \ all priority groups. Backend policies\nmay target a specific\
                      \ provider by name using targetRefs[].sectionName.\n\nExample\
                      \ configuration with two priority groups:\n```yaml\ngroups:\n\
                      - providers:\n  - azureopenai:\n      deploymentName: gpt-4o-mini\n\
                      \      apiVersion: 2024-02-15-preview\n      endpoint: ai-gateway.openai.azure.com\n\
                      - providers:\n  - azureopenai:\n      deploymentName: gpt-4o-mini-2\n\
                      \      apiVersion: 2024-02-15-preview\n      endpoint: ai-gateway-2.openai.azure.com\n\
                      \     policies:\n       auth:\n         secretRef:\n       \
                      \    name: azure-secret\n```"
                    items:
                      properties:
                        providers:
                          description: 'providers specifies a list of LLM providers
                            within this group. Each provider is treated equally in
                            terms of priority,

                            with automatic weighting based on health.'
                          items:
                            properties:
                              anthropic:
                                description: Anthropic provider
                                properties:
                                  model:
                                    description: 'Optional: Override the model name,
                                      such as `gpt-4o-mini`.

                                      If unset, the model name is taken from the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                type: object
                              azureopenai:
                                description: Azure OpenAI provider
                                properties:
                                  apiVersion:
                                    description: 'The version of the Azure OpenAI
                                      API to use.

                                      For more information, see the [Azure OpenAI
                                      API version reference](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#api-specs).

                                      If unset, defaults to "v1"'
                                    maxLength: 64
                                    minLength: 1
                                    type: string
                                  deploymentName:
                                    description: 'The name of the Azure OpenAI model
                                      deployment to use.

                                      For more information, see the [Azure OpenAI
                                      model docs](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models).

                                      This is required if ApiVersion is not ''v1''.
                                      For v1, the model can be set in the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                  endpoint:
                                    description: 'The endpoint for the Azure OpenAI
                                      API to use, such as `my-endpoint.openai.azure.com`.

                                      If the scheme is included, it is stripped.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                required:
                                - endpoint
                                type: object
                                x-kubernetes-validations:
                                - message: deploymentName is required for this apiVersion
                                  rule: '!has(self.apiVersion) || self.apiVersion
                                    == ''v1'' ? true : has(self.deploymentName)'
                              bedrock:
                                description: Bedrock provider
                                properties:
                                  guardrail:
                                    description: 'Guardrail configures the Guardrail
                                      policy to use for the backend. See <https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails.html>

                                      If not specified, the AWS Guardrail policy will
                                      not be used.'
                                    properties:
                                      identifier:
                                        description: GuardrailIdentifier is the identifier
                                          of the Guardrail policy to use for the backend.
                                        maxLength: 256
                                        minLength: 1
                                        type: string
                                      version:
                                        description: GuardrailVersion is the version
                                          of the Guardrail policy to use for the backend.
                                        maxLength: 256
                                        minLength: 1
                                        type: string
                                    required:
                                    - identifier
                                    - version
                                    type: object
                                  model:
                                    description: 'Optional: Override the model name,
                                      such as `gpt-4o-mini`.

                                      If unset, the model name is taken from the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                  region:
                                    default: us-east-1
                                    description: 'Region is the AWS region to use
                                      for the backend.

                                      Defaults to us-east-1 if not specified.'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9-]+$
                                    type: string
                                type: object
                              gemini:
                                description: Gemini provider
                                properties:
                                  model:
                                    description: 'Optional: Override the model name,
                                      such as `gemini-2.5-pro`.

                                      If unset, the model name is taken from the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                type: object
                              host:
                                description: 'Host specifies the hostname to send
                                  the requests to.

                                  If not specified, the default hostname for the provider
                                  is used.'
                                maxLength: 256
                                minLength: 1
                                type: string
                              name:
                                description: Name of the provider. Policies can target
                                  this provider by name.
                                maxLength: 253
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              openai:
                                description: OpenAI provider
                                properties:
                                  model:
                                    description: 'Optional: Override the model name,
                                      such as `gpt-4o-mini`.

                                      If unset, the model name is taken from the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                type: object
                              path:
                                description: 'Path specifies the URL path to use for
                                  the LLM provider API requests.

                                  This is useful when you need to route requests to
                                  a different API endpoint while maintaining

                                  compatibility with the original provider''s API
                                  structure.

                                  If not specified, the default path for the provider
                                  is used.'
                                maxLength: 1024
                                minLength: 1
                                type: string
                              policies:
                                description: 'policies controls policies for communicating
                                  with this backend. Policies may also be set in AgentgatewayPolicy,
                                  or

                                  in the top level AgentgatewayBackend. policies are
                                  merged on a field-level basis, with order: AgentgatewayPolicy
                                  <

                                  AgentgatewayBackend < AgentgatewayBackend LLM provider
                                  (this field).'
                                properties:
                                  ai:
                                    description: ai specifies settings for AI workloads.
                                      This is only applicable when connecting to a
                                      Backend of type 'ai'.
                                    properties:
                                      defaults:
                                        description: Provide defaults to merge with
                                          user input fields. If the field is already
                                          set, the field in the request is used.
                                        items:
                                          description: "FieldDefault provides default\
                                            \ values for specific fields in the JSON\
                                            \ request body sent to the LLM provider.\n\
                                            These defaults are merged with the user-provided\
                                            \ request to ensure missing fields are\
                                            \ populated.\n\nUser input fields here\
                                            \ refer to the fields in the JSON request\
                                            \ body that a client sends when making\
                                            \ a request to the LLM provider.\nDefaults\
                                            \ set here do _not_ override those user-provided\
                                            \ values unless you explicitly set `override`\
                                            \ to `true`.\n\nExample: Setting a default\
                                            \ system field for Anthropic, which does\
                                            \ not support system role messages:\n\
                                            ```yaml\ndefaults:\n  - field: \"system\"\
                                            \n    value: \"answer all questions in\
                                            \ French\"\n\n```\n\nExample: Setting\
                                            \ a default temperature and overriding\
                                            \ `max_tokens`:\n```yaml\ndefaults:\n\
                                            \  - field: \"temperature\"\n    value:\
                                            \ \"0.5\"\n  - field: \"max_tokens\"\n\
                                            \    value: \"100\"\n    override: true\n\
                                            \n```\n\nExample: Setting custom lists\
                                            \ fields:\n```yaml\ndefaults:\n  - field:\
                                            \ \"custom_integer_list\"\n    value:\
                                            \ [1,2,3]\n\noverrides:\n  - field: \"\
                                            custom_string_list\"\n    value: [\"one\"\
                                            ,\"two\",\"three\"]\n\n```\n\nNote: The\
                                            \ `field` values correspond to keys in\
                                            \ the JSON request body, not fields in\
                                            \ this CRD."
                                          properties:
                                            field:
                                              description: The name of the field.
                                              maxLength: 256
                                              minLength: 1
                                              type: string
                                            value:
                                              description: The field default value,
                                                which can be any JSON Data Type.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - field
                                          - value
                                          type: object
                                        maxItems: 64
                                        minItems: 1
                                        type: array
                                      modelAliases:
                                        additionalProperties:
                                          type: string
                                        description: 'ModelAliases maps friendly model
                                          names to actual provider model names.

                                          Example: {"fast": "gpt-3.5-turbo", "smart":
                                          "gpt-4-turbo"}

                                          Note: This field is only applicable when
                                          using the agentgateway data plane.'
                                        maxProperties: 64
                                        type: object
                                      overrides:
                                        description: Provide overrides to merge with
                                          user input fields. If the field is already
                                          set, the field will be overwritten.
                                        items:
                                          description: "FieldDefault provides default\
                                            \ values for specific fields in the JSON\
                                            \ request body sent to the LLM provider.\n\
                                            These defaults are merged with the user-provided\
                                            \ request to ensure missing fields are\
                                            \ populated.\n\nUser input fields here\
                                            \ refer to the fields in the JSON request\
                                            \ body that a client sends when making\
                                            \ a request to the LLM provider.\nDefaults\
                                            \ set here do _not_ override those user-provided\
                                            \ values unless you explicitly set `override`\
                                            \ to `true`.\n\nExample: Setting a default\
                                            \ system field for Anthropic, which does\
                                            \ not support system role messages:\n\
                                            ```yaml\ndefaults:\n  - field: \"system\"\
                                            \n    value: \"answer all questions in\
                                            \ French\"\n\n```\n\nExample: Setting\
                                            \ a default temperature and overriding\
                                            \ `max_tokens`:\n```yaml\ndefaults:\n\
                                            \  - field: \"temperature\"\n    value:\
                                            \ \"0.5\"\n  - field: \"max_tokens\"\n\
                                            \    value: \"100\"\n    override: true\n\
                                            \n```\n\nExample: Setting custom lists\
                                            \ fields:\n```yaml\ndefaults:\n  - field:\
                                            \ \"custom_integer_list\"\n    value:\
                                            \ [1,2,3]\n\noverrides:\n  - field: \"\
                                            custom_string_list\"\n    value: [\"one\"\
                                            ,\"two\",\"three\"]\n\n```\n\nNote: The\
                                            \ `field` values correspond to keys in\
                                            \ the JSON request body, not fields in\
                                            \ this CRD."
                                          properties:
                                            field:
                                              description: The name of the field.
                                              maxLength: 256
                                              minLength: 1
                                              type: string
                                            value:
                                              description: The field default value,
                                                which can be any JSON Data Type.
                                              x-kubernetes-preserve-unknown-fields: true
                                          required:
                                          - field
                                          - value
                                          type: object
                                        maxItems: 64
                                        minItems: 1
                                        type: array
                                      prompt:
                                        description: 'Enrich requests sent to the
                                          LLM provider by appending and prepending
                                          system prompts. This can be configured only
                                          for

                                          LLM providers that use the `CHAT` or `CHAT_STREAMING`
                                          API route type.'
                                        properties:
                                          append:
                                            description: A list of messages to be
                                              appended to the prompt sent by the client.
                                            items:
                                              description: An entry for a message
                                                to prepend or append to each prompt.
                                              properties:
                                                content:
                                                  description: String content of the
                                                    message.
                                                  type: string
                                                role:
                                                  description: 'Role of the message.
                                                    The available roles depend on
                                                    the backend

                                                    LLM provider model, such as `SYSTEM`
                                                    or `USER` in the OpenAI API.'
                                                  type: string
                                              required:
                                              - content
                                              - role
                                              type: object
                                            type: array
                                          prepend:
                                            description: A list of messages to be
                                              prepended to the prompt sent by the
                                              client.
                                            items:
                                              description: An entry for a message
                                                to prepend or append to each prompt.
                                              properties:
                                                content:
                                                  description: String content of the
                                                    message.
                                                  type: string
                                                role:
                                                  description: 'Role of the message.
                                                    The available roles depend on
                                                    the backend

                                                    LLM provider model, such as `SYSTEM`
                                                    or `USER` in the OpenAI API.'
                                                  type: string
                                              required:
                                              - content
                                              - role
                                              type: object
                                            type: array
                                        type: object
                                      promptCaching:
                                        description: 'promptCaching enables automatic
                                          prompt caching for supported providers (AWS
                                          Bedrock).

                                          Reduces API costs by caching static content
                                          like system prompts and tool definitions.

                                          Only applicable for Bedrock Claude 3+ and
                                          Nova models.'
                                        properties:
                                          cacheMessages:
                                            default: true
                                            description: 'CacheMessages enables caching
                                              for conversation messages.

                                              Caches all messages in the conversation
                                              for cost savings.'
                                            type: boolean
                                          cacheSystem:
                                            default: true
                                            description: 'CacheSystem enables caching
                                              for system prompts.

                                              Inserts a cache point after all system
                                              messages.'
                                            type: boolean
                                          cacheTools:
                                            default: false
                                            description: 'CacheTools enables caching
                                              for tool definitions.

                                              Inserts a cache point after all tool
                                              specifications.'
                                            type: boolean
                                          minTokens:
                                            default: 1024
                                            description: "MinTokens specifies the\
                                              \ minimum estimated token count\nbefore\
                                              \ caching is enabled. Uses rough heuristic\
                                              \ (word count \xD7 1.3) to estimate\
                                              \ tokens.\nBedrock requires at least\
                                              \ 1,024 tokens for caching to be effective."
                                            minimum: 0
                                            type: integer
                                        type: object
                                      promptGuard:
                                        description: promptGuard enables adding guardrails
                                          to LLM requests and responses.
                                        properties:
                                          request:
                                            description: Prompt guards to apply to
                                              requests sent by the client.
                                            items:
                                              description: PromptguardRequest defines
                                                the prompt guards to apply to requests
                                                sent by the client.
                                              properties:
                                                openAIModeration:
                                                  description: 'openAIModeration passes
                                                    prompt data through the OpenAI
                                                    Moderations endpoint.

                                                    See https://platform.openai.com/docs/api-reference/moderations
                                                    for more information.'
                                                  properties:
                                                    model:
                                                      description: model specifies
                                                        the moderation model to use.
                                                        For example, `omni-moderation`.
                                                      type: string
                                                    policies:
                                                      description: policies controls
                                                        policies for communicating
                                                        with OpenAI.
                                                      properties:
                                                        auth:
                                                          description: auth defines
                                                            settings for managing
                                                            authentication to the
                                                            backend
                                                          properties:
                                                            aws:
                                                              description: 'Auth specifies
                                                                an explicit AWS authentication
                                                                method for the backend.

                                                                When omitted, we will
                                                                try to use the default
                                                                AWS SDK authentication
                                                                methods.'
                                                              properties:
                                                                secretRef:
                                                                  description: 'SecretRef
                                                                    references a Kubernetes
                                                                    Secret containing
                                                                    the AWS credentials.

                                                                    The Secret must
                                                                    have keys "accessKey",
                                                                    "secretKey", and
                                                                    optionally "sessionToken".'
                                                                  properties:
                                                                    name:
                                                                      default: ''
                                                                      description: 'Name
                                                                        of the referent.

                                                                        This field
                                                                        is effectively
                                                                        required,
                                                                        but due to
                                                                        backwards
                                                                        compatibility
                                                                        is

                                                                        allowed to
                                                                        be empty.
                                                                        Instances
                                                                        of this type
                                                                        with an empty
                                                                        value here
                                                                        are

                                                                        almost certainly
                                                                        wrong.

                                                                        More info:
                                                                        https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                                      type: string
                                                                  type: object
                                                                  x-kubernetes-map-type: atomic
                                                              required:
                                                              - secretRef
                                                              type: object
                                                            key:
                                                              description: 'key provides
                                                                an inline key to use
                                                                as the value of the
                                                                Authorization header.

                                                                This option is the
                                                                least secure; usage
                                                                of a Secret is preferred.'
                                                              maxLength: 2048
                                                              type: string
                                                            passthrough:
                                                              description: 'passthrough
                                                                passes through an
                                                                existing token that
                                                                has been sent by the
                                                                client and validated.
                                                                Other policies, like

                                                                JWT and API Key authentication,
                                                                will strip the original
                                                                client credentials.
                                                                Passthrough backend
                                                                authentication

                                                                causes the original
                                                                token to be added
                                                                back into the request.
                                                                If there are no client
                                                                authentication policies
                                                                on the

                                                                request, the original
                                                                token would be unchanged,
                                                                so this would have
                                                                no effect.'
                                                              type: object
                                                            secretRef:
                                                              description: 'secretRef
                                                                references a Kubernetes
                                                                secret storing the
                                                                key to use the authorization
                                                                value. This must be
                                                                stored in the

                                                                ''Authorization''
                                                                key.'
                                                              properties:
                                                                name:
                                                                  default: ''
                                                                  description: 'Name
                                                                    of the referent.

                                                                    This field is
                                                                    effectively required,
                                                                    but due to backwards
                                                                    compatibility
                                                                    is

                                                                    allowed to be
                                                                    empty. Instances
                                                                    of this type with
                                                                    an empty value
                                                                    here are

                                                                    almost certainly
                                                                    wrong.

                                                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                                  type: string
                                                              type: object
                                                              x-kubernetes-map-type: atomic
                                                          type: object
                                                          x-kubernetes-validations:
                                                          - message: exactly one of
                                                              the fields in [key secretRef
                                                              passthrough aws] must
                                                              be set
                                                            rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                                              == 1'
                                                        http:
                                                          description: http defines
                                                            settings for managing
                                                            HTTP requests to the backend.
                                                          properties:
                                                            requestTimeout:
                                                              description: requestTimeout
                                                                specifies the deadline
                                                                for receiving a response
                                                                from the backend.
                                                              type: string
                                                              x-kubernetes-validations:
                                                              - message: invalid duration
                                                                  value
                                                                rule: matches(self,
                                                                  '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                              - message: requestTimeout
                                                                  must be at least
                                                                  1ms
                                                                rule: duration(self)
                                                                  >= duration('1ms')
                                                            version:
                                                              description: "version\
                                                                \ specifies the HTTP\
                                                                \ protocol version\
                                                                \ to use when connecting\
                                                                \ to the backend.\n\
                                                                If not specified,\
                                                                \ the version is automatically\
                                                                \ determined:\n* Service\
                                                                \ types can specify\
                                                                \ it with 'appProtocol'\
                                                                \ on the Service port.\n\
                                                                * If traffic is identified\
                                                                \ as gRPC, HTTP2 is\
                                                                \ used.\n* If the\
                                                                \ incoming traffic\
                                                                \ was plaintext HTTP,\
                                                                \ the original protocol\
                                                                \ will be used.\n\
                                                                * If the incoming\
                                                                \ traffic was HTTPS,\
                                                                \ HTTP1 will be used.\
                                                                \ This is because\
                                                                \ most clients will\n\
                                                                \  transparently upgrade\
                                                                \ HTTPS traffic to\
                                                                \ HTTP2, even if the\
                                                                \ backend doesn't\
                                                                \ support it"
                                                              enum:
                                                              - HTTP1
                                                              - HTTP2
                                                              type: string
                                                          type: object
                                                        tcp:
                                                          description: tcp defines
                                                            settings for managing
                                                            TCP connections to the
                                                            backend.
                                                          properties:
                                                            connectTimeout:
                                                              description: connectTimeout
                                                                defines the deadline
                                                                for establishing a
                                                                connection to the
                                                                destination.
                                                              type: string
                                                              x-kubernetes-validations:
                                                              - message: invalid duration
                                                                  value
                                                                rule: matches(self,
                                                                  '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                              - message: connectTimeout
                                                                  must be at least
                                                                  100ms
                                                                rule: duration(self)
                                                                  >= duration('100ms')
                                                            keepalive:
                                                              description: keepAlive
                                                                defines settings for
                                                                enabling TCP keepalives
                                                                on the connection.
                                                              properties:
                                                                interval:
                                                                  description: 'interval
                                                                    specifies the
                                                                    number of seconds
                                                                    between keep-alive
                                                                    probes.

                                                                    If unset, this
                                                                    defaults to 180s.'
                                                                  type: string
                                                                  x-kubernetes-validations:
                                                                  - message: invalid
                                                                      duration value
                                                                    rule: matches(self,
                                                                      '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                                  - message: interval
                                                                      must be at least
                                                                      1 second
                                                                    rule: duration(self)
                                                                      >= duration('1s')
                                                                retries:
                                                                  description: 'retries
                                                                    specifies the
                                                                    maximum number
                                                                    of keep-alive
                                                                    probes to send
                                                                    before dropping
                                                                    the connection.

                                                                    If unset, this
                                                                    defaults to 9.'
                                                                  format: int32
                                                                  maximum: 64
                                                                  minimum: 1
                                                                  type: integer
                                                                time:
                                                                  description: 'time
                                                                    specifies the
                                                                    number of seconds
                                                                    a connection needs
                                                                    to be idle before
                                                                    keep-alive probes
                                                                    start being sent.

                                                                    If unset, this
                                                                    defaults to 180s.'
                                                                  type: string
                                                                  x-kubernetes-validations:
                                                                  - message: invalid
                                                                      duration value
                                                                    rule: matches(self,
                                                                      '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                                  - message: time
                                                                      must be at least
                                                                      1 second
                                                                    rule: duration(self)
                                                                      >= duration('1s')
                                                              type: object
                                                          type: object
                                                        tls:
                                                          description: 'tls defines
                                                            settings for managing
                                                            TLS connections to the
                                                            backend.


                                                            If this field is set,
                                                            TLS will be initiated
                                                            to the backend; the system
                                                            trusted CA certificates
                                                            will be used to

                                                            validate the server, and
                                                            the SNI will automatically
                                                            be set based on the destination.'
                                                          properties:
                                                            alpnProtocols:
                                                              description: 'alpnProtocols
                                                                sets the Application
                                                                Level Protocol Negotiation
                                                                (ALPN) value to use
                                                                in the TLS handshake.


                                                                If not present, defaults
                                                                to ["h2", "http/1.1"].'
                                                              items:
                                                                maxLength: 64
                                                                minLength: 1
                                                                type: string
                                                              maxItems: 16
                                                              minItems: 1
                                                              type: array
                                                            caCertificateRefs:
                                                              description: 'caCertificateRefs
                                                                defines the CA certificate
                                                                ConfigMap to use to
                                                                verify the server
                                                                certificate.

                                                                If unset, the system''s
                                                                trusted certificates
                                                                are used.'
                                                              items:
                                                                description: 'LocalObjectReference
                                                                  contains enough
                                                                  information to let
                                                                  you locate the

                                                                  referenced object
                                                                  inside the same
                                                                  namespace.'
                                                                properties:
                                                                  name:
                                                                    default: ''
                                                                    description: 'Name
                                                                      of the referent.

                                                                      This field is
                                                                      effectively
                                                                      required, but
                                                                      due to backwards
                                                                      compatibility
                                                                      is

                                                                      allowed to be
                                                                      empty. Instances
                                                                      of this type
                                                                      with an empty
                                                                      value here are

                                                                      almost certainly
                                                                      wrong.

                                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                                    type: string
                                                                type: object
                                                                x-kubernetes-map-type: atomic
                                                              maxItems: 1
                                                              type: array
                                                              x-kubernetes-list-type: atomic
                                                            insecureSkipVerify:
                                                              description: "insecureSkipVerify\
                                                                \ originates TLS but\
                                                                \ skips verification\
                                                                \ of the backend's\
                                                                \ certificate.\nWARNING:\
                                                                \ This is an insecure\
                                                                \ option that should\
                                                                \ only be used if\
                                                                \ the risks are understood.\n\
                                                                \nThere are two modes:\n\
                                                                * All disables all\
                                                                \ TLS verification\n\
                                                                * Hostname verifies\
                                                                \ the CA certificate\
                                                                \ is trusted, but\
                                                                \ ignores any mismatch\
                                                                \ of hostname/SANs.\
                                                                \ Note that this method\n\
                                                                \ is still insecure;\
                                                                \ prefer setting verifySubjectAltNames\
                                                                \ to customize the\
                                                                \ valid hostnames\
                                                                \ if possible."
                                                              enum:
                                                              - All
                                                              - Hostname
                                                              type: string
                                                            mtlsCertificateRef:
                                                              description: 'mtlsCertificateRef
                                                                enables mutual TLS
                                                                to the backend, using
                                                                the specified key
                                                                (tls.key) and cert
                                                                (tls.crt) from the

                                                                refenced Secret.


                                                                An optional ''ca.cert''
                                                                field, if present,
                                                                will be used to verify
                                                                the server certificate
                                                                if present. If

                                                                caCertificateRefs
                                                                is also specified,
                                                                the caCertificateRefs
                                                                field takes priority.


                                                                If unspecified, no
                                                                client certificate
                                                                will be used.'
                                                              items:
                                                                description: 'LocalObjectReference
                                                                  contains enough
                                                                  information to let
                                                                  you locate the

                                                                  referenced object
                                                                  inside the same
                                                                  namespace.'
                                                                properties:
                                                                  name:
                                                                    default: ''
                                                                    description: 'Name
                                                                      of the referent.

                                                                      This field is
                                                                      effectively
                                                                      required, but
                                                                      due to backwards
                                                                      compatibility
                                                                      is

                                                                      allowed to be
                                                                      empty. Instances
                                                                      of this type
                                                                      with an empty
                                                                      value here are

                                                                      almost certainly
                                                                      wrong.

                                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                                    type: string
                                                                type: object
                                                                x-kubernetes-map-type: atomic
                                                              maxItems: 1
                                                              type: array
                                                              x-kubernetes-list-type: atomic
                                                            sni:
                                                              description: 'sni specifies
                                                                the Server Name Indicator
                                                                (SNI) to be used in
                                                                the TLS handshake.
                                                                If unset, the SNI
                                                                is automatically

                                                                set based on the destination
                                                                hostname.'
                                                              maxLength: 253
                                                              minLength: 1
                                                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                                              type: string
                                                            verifySubjectAltNames:
                                                              description: 'verifySubjectAltNames
                                                                specifies the Subject
                                                                Alternative Names
                                                                (SAN) to verify in
                                                                the server certificate.

                                                                If not present, the
                                                                destination hostname
                                                                is automatically used.'
                                                              items:
                                                                maxLength: 256
                                                                minLength: 1
                                                                type: string
                                                              maxItems: 16
                                                              minItems: 1
                                                              type: array
                                                          type: object
                                                          x-kubernetes-validations:
                                                          - message: insecureSkipVerify
                                                              All and caCertificateRefs
                                                              may not be set together
                                                            rule: 'has(self.insecureSkipVerify)
                                                              && self.insecureSkipVerify
                                                              == ''All'' ? !has(self.caCertificateRefs)
                                                              : true'
                                                          - message: insecureSkipVerify
                                                              and verifySubjectAltNames
                                                              may not be set together
                                                            rule: 'has(self.insecureSkipVerify)
                                                              ? !has(self.verifySubjectAltNames)
                                                              : true'
                                                          - message: at most one of
                                                              the fields in [verifySubjectAltNames
                                                              insecureSkipVerify]
                                                              may be set
                                                            rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                                              <= 1'
                                                      type: object
                                                  type: object
                                                regex:
                                                  description: Regular expression
                                                    (regex) matching for prompt guards
                                                    and data masking.
                                                  properties:
                                                    action:
                                                      default: Mask
                                                      description: 'The action to
                                                        take if a regex pattern is
                                                        matched in a request or response.

                                                        This setting applies only
                                                        to request matches. PromptguardResponse
                                                        matches are always masked
                                                        by default.

                                                        Defaults to `Mask`.'
                                                      enum:
                                                      - Mask
                                                      - Reject
                                                      type: string
                                                    builtins:
                                                      description: 'A list of built-in
                                                        regex patterns to match against
                                                        the request or response.

                                                        Matches and built-ins are
                                                        additive.'
                                                      items:
                                                        description: 'BuiltIn regex
                                                          patterns for specific types
                                                          of strings in prompts.

                                                          For example, if you specify
                                                          `CreditCard`, any credit
                                                          card numbers

                                                          in the request or response
                                                          are matched.'
                                                        enum:
                                                        - Ssn
                                                        - CreditCard
                                                        - PhoneNumber
                                                        - Email
                                                        - CaSin
                                                        type: string
                                                      type: array
                                                    matches:
                                                      description: 'A list of regex
                                                        patterns to match against
                                                        the request or response.

                                                        Matches and built-ins are
                                                        additive.'
                                                      items:
                                                        maxLength: 1024
                                                        minLength: 1
                                                        type: string
                                                      type: array
                                                  type: object
                                                response:
                                                  description: 'A custom response
                                                    message to return to the client.
                                                    If not specified, defaults to

                                                    "The request was rejected due
                                                    to inappropriate content".'
                                                  properties:
                                                    message:
                                                      default: The request was rejected
                                                        due to inappropriate content
                                                      description: 'A custom response
                                                        message to return to the client.
                                                        If not specified, defaults
                                                        to

                                                        "The request was rejected
                                                        due to inappropriate content".'
                                                      type: string
                                                    statusCode:
                                                      default: 403
                                                      description: The status code
                                                        to return to the client. Defaults
                                                        to 403.
                                                      format: int32
                                                      maximum: 599
                                                      minimum: 200
                                                      type: integer
                                                  type: object
                                                  x-kubernetes-validations:
                                                  - message: at least one of the fields
                                                      in [message statusCode] must
                                                      be set
                                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                                      >= 1'
                                                webhook:
                                                  description: Configure a webhook
                                                    to forward requests to for prompt
                                                    guarding.
                                                  properties:
                                                    backendRef:
                                                      description: 'backendRef references
                                                        the webhook server to reach.


                                                        Supported types: Service and
                                                        Backend.'
                                                      properties:
                                                        group:
                                                          default: ''
                                                          description: 'Group is the
                                                            group of the referent.
                                                            For example, "gateway.networking.k8s.io".

                                                            When unspecified or empty
                                                            string, core API group
                                                            is inferred.'
                                                          maxLength: 253
                                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                                          type: string
                                                        kind:
                                                          default: Service
                                                          description: 'Kind is the
                                                            Kubernetes resource kind
                                                            of the referent. For example

                                                            "Service".


                                                            Defaults to "Service"
                                                            when not specified.


                                                            ExternalName services
                                                            can refer to CNAME DNS
                                                            records that may live

                                                            outside of the cluster
                                                            and as such are difficult
                                                            to reason about in

                                                            terms of conformance.
                                                            They also may not be safe
                                                            to forward to (see

                                                            CVE-2021-25740 for more
                                                            information). Implementations
                                                            SHOULD NOT

                                                            support ExternalName Services.


                                                            Support: Core (Services
                                                            with a type other than
                                                            ExternalName)


                                                            Support: Implementation-specific
                                                            (Services with type ExternalName)'
                                                          maxLength: 63
                                                          minLength: 1
                                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                                          type: string
                                                        name:
                                                          description: Name is the
                                                            name of the referent.
                                                          maxLength: 253
                                                          minLength: 1
                                                          type: string
                                                        namespace:
                                                          description: 'Namespace
                                                            is the namespace of the
                                                            backend. When unspecified,
                                                            the local

                                                            namespace is inferred.


                                                            Note that when a namespace
                                                            different than the local
                                                            namespace is specified,

                                                            a ReferenceGrant object
                                                            is required in the referent
                                                            namespace to allow that

                                                            namespace''s owner to
                                                            accept the reference.
                                                            See the ReferenceGrant

                                                            documentation for details.


                                                            Support: Core'
                                                          maxLength: 63
                                                          minLength: 1
                                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                                          type: string
                                                        port:
                                                          description: 'Port specifies
                                                            the destination port number
                                                            to use for this resource.

                                                            Port is required when
                                                            the referent is a Kubernetes
                                                            Service. In this

                                                            case, the port number
                                                            is the service port number,
                                                            not the target port.

                                                            For other resources, destination
                                                            port might be derived
                                                            from the referent

                                                            resource or this field.'
                                                          format: int32
                                                          maximum: 65535
                                                          minimum: 1
                                                          type: integer
                                                      required:
                                                      - name
                                                      type: object
                                                      x-kubernetes-validations:
                                                      - message: Must have port for
                                                          Service reference
                                                        rule: '(size(self.group) ==
                                                          0 && self.kind == ''Service'')
                                                          ? has(self.port) : true'
                                                    forwardHeaderMatches:
                                                      description: 'ForwardHeaderMatches
                                                        defines a list of HTTP header
                                                        matches that will be

                                                        used to select the headers
                                                        to forward to the webhook.

                                                        Request headers are used when
                                                        forwarding requests and response
                                                        headers

                                                        are used when forwarding responses.

                                                        By default, no headers are
                                                        forwarded.'
                                                      items:
                                                        description: 'HTTPHeaderMatch
                                                          describes how to select
                                                          a HTTP route by matching
                                                          HTTP request

                                                          headers.'
                                                        properties:
                                                          name:
                                                            description: 'Name is
                                                              the name of the HTTP
                                                              Header to be matched.
                                                              Name matching MUST be

                                                              case-insensitive. (See
                                                              https://tools.ietf.org/html/rfc7230#section-3.2).


                                                              If multiple entries
                                                              specify equivalent header
                                                              names, only the first

                                                              entry with an equivalent
                                                              name MUST be considered
                                                              for a match. Subsequent

                                                              entries with an equivalent
                                                              header name MUST be
                                                              ignored. Due to the

                                                              case-insensitivity of
                                                              header names, "foo"
                                                              and "Foo" are considered

                                                              equivalent.


                                                              When a header is repeated
                                                              in an HTTP request,
                                                              it is

                                                              implementation-specific
                                                              behavior as to how this
                                                              is represented.

                                                              Generally, proxies should
                                                              follow the guidance
                                                              from the RFC:

                                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                                              regarding

                                                              processing a repeated
                                                              header, with special
                                                              handling for "Set-Cookie".'
                                                            maxLength: 256
                                                            minLength: 1
                                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                            type: string
                                                          type:
                                                            default: Exact
                                                            description: 'Type specifies
                                                              how to match against
                                                              the value of the header.


                                                              Support: Core (Exact)


                                                              Support: Implementation-specific
                                                              (RegularExpression)


                                                              Since RegularExpression
                                                              HeaderMatchType has
                                                              implementation-specific

                                                              conformance, implementations
                                                              can support POSIX, PCRE
                                                              or any other dialects

                                                              of regular expressions.
                                                              Please read the implementation''s
                                                              documentation to

                                                              determine the supported
                                                              dialect.'
                                                            enum:
                                                            - Exact
                                                            - RegularExpression
                                                            type: string
                                                          value:
                                                            description: Value is
                                                              the value of HTTP Header
                                                              to be matched.
                                                            maxLength: 4096
                                                            minLength: 1
                                                            type: string
                                                        required:
                                                        - name
                                                        - value
                                                        type: object
                                                      type: array
                                                  required:
                                                  - backendRef
                                                  type: object
                                              type: object
                                              x-kubernetes-validations:
                                              - message: exactly one of the fields
                                                  in [regex webhook openAIModeration]
                                                  must be set
                                                rule: '[has(self.regex),has(self.webhook),has(self.openAIModeration)].filter(x,x==true).size()
                                                  == 1'
                                            maxItems: 8
                                            minItems: 1
                                            type: array
                                          response:
                                            description: Prompt guards to apply to
                                              responses returned by the LLM provider.
                                            items:
                                              description: PromptguardResponse configures
                                                the response that the prompt guard
                                                applies to responses returned by the
                                                LLM provider.
                                              properties:
                                                regex:
                                                  description: Regular expression
                                                    (regex) matching for prompt guards
                                                    and data masking.
                                                  properties:
                                                    action:
                                                      default: Mask
                                                      description: 'The action to
                                                        take if a regex pattern is
                                                        matched in a request or response.

                                                        This setting applies only
                                                        to request matches. PromptguardResponse
                                                        matches are always masked
                                                        by default.

                                                        Defaults to `Mask`.'
                                                      enum:
                                                      - Mask
                                                      - Reject
                                                      type: string
                                                    builtins:
                                                      description: 'A list of built-in
                                                        regex patterns to match against
                                                        the request or response.

                                                        Matches and built-ins are
                                                        additive.'
                                                      items:
                                                        description: 'BuiltIn regex
                                                          patterns for specific types
                                                          of strings in prompts.

                                                          For example, if you specify
                                                          `CreditCard`, any credit
                                                          card numbers

                                                          in the request or response
                                                          are matched.'
                                                        enum:
                                                        - Ssn
                                                        - CreditCard
                                                        - PhoneNumber
                                                        - Email
                                                        - CaSin
                                                        type: string
                                                      type: array
                                                    matches:
                                                      description: 'A list of regex
                                                        patterns to match against
                                                        the request or response.

                                                        Matches and built-ins are
                                                        additive.'
                                                      items:
                                                        maxLength: 1024
                                                        minLength: 1
                                                        type: string
                                                      type: array
                                                  type: object
                                                response:
                                                  description: 'A custom response
                                                    message to return to the client.
                                                    If not specified, defaults to

                                                    "The response was rejected due
                                                    to inappropriate content".'
                                                  properties:
                                                    message:
                                                      default: The request was rejected
                                                        due to inappropriate content
                                                      description: 'A custom response
                                                        message to return to the client.
                                                        If not specified, defaults
                                                        to

                                                        "The request was rejected
                                                        due to inappropriate content".'
                                                      type: string
                                                    statusCode:
                                                      default: 403
                                                      description: The status code
                                                        to return to the client. Defaults
                                                        to 403.
                                                      format: int32
                                                      maximum: 599
                                                      minimum: 200
                                                      type: integer
                                                  type: object
                                                  x-kubernetes-validations:
                                                  - message: at least one of the fields
                                                      in [message statusCode] must
                                                      be set
                                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                                      >= 1'
                                                webhook:
                                                  description: Configure a webhook
                                                    to forward responses to for prompt
                                                    guarding.
                                                  properties:
                                                    backendRef:
                                                      description: 'backendRef references
                                                        the webhook server to reach.


                                                        Supported types: Service and
                                                        Backend.'
                                                      properties:
                                                        group:
                                                          default: ''
                                                          description: 'Group is the
                                                            group of the referent.
                                                            For example, "gateway.networking.k8s.io".

                                                            When unspecified or empty
                                                            string, core API group
                                                            is inferred.'
                                                          maxLength: 253
                                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                                          type: string
                                                        kind:
                                                          default: Service
                                                          description: 'Kind is the
                                                            Kubernetes resource kind
                                                            of the referent. For example

                                                            "Service".


                                                            Defaults to "Service"
                                                            when not specified.


                                                            ExternalName services
                                                            can refer to CNAME DNS
                                                            records that may live

                                                            outside of the cluster
                                                            and as such are difficult
                                                            to reason about in

                                                            terms of conformance.
                                                            They also may not be safe
                                                            to forward to (see

                                                            CVE-2021-25740 for more
                                                            information). Implementations
                                                            SHOULD NOT

                                                            support ExternalName Services.


                                                            Support: Core (Services
                                                            with a type other than
                                                            ExternalName)


                                                            Support: Implementation-specific
                                                            (Services with type ExternalName)'
                                                          maxLength: 63
                                                          minLength: 1
                                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                                          type: string
                                                        name:
                                                          description: Name is the
                                                            name of the referent.
                                                          maxLength: 253
                                                          minLength: 1
                                                          type: string
                                                        namespace:
                                                          description: 'Namespace
                                                            is the namespace of the
                                                            backend. When unspecified,
                                                            the local

                                                            namespace is inferred.


                                                            Note that when a namespace
                                                            different than the local
                                                            namespace is specified,

                                                            a ReferenceGrant object
                                                            is required in the referent
                                                            namespace to allow that

                                                            namespace''s owner to
                                                            accept the reference.
                                                            See the ReferenceGrant

                                                            documentation for details.


                                                            Support: Core'
                                                          maxLength: 63
                                                          minLength: 1
                                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                                          type: string
                                                        port:
                                                          description: 'Port specifies
                                                            the destination port number
                                                            to use for this resource.

                                                            Port is required when
                                                            the referent is a Kubernetes
                                                            Service. In this

                                                            case, the port number
                                                            is the service port number,
                                                            not the target port.

                                                            For other resources, destination
                                                            port might be derived
                                                            from the referent

                                                            resource or this field.'
                                                          format: int32
                                                          maximum: 65535
                                                          minimum: 1
                                                          type: integer
                                                      required:
                                                      - name
                                                      type: object
                                                      x-kubernetes-validations:
                                                      - message: Must have port for
                                                          Service reference
                                                        rule: '(size(self.group) ==
                                                          0 && self.kind == ''Service'')
                                                          ? has(self.port) : true'
                                                    forwardHeaderMatches:
                                                      description: 'ForwardHeaderMatches
                                                        defines a list of HTTP header
                                                        matches that will be

                                                        used to select the headers
                                                        to forward to the webhook.

                                                        Request headers are used when
                                                        forwarding requests and response
                                                        headers

                                                        are used when forwarding responses.

                                                        By default, no headers are
                                                        forwarded.'
                                                      items:
                                                        description: 'HTTPHeaderMatch
                                                          describes how to select
                                                          a HTTP route by matching
                                                          HTTP request

                                                          headers.'
                                                        properties:
                                                          name:
                                                            description: 'Name is
                                                              the name of the HTTP
                                                              Header to be matched.
                                                              Name matching MUST be

                                                              case-insensitive. (See
                                                              https://tools.ietf.org/html/rfc7230#section-3.2).


                                                              If multiple entries
                                                              specify equivalent header
                                                              names, only the first

                                                              entry with an equivalent
                                                              name MUST be considered
                                                              for a match. Subsequent

                                                              entries with an equivalent
                                                              header name MUST be
                                                              ignored. Due to the

                                                              case-insensitivity of
                                                              header names, "foo"
                                                              and "Foo" are considered

                                                              equivalent.


                                                              When a header is repeated
                                                              in an HTTP request,
                                                              it is

                                                              implementation-specific
                                                              behavior as to how this
                                                              is represented.

                                                              Generally, proxies should
                                                              follow the guidance
                                                              from the RFC:

                                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                                              regarding

                                                              processing a repeated
                                                              header, with special
                                                              handling for "Set-Cookie".'
                                                            maxLength: 256
                                                            minLength: 1
                                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                                            type: string
                                                          type:
                                                            default: Exact
                                                            description: 'Type specifies
                                                              how to match against
                                                              the value of the header.


                                                              Support: Core (Exact)


                                                              Support: Implementation-specific
                                                              (RegularExpression)


                                                              Since RegularExpression
                                                              HeaderMatchType has
                                                              implementation-specific

                                                              conformance, implementations
                                                              can support POSIX, PCRE
                                                              or any other dialects

                                                              of regular expressions.
                                                              Please read the implementation''s
                                                              documentation to

                                                              determine the supported
                                                              dialect.'
                                                            enum:
                                                            - Exact
                                                            - RegularExpression
                                                            type: string
                                                          value:
                                                            description: Value is
                                                              the value of HTTP Header
                                                              to be matched.
                                                            maxLength: 4096
                                                            minLength: 1
                                                            type: string
                                                        required:
                                                        - name
                                                        - value
                                                        type: object
                                                      type: array
                                                  required:
                                                  - backendRef
                                                  type: object
                                              type: object
                                              x-kubernetes-validations:
                                              - message: exactly one of the fields
                                                  in [regex webhook] must be set
                                                rule: '[has(self.regex),has(self.webhook)].filter(x,x==true).size()
                                                  == 1'
                                            maxItems: 8
                                            minItems: 1
                                            type: array
                                        type: object
                                        x-kubernetes-validations:
                                        - message: at least one of the fields in [request
                                            response] must be set
                                          rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                                            >= 1'
                                      routes:
                                        additionalProperties:
                                          description: 'RouteType specifies how the
                                            AI gateway should process incoming requests

                                            based on the URL path and the API format
                                            expected.'
                                          enum:
                                          - Completions
                                          - Messages
                                          - Models
                                          - Passthrough
                                          - Responses
                                          - AnthropicTokenCount
                                          - Embeddings
                                          type: string
                                        description: 'routes defines how to identify
                                          the type of traffic to handle.

                                          The keys are URL path suffixes matched using
                                          ends-with comparison (e.g., "/v1/chat/completions").

                                          The special "*" wildcard matches any path.

                                          If not specified, all traffic defaults to
                                          "completions" type.'
                                        type: object
                                    type: object
                                    x-kubernetes-validations:
                                    - message: at least one of the fields in [prompt
                                        promptGuard defaults overrides modelAliases
                                        promptCaching routes] must be set
                                      rule: '[has(self.prompt),has(self.promptGuard),has(self.defaults),has(self.overrides),has(self.modelAliases),has(self.promptCaching),has(self.routes)].filter(x,x==true).size()
                                        >= 1'
                                  auth:
                                    description: auth defines settings for managing
                                      authentication to the backend
                                    properties:
                                      aws:
                                        description: 'Auth specifies an explicit AWS
                                          authentication method for the backend.

                                          When omitted, we will try to use the default
                                          AWS SDK authentication methods.'
                                        properties:
                                          secretRef:
                                            description: 'SecretRef references a Kubernetes
                                              Secret containing the AWS credentials.

                                              The Secret must have keys "accessKey",
                                              "secretKey", and optionally "sessionToken".'
                                            properties:
                                              name:
                                                default: ''
                                                description: 'Name of the referent.

                                                  This field is effectively required,
                                                  but due to backwards compatibility
                                                  is

                                                  allowed to be empty. Instances of
                                                  this type with an empty value here
                                                  are

                                                  almost certainly wrong.

                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                type: string
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        required:
                                        - secretRef
                                        type: object
                                      key:
                                        description: 'key provides an inline key to
                                          use as the value of the Authorization header.

                                          This option is the least secure; usage of
                                          a Secret is preferred.'
                                        maxLength: 2048
                                        type: string
                                      passthrough:
                                        description: 'passthrough passes through an
                                          existing token that has been sent by the
                                          client and validated. Other policies, like

                                          JWT and API Key authentication, will strip
                                          the original client credentials. Passthrough
                                          backend authentication

                                          causes the original token to be added back
                                          into the request. If there are no client
                                          authentication policies on the

                                          request, the original token would be unchanged,
                                          so this would have no effect.'
                                        type: object
                                      secretRef:
                                        description: 'secretRef references a Kubernetes
                                          secret storing the key to use the authorization
                                          value. This must be stored in the

                                          ''Authorization'' key.'
                                        properties:
                                          name:
                                            default: ''
                                            description: 'Name of the referent.

                                              This field is effectively required,
                                              but due to backwards compatibility is

                                              allowed to be empty. Instances of this
                                              type with an empty value here are

                                              almost certainly wrong.

                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                            type: string
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                    x-kubernetes-validations:
                                    - message: exactly one of the fields in [key secretRef
                                        passthrough aws] must be set
                                      rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                        == 1'
                                  http:
                                    description: http defines settings for managing
                                      HTTP requests to the backend.
                                    properties:
                                      requestTimeout:
                                        description: requestTimeout specifies the
                                          deadline for receiving a response from the
                                          backend.
                                        type: string
                                        x-kubernetes-validations:
                                        - message: invalid duration value
                                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                        - message: requestTimeout must be at least
                                            1ms
                                          rule: duration(self) >= duration('1ms')
                                      version:
                                        description: "version specifies the HTTP protocol\
                                          \ version to use when connecting to the\
                                          \ backend.\nIf not specified, the version\
                                          \ is automatically determined:\n* Service\
                                          \ types can specify it with 'appProtocol'\
                                          \ on the Service port.\n* If traffic is\
                                          \ identified as gRPC, HTTP2 is used.\n*\
                                          \ If the incoming traffic was plaintext\
                                          \ HTTP, the original protocol will be used.\n\
                                          * If the incoming traffic was HTTPS, HTTP1\
                                          \ will be used. This is because most clients\
                                          \ will\n  transparently upgrade HTTPS traffic\
                                          \ to HTTP2, even if the backend doesn't\
                                          \ support it"
                                        enum:
                                        - HTTP1
                                        - HTTP2
                                        type: string
                                    type: object
                                  tcp:
                                    description: tcp defines settings for managing
                                      TCP connections to the backend.
                                    properties:
                                      connectTimeout:
                                        description: connectTimeout defines the deadline
                                          for establishing a connection to the destination.
                                        type: string
                                        x-kubernetes-validations:
                                        - message: invalid duration value
                                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                        - message: connectTimeout must be at least
                                            100ms
                                          rule: duration(self) >= duration('100ms')
                                      keepalive:
                                        description: keepAlive defines settings for
                                          enabling TCP keepalives on the connection.
                                        properties:
                                          interval:
                                            description: 'interval specifies the number
                                              of seconds between keep-alive probes.

                                              If unset, this defaults to 180s.'
                                            type: string
                                            x-kubernetes-validations:
                                            - message: invalid duration value
                                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                            - message: interval must be at least 1
                                                second
                                              rule: duration(self) >= duration('1s')
                                          retries:
                                            description: 'retries specifies the maximum
                                              number of keep-alive probes to send
                                              before dropping the connection.

                                              If unset, this defaults to 9.'
                                            format: int32
                                            maximum: 64
                                            minimum: 1
                                            type: integer
                                          time:
                                            description: 'time specifies the number
                                              of seconds a connection needs to be
                                              idle before keep-alive probes start
                                              being sent.

                                              If unset, this defaults to 180s.'
                                            type: string
                                            x-kubernetes-validations:
                                            - message: invalid duration value
                                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                            - message: time must be at least 1 second
                                              rule: duration(self) >= duration('1s')
                                        type: object
                                    type: object
                                  tls:
                                    description: 'tls defines settings for managing
                                      TLS connections to the backend.


                                      If this field is set, TLS will be initiated
                                      to the backend; the system trusted CA certificates
                                      will be used to

                                      validate the server, and the SNI will automatically
                                      be set based on the destination.'
                                    properties:
                                      alpnProtocols:
                                        description: 'alpnProtocols sets the Application
                                          Level Protocol Negotiation (ALPN) value
                                          to use in the TLS handshake.


                                          If not present, defaults to ["h2", "http/1.1"].'
                                        items:
                                          maxLength: 64
                                          minLength: 1
                                          type: string
                                        maxItems: 16
                                        minItems: 1
                                        type: array
                                      caCertificateRefs:
                                        description: 'caCertificateRefs defines the
                                          CA certificate ConfigMap to use to verify
                                          the server certificate.

                                          If unset, the system''s trusted certificates
                                          are used.'
                                        items:
                                          description: 'LocalObjectReference contains
                                            enough information to let you locate the

                                            referenced object inside the same namespace.'
                                          properties:
                                            name:
                                              default: ''
                                              description: 'Name of the referent.

                                                This field is effectively required,
                                                but due to backwards compatibility
                                                is

                                                allowed to be empty. Instances of
                                                this type with an empty value here
                                                are

                                                almost certainly wrong.

                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        maxItems: 1
                                        type: array
                                        x-kubernetes-list-type: atomic
                                      insecureSkipVerify:
                                        description: "insecureSkipVerify originates\
                                          \ TLS but skips verification of the backend's\
                                          \ certificate.\nWARNING: This is an insecure\
                                          \ option that should only be used if the\
                                          \ risks are understood.\n\nThere are two\
                                          \ modes:\n* All disables all TLS verification\n\
                                          * Hostname verifies the CA certificate is\
                                          \ trusted, but ignores any mismatch of hostname/SANs.\
                                          \ Note that this method\n is still insecure;\
                                          \ prefer setting verifySubjectAltNames to\
                                          \ customize the valid hostnames if possible."
                                        enum:
                                        - All
                                        - Hostname
                                        type: string
                                      mtlsCertificateRef:
                                        description: 'mtlsCertificateRef enables mutual
                                          TLS to the backend, using the specified
                                          key (tls.key) and cert (tls.crt) from the

                                          refenced Secret.


                                          An optional ''ca.cert'' field, if present,
                                          will be used to verify the server certificate
                                          if present. If

                                          caCertificateRefs is also specified, the
                                          caCertificateRefs field takes priority.


                                          If unspecified, no client certificate will
                                          be used.'
                                        items:
                                          description: 'LocalObjectReference contains
                                            enough information to let you locate the

                                            referenced object inside the same namespace.'
                                          properties:
                                            name:
                                              default: ''
                                              description: 'Name of the referent.

                                                This field is effectively required,
                                                but due to backwards compatibility
                                                is

                                                allowed to be empty. Instances of
                                                this type with an empty value here
                                                are

                                                almost certainly wrong.

                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        maxItems: 1
                                        type: array
                                        x-kubernetes-list-type: atomic
                                      sni:
                                        description: 'sni specifies the Server Name
                                          Indicator (SNI) to be used in the TLS handshake.
                                          If unset, the SNI is automatically

                                          set based on the destination hostname.'
                                        maxLength: 253
                                        minLength: 1
                                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                        type: string
                                      verifySubjectAltNames:
                                        description: 'verifySubjectAltNames specifies
                                          the Subject Alternative Names (SAN) to verify
                                          in the server certificate.

                                          If not present, the destination hostname
                                          is automatically used.'
                                        items:
                                          maxLength: 256
                                          minLength: 1
                                          type: string
                                        maxItems: 16
                                        minItems: 1
                                        type: array
                                    type: object
                                    x-kubernetes-validations:
                                    - message: insecureSkipVerify All and caCertificateRefs
                                        may not be set together
                                      rule: 'has(self.insecureSkipVerify) && self.insecureSkipVerify
                                        == ''All'' ? !has(self.caCertificateRefs)
                                        : true'
                                    - message: insecureSkipVerify and verifySubjectAltNames
                                        may not be set together
                                      rule: 'has(self.insecureSkipVerify) ? !has(self.verifySubjectAltNames)
                                        : true'
                                    - message: at most one of the fields in [verifySubjectAltNames
                                        insecureSkipVerify] may be set
                                      rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                        <= 1'
                                type: object
                                x-kubernetes-validations:
                                - message: at least one of the fields in [tcp tls
                                    http auth ai] must be set
                                  rule: '[has(self.tcp),has(self.tls),has(self.http),has(self.auth),has(self.ai)].filter(x,x==true).size()
                                    >= 1'
                              port:
                                description: Port specifies the port to send the requests
                                  to.
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                              vertexai:
                                description: Vertex AI provider
                                properties:
                                  model:
                                    description: 'Optional: Override the model name,
                                      such as `gpt-4o-mini`.

                                      If unset, the model name is taken from the request.'
                                    maxLength: 256
                                    minLength: 1
                                    type: string
                                  projectId:
                                    description: The ID of the Google Cloud Project
                                      that you use for the Vertex AI.
                                    maxLength: 64
                                    minLength: 1
                                    type: string
                                  region:
                                    description: The location of the Google Cloud
                                      Project that you use for the Vertex AI.
                                    maxLength: 64
                                    minLength: 1
                                    type: string
                                required:
                                - projectId
                                - region
                                type: object
                            required:
                            - name
                            type: object
                            x-kubernetes-validations:
                            - message: both host and port must be set together
                              rule: 'has(self.host) || has(self.port) ? has(self.host)
                                && has(self.port) : true'
                            - message: exactly one of the fields in [openai azureopenai
                                anthropic gemini vertexai bedrock] must be set
                              rule: '[has(self.openai),has(self.azureopenai),has(self.anthropic),has(self.gemini),has(self.vertexai),has(self.bedrock)].filter(x,x==true).size()
                                == 1'
                          maxItems: 32
                          minItems: 1
                          type: array
                          x-kubernetes-validations:
                          - message: provider names must be unique within a group
                            rule: self.all(p1, self.exists_one(p2, p1.name == p2.name))
                      required:
                      - providers
                      type: object
                    maxItems: 32
                    minItems: 1
                    type: array
                  provider:
                    description: provider specifies configuration for how to reach
                      the configured LLM provider.
                    properties:
                      anthropic:
                        description: Anthropic provider
                        properties:
                          model:
                            description: 'Optional: Override the model name, such
                              as `gpt-4o-mini`.

                              If unset, the model name is taken from the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                        type: object
                      azureopenai:
                        description: Azure OpenAI provider
                        properties:
                          apiVersion:
                            description: 'The version of the Azure OpenAI API to use.

                              For more information, see the [Azure OpenAI API version
                              reference](https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#api-specs).

                              If unset, defaults to "v1"'
                            maxLength: 64
                            minLength: 1
                            type: string
                          deploymentName:
                            description: 'The name of the Azure OpenAI model deployment
                              to use.

                              For more information, see the [Azure OpenAI model docs](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models).

                              This is required if ApiVersion is not ''v1''. For v1,
                              the model can be set in the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                          endpoint:
                            description: 'The endpoint for the Azure OpenAI API to
                              use, such as `my-endpoint.openai.azure.com`.

                              If the scheme is included, it is stripped.'
                            maxLength: 256
                            minLength: 1
                            type: string
                        required:
                        - endpoint
                        type: object
                        x-kubernetes-validations:
                        - message: deploymentName is required for this apiVersion
                          rule: '!has(self.apiVersion) || self.apiVersion == ''v1''
                            ? true : has(self.deploymentName)'
                      bedrock:
                        description: Bedrock provider
                        properties:
                          guardrail:
                            description: 'Guardrail configures the Guardrail policy
                              to use for the backend. See <https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails.html>

                              If not specified, the AWS Guardrail policy will not
                              be used.'
                            properties:
                              identifier:
                                description: GuardrailIdentifier is the identifier
                                  of the Guardrail policy to use for the backend.
                                maxLength: 256
                                minLength: 1
                                type: string
                              version:
                                description: GuardrailVersion is the version of the
                                  Guardrail policy to use for the backend.
                                maxLength: 256
                                minLength: 1
                                type: string
                            required:
                            - identifier
                            - version
                            type: object
                          model:
                            description: 'Optional: Override the model name, such
                              as `gpt-4o-mini`.

                              If unset, the model name is taken from the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                          region:
                            default: us-east-1
                            description: 'Region is the AWS region to use for the
                              backend.

                              Defaults to us-east-1 if not specified.'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9-]+$
                            type: string
                        type: object
                      gemini:
                        description: Gemini provider
                        properties:
                          model:
                            description: 'Optional: Override the model name, such
                              as `gemini-2.5-pro`.

                              If unset, the model name is taken from the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                        type: object
                      host:
                        description: 'Host specifies the hostname to send the requests
                          to.

                          If not specified, the default hostname for the provider
                          is used.'
                        maxLength: 256
                        minLength: 1
                        type: string
                      openai:
                        description: OpenAI provider
                        properties:
                          model:
                            description: 'Optional: Override the model name, such
                              as `gpt-4o-mini`.

                              If unset, the model name is taken from the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                        type: object
                      path:
                        description: 'Path specifies the URL path to use for the LLM
                          provider API requests.

                          This is useful when you need to route requests to a different
                          API endpoint while maintaining

                          compatibility with the original provider''s API structure.

                          If not specified, the default path for the provider is used.'
                        maxLength: 1024
                        minLength: 1
                        type: string
                      port:
                        description: Port specifies the port to send the requests
                          to.
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                      vertexai:
                        description: Vertex AI provider
                        properties:
                          model:
                            description: 'Optional: Override the model name, such
                              as `gpt-4o-mini`.

                              If unset, the model name is taken from the request.'
                            maxLength: 256
                            minLength: 1
                            type: string
                          projectId:
                            description: The ID of the Google Cloud Project that you
                              use for the Vertex AI.
                            maxLength: 64
                            minLength: 1
                            type: string
                          region:
                            description: The location of the Google Cloud Project
                              that you use for the Vertex AI.
                            maxLength: 64
                            minLength: 1
                            type: string
                        required:
                        - projectId
                        - region
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: both host and port must be set together
                      rule: 'has(self.host) || has(self.port) ? has(self.host) &&
                        has(self.port) : true'
                    - message: exactly one of the fields in [openai azureopenai anthropic
                        gemini vertexai bedrock] must be set
                      rule: '[has(self.openai),has(self.azureopenai),has(self.anthropic),has(self.gemini),has(self.vertexai),has(self.bedrock)].filter(x,x==true).size()
                        == 1'
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [provider groups] must be
                    set
                  rule: '[has(self.provider),has(self.groups)].filter(x,x==true).size()
                    == 1'
              dynamicForwardProxy:
                description: 'dynamicForwardProxy configures the proxy to dynamically
                  send requests to the destination based on the incoming

                  request HTTP host header, or TLS SNI for TLS traffic.


                  Note: this Backend type enables users to send trigger the proxy
                  to send requests to arbitrary destinations. Proper

                  access controls must be put in place when using this backend type.'
                type: object
              mcp:
                description: mcp represents an MCP backend
                properties:
                  sessionRouting:
                    description: 'SessionRouting configures MCP session behavior for
                      requests.

                      Defaults to Stateful if not set.'
                    enum:
                    - Stateful
                    - Stateless
                    type: string
                  targets:
                    description: 'Targets is a list of MCPBackend targets to use for
                      this backend.

                      Policies targeting MCPBackend targets must use targetRefs[].sectionName

                      to select the target by name.'
                    items:
                      description: McpTargetSelector defines the MCPBackend target
                        to use for this backend.
                      properties:
                        name:
                          description: Name of the MCPBackend target.
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        selector:
                          description: 'selector is a label selector is the selector
                            to use to select Services.

                            If policies are needed on a per-service basis, AgentgatewayPolicy
                            can target the desired Service.'
                          properties:
                            namespaces:
                              description: 'namespace is the label selector in which
                                namespaces Services should be selected from.

                                If unset, only the namespace of the AgentgatewayBackend
                                is searched.'
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: 'A label selector requirement is
                                      a selector that contains values, a key, and
                                      an operator that

                                      relates the key and values.'
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: 'operator represents a key''s
                                          relationship to a set of values.

                                          Valid operators are In, NotIn, Exists and
                                          DoesNotExist.'
                                        type: string
                                      values:
                                        description: 'values is an array of string
                                          values. If the operator is In or NotIn,

                                          the values array must be non-empty. If the
                                          operator is Exists or DoesNotExist,

                                          the values array must be empty. This array
                                          is replaced during a strategic

                                          merge patch.'
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: 'matchLabels is a map of {key,value}
                                    pairs. A single {key,value} in the matchLabels

                                    map is equivalent to an element of matchExpressions,
                                    whose key field is "key", the

                                    operator is "In", and the values array contains
                                    only "value". The requirements are ANDed.'
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            services:
                              description: services is the label selector for which
                                Services should be selected.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: 'A label selector requirement is
                                      a selector that contains values, a key, and
                                      an operator that

                                      relates the key and values.'
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: 'operator represents a key''s
                                          relationship to a set of values.

                                          Valid operators are In, NotIn, Exists and
                                          DoesNotExist.'
                                        type: string
                                      values:
                                        description: 'values is an array of string
                                          values. If the operator is In or NotIn,

                                          the values array must be non-empty. If the
                                          operator is Exists or DoesNotExist,

                                          the values array must be empty. This array
                                          is replaced during a strategic

                                          merge patch.'
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: 'matchLabels is a map of {key,value}
                                    pairs. A single {key,value} in the matchLabels

                                    map is equivalent to an element of matchExpressions,
                                    whose key field is "key", the

                                    operator is "In", and the values array contains
                                    only "value". The requirements are ANDed.'
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                          type: object
                          x-kubernetes-validations:
                          - message: at least one of the fields in [namespaces services]
                              must be set
                            rule: '[has(self.namespaces),has(self.services)].filter(x,x==true).size()
                              >= 1'
                        static:
                          description: 'static configures a static MCP destination.
                            When connecting to in-cluster Services, it is recommended
                            to use

                            ''selector'' instead.'
                          properties:
                            host:
                              description: Host is the hostname or IP address of the
                                MCPBackend target.
                              maxLength: 256
                              minLength: 1
                              type: string
                            path:
                              description: 'Path is the URL path of the MCPBackend
                                target endpoint.

                                Defaults to "/sse" for SSE protocol or "/mcp" for
                                StreamableHTTP protocol if not specified.'
                              maxLength: 1024
                              minLength: 1
                              type: string
                            policies:
                              description: 'policies controls policies for communicating
                                with this backend. Policies may also be set in AgentgatewayPolicy,
                                or

                                in the top level AgentgatewayBackend. Policies are
                                merged on a field-level basis, with order: AgentgatewayPolicy
                                <

                                AgentgatewayBackend < AgentgatewayBackend MCP (this
                                field).'
                              properties:
                                auth:
                                  description: auth defines settings for managing
                                    authentication to the backend
                                  properties:
                                    aws:
                                      description: 'Auth specifies an explicit AWS
                                        authentication method for the backend.

                                        When omitted, we will try to use the default
                                        AWS SDK authentication methods.'
                                      properties:
                                        secretRef:
                                          description: 'SecretRef references a Kubernetes
                                            Secret containing the AWS credentials.

                                            The Secret must have keys "accessKey",
                                            "secretKey", and optionally "sessionToken".'
                                          properties:
                                            name:
                                              default: ''
                                              description: 'Name of the referent.

                                                This field is effectively required,
                                                but due to backwards compatibility
                                                is

                                                allowed to be empty. Instances of
                                                this type with an empty value here
                                                are

                                                almost certainly wrong.

                                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                              type: string
                                          type: object
                                          x-kubernetes-map-type: atomic
                                      required:
                                      - secretRef
                                      type: object
                                    key:
                                      description: 'key provides an inline key to
                                        use as the value of the Authorization header.

                                        This option is the least secure; usage of
                                        a Secret is preferred.'
                                      maxLength: 2048
                                      type: string
                                    passthrough:
                                      description: 'passthrough passes through an
                                        existing token that has been sent by the client
                                        and validated. Other policies, like

                                        JWT and API Key authentication, will strip
                                        the original client credentials. Passthrough
                                        backend authentication

                                        causes the original token to be added back
                                        into the request. If there are no client authentication
                                        policies on the

                                        request, the original token would be unchanged,
                                        so this would have no effect.'
                                      type: object
                                    secretRef:
                                      description: 'secretRef references a Kubernetes
                                        secret storing the key to use the authorization
                                        value. This must be stored in the

                                        ''Authorization'' key.'
                                      properties:
                                        name:
                                          default: ''
                                          description: 'Name of the referent.

                                            This field is effectively required, but
                                            due to backwards compatibility is

                                            allowed to be empty. Instances of this
                                            type with an empty value here are

                                            almost certainly wrong.

                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  type: object
                                  x-kubernetes-validations:
                                  - message: exactly one of the fields in [key secretRef
                                      passthrough aws] must be set
                                    rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                      == 1'
                                http:
                                  description: http defines settings for managing
                                    HTTP requests to the backend.
                                  properties:
                                    requestTimeout:
                                      description: requestTimeout specifies the deadline
                                        for receiving a response from the backend.
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                      - message: requestTimeout must be at least 1ms
                                        rule: duration(self) >= duration('1ms')
                                    version:
                                      description: "version specifies the HTTP protocol\
                                        \ version to use when connecting to the backend.\n\
                                        If not specified, the version is automatically\
                                        \ determined:\n* Service types can specify\
                                        \ it with 'appProtocol' on the Service port.\n\
                                        * If traffic is identified as gRPC, HTTP2\
                                        \ is used.\n* If the incoming traffic was\
                                        \ plaintext HTTP, the original protocol will\
                                        \ be used.\n* If the incoming traffic was\
                                        \ HTTPS, HTTP1 will be used. This is because\
                                        \ most clients will\n  transparently upgrade\
                                        \ HTTPS traffic to HTTP2, even if the backend\
                                        \ doesn't support it"
                                      enum:
                                      - HTTP1
                                      - HTTP2
                                      type: string
                                  type: object
                                mcp:
                                  description: mcp specifies settings for MCP workloads.
                                    This is only applicable when connecting to a Backend
                                    of type 'mcp'.
                                  properties:
                                    authentication:
                                      description: authentication defines MCPBackend
                                        specific authentication rules.
                                      properties:
                                        audiences:
                                          description: 'audiences specify the list
                                            of allowed audiences that are allowed
                                            access. This corresponds to the ''aud''
                                            claim (https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3).

                                            If unset, any audience is allowed.'
                                          items:
                                            type: string
                                          maxItems: 64
                                          minItems: 1
                                          type: array
                                        issuer:
                                          description: Issuer identifies the IdP that
                                            issued the JWT. This corresponds to the
                                            'iss' claim (https://tools.ietf.org/html/rfc7519#section-4.1.1).
                                          maxLength: 256
                                          minLength: 1
                                          type: string
                                        jwks:
                                          description: jwks defines the remote JSON
                                            Web Key used to validate the signature
                                            of the JWT.
                                          properties:
                                            backendRef:
                                              description: 'backendRef references
                                                the remote JWKS server to reach.

                                                Supported types are Service and (static)
                                                Backend. An AgentgatewayPolicy containing
                                                backend tls config

                                                can then be attached to the service/backend
                                                in order to set tls options for a
                                                connection to the remote jwks source.'
                                              properties:
                                                group:
                                                  default: ''
                                                  description: 'Group is the group
                                                    of the referent. For example,
                                                    "gateway.networking.k8s.io".

                                                    When unspecified or empty string,
                                                    core API group is inferred.'
                                                  maxLength: 253
                                                  pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                                  type: string
                                                kind:
                                                  default: Service
                                                  description: 'Kind is the Kubernetes
                                                    resource kind of the referent.
                                                    For example

                                                    "Service".


                                                    Defaults to "Service" when not
                                                    specified.


                                                    ExternalName services can refer
                                                    to CNAME DNS records that may
                                                    live

                                                    outside of the cluster and as
                                                    such are difficult to reason about
                                                    in

                                                    terms of conformance. They also
                                                    may not be safe to forward to
                                                    (see

                                                    CVE-2021-25740 for more information).
                                                    Implementations SHOULD NOT

                                                    support ExternalName Services.


                                                    Support: Core (Services with a
                                                    type other than ExternalName)


                                                    Support: Implementation-specific
                                                    (Services with type ExternalName)'
                                                  maxLength: 63
                                                  minLength: 1
                                                  pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                                  type: string
                                                name:
                                                  description: Name is the name of
                                                    the referent.
                                                  maxLength: 253
                                                  minLength: 1
                                                  type: string
                                                namespace:
                                                  description: 'Namespace is the namespace
                                                    of the backend. When unspecified,
                                                    the local

                                                    namespace is inferred.


                                                    Note that when a namespace different
                                                    than the local namespace is specified,

                                                    a ReferenceGrant object is required
                                                    in the referent namespace to allow
                                                    that

                                                    namespace''s owner to accept the
                                                    reference. See the ReferenceGrant

                                                    documentation for details.


                                                    Support: Core'
                                                  maxLength: 63
                                                  minLength: 1
                                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                                  type: string
                                                port:
                                                  description: 'Port specifies the
                                                    destination port number to use
                                                    for this resource.

                                                    Port is required when the referent
                                                    is a Kubernetes Service. In this

                                                    case, the port number is the service
                                                    port number, not the target port.

                                                    For other resources, destination
                                                    port might be derived from the
                                                    referent

                                                    resource or this field.'
                                                  format: int32
                                                  maximum: 65535
                                                  minimum: 1
                                                  type: integer
                                              required:
                                              - name
                                              type: object
                                              x-kubernetes-validations:
                                              - message: Must have port for Service
                                                  reference
                                                rule: '(size(self.group) == 0 && self.kind
                                                  == ''Service'') ? has(self.port)
                                                  : true'
                                            cacheDuration:
                                              default: 5m
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: cacheDuration must be at
                                                  least 5m.
                                                rule: duration(self) >= duration('5m')
                                            jwksPath:
                                              description: Path to IdP jwks endpoint,
                                                relative to the root, commonly ".well-known/jwks.json".
                                              maxLength: 2000
                                              minLength: 1
                                              type: string
                                          required:
                                          - backendRef
                                          - jwksPath
                                          type: object
                                        mode:
                                          description: validation mode for JWT authentication.
                                          enum:
                                          - Strict
                                          - Optional
                                          - Permissive
                                          type: string
                                        provider:
                                          description: McpIDP specifies the identity
                                            provider to use for authentication
                                          enum:
                                          - Auth0
                                          - Keycloak
                                          type: string
                                        resourceMetadata:
                                          additionalProperties:
                                            x-kubernetes-preserve-unknown-fields: true
                                          description: ResourceMetadata defines the
                                            metadata to use for MCP resources.
                                          type: object
                                      required:
                                      - jwks
                                      type: object
                                    authorization:
                                      description: 'authorization defines MCPBackend
                                        level authorization. Unlike authorization
                                        at the HTTP level, which will reject

                                        unauthorized requests with a 403 error, this
                                        policy works at the MCPBackend level.


                                        List operations, such as list_tools, will
                                        have each item evaluated. Items that do not
                                        meet the rule will be filtered.


                                        Get or call operations, such as call_tool,
                                        will evaluate the specific item and reject
                                        requests that do not meet the rule.'
                                      properties:
                                        action:
                                          default: Allow
                                          description: 'Action defines whether the
                                            rule allows or denies the request if matched.

                                            If unspecified, the default is "Allow".'
                                          enum:
                                          - Allow
                                          - Deny
                                          type: string
                                        policy:
                                          description: 'Policy specifies the Authorization
                                            rule to evaluate.

                                            A policy matches when **any** of the conditions
                                            evaluates to true.'
                                          properties:
                                            matchExpressions:
                                              description: 'MatchExpressions defines
                                                a set of conditions that must be satisfied
                                                for the rule to match.

                                                These expression should be in the
                                                form of a Common Expression Language
                                                (CEL) expression.'
                                              items:
                                                description: CELExpression represents
                                                  a Common Expression Language (CEL)
                                                  expression.
                                                maxLength: 16384
                                                minLength: 1
                                                type: string
                                              maxItems: 256
                                              minItems: 1
                                              type: array
                                          required:
                                          - matchExpressions
                                          type: object
                                      required:
                                      - policy
                                      type: object
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [authorization
                                      authentication] must be set
                                    rule: '[has(self.authorization),has(self.authentication)].filter(x,x==true).size()
                                      >= 1'
                                tcp:
                                  description: tcp defines settings for managing TCP
                                    connections to the backend.
                                  properties:
                                    connectTimeout:
                                      description: connectTimeout defines the deadline
                                        for establishing a connection to the destination.
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                      - message: connectTimeout must be at least 100ms
                                        rule: duration(self) >= duration('100ms')
                                    keepalive:
                                      description: keepAlive defines settings for
                                        enabling TCP keepalives on the connection.
                                      properties:
                                        interval:
                                          description: 'interval specifies the number
                                            of seconds between keep-alive probes.

                                            If unset, this defaults to 180s.'
                                          type: string
                                          x-kubernetes-validations:
                                          - message: invalid duration value
                                            rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                          - message: interval must be at least 1 second
                                            rule: duration(self) >= duration('1s')
                                        retries:
                                          description: 'retries specifies the maximum
                                            number of keep-alive probes to send before
                                            dropping the connection.

                                            If unset, this defaults to 9.'
                                          format: int32
                                          maximum: 64
                                          minimum: 1
                                          type: integer
                                        time:
                                          description: 'time specifies the number
                                            of seconds a connection needs to be idle
                                            before keep-alive probes start being sent.

                                            If unset, this defaults to 180s.'
                                          type: string
                                          x-kubernetes-validations:
                                          - message: invalid duration value
                                            rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                          - message: time must be at least 1 second
                                            rule: duration(self) >= duration('1s')
                                      type: object
                                  type: object
                                tls:
                                  description: 'tls defines settings for managing
                                    TLS connections to the backend.


                                    If this field is set, TLS will be initiated to
                                    the backend; the system trusted CA certificates
                                    will be used to

                                    validate the server, and the SNI will automatically
                                    be set based on the destination.'
                                  properties:
                                    alpnProtocols:
                                      description: 'alpnProtocols sets the Application
                                        Level Protocol Negotiation (ALPN) value to
                                        use in the TLS handshake.


                                        If not present, defaults to ["h2", "http/1.1"].'
                                      items:
                                        maxLength: 64
                                        minLength: 1
                                        type: string
                                      maxItems: 16
                                      minItems: 1
                                      type: array
                                    caCertificateRefs:
                                      description: 'caCertificateRefs defines the
                                        CA certificate ConfigMap to use to verify
                                        the server certificate.

                                        If unset, the system''s trusted certificates
                                        are used.'
                                      items:
                                        description: 'LocalObjectReference contains
                                          enough information to let you locate the

                                          referenced object inside the same namespace.'
                                        properties:
                                          name:
                                            default: ''
                                            description: 'Name of the referent.

                                              This field is effectively required,
                                              but due to backwards compatibility is

                                              allowed to be empty. Instances of this
                                              type with an empty value here are

                                              almost certainly wrong.

                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                            type: string
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      maxItems: 1
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    insecureSkipVerify:
                                      description: "insecureSkipVerify originates\
                                        \ TLS but skips verification of the backend's\
                                        \ certificate.\nWARNING: This is an insecure\
                                        \ option that should only be used if the risks\
                                        \ are understood.\n\nThere are two modes:\n\
                                        * All disables all TLS verification\n* Hostname\
                                        \ verifies the CA certificate is trusted,\
                                        \ but ignores any mismatch of hostname/SANs.\
                                        \ Note that this method\n is still insecure;\
                                        \ prefer setting verifySubjectAltNames to\
                                        \ customize the valid hostnames if possible."
                                      enum:
                                      - All
                                      - Hostname
                                      type: string
                                    mtlsCertificateRef:
                                      description: 'mtlsCertificateRef enables mutual
                                        TLS to the backend, using the specified key
                                        (tls.key) and cert (tls.crt) from the

                                        refenced Secret.


                                        An optional ''ca.cert'' field, if present,
                                        will be used to verify the server certificate
                                        if present. If

                                        caCertificateRefs is also specified, the caCertificateRefs
                                        field takes priority.


                                        If unspecified, no client certificate will
                                        be used.'
                                      items:
                                        description: 'LocalObjectReference contains
                                          enough information to let you locate the

                                          referenced object inside the same namespace.'
                                        properties:
                                          name:
                                            default: ''
                                            description: 'Name of the referent.

                                              This field is effectively required,
                                              but due to backwards compatibility is

                                              allowed to be empty. Instances of this
                                              type with an empty value here are

                                              almost certainly wrong.

                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                            type: string
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      maxItems: 1
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    sni:
                                      description: 'sni specifies the Server Name
                                        Indicator (SNI) to be used in the TLS handshake.
                                        If unset, the SNI is automatically

                                        set based on the destination hostname.'
                                      maxLength: 253
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    verifySubjectAltNames:
                                      description: 'verifySubjectAltNames specifies
                                        the Subject Alternative Names (SAN) to verify
                                        in the server certificate.

                                        If not present, the destination hostname is
                                        automatically used.'
                                      items:
                                        maxLength: 256
                                        minLength: 1
                                        type: string
                                      maxItems: 16
                                      minItems: 1
                                      type: array
                                  type: object
                                  x-kubernetes-validations:
                                  - message: insecureSkipVerify All and caCertificateRefs
                                      may not be set together
                                    rule: 'has(self.insecureSkipVerify) && self.insecureSkipVerify
                                      == ''All'' ? !has(self.caCertificateRefs) :
                                      true'
                                  - message: insecureSkipVerify and verifySubjectAltNames
                                      may not be set together
                                    rule: 'has(self.insecureSkipVerify) ? !has(self.verifySubjectAltNames)
                                      : true'
                                  - message: at most one of the fields in [verifySubjectAltNames
                                      insecureSkipVerify] may be set
                                    rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                      <= 1'
                              type: object
                              x-kubernetes-validations:
                              - message: at least one of the fields in [tcp tls http
                                  auth mcp] must be set
                                rule: '[has(self.tcp),has(self.tls),has(self.http),has(self.auth),has(self.mcp)].filter(x,x==true).size()
                                  >= 1'
                            port:
                              description: Port is the port number of the MCPBackend
                                target.
                              format: int32
                              maximum: 65535
                              minimum: 1
                              type: integer
                            protocol:
                              description: Protocol is the protocol to use for the
                                connection to the MCPBackend target.
                              enum:
                              - StreamableHTTP
                              - SSE
                              type: string
                          required:
                          - host
                          - port
                          type: object
                      required:
                      - name
                      type: object
                      x-kubernetes-validations:
                      - message: exactly one of the fields in [selector static] must
                          be set
                        rule: '[has(self.selector),has(self.static)].filter(x,x==true).size()
                          == 1'
                    maxItems: 32
                    minItems: 1
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                    x-kubernetes-validations:
                    - message: target names must be unique
                      rule: self.all(t1, self.exists_one(t2, t1.name == t2.name))
                required:
                - targets
                type: object
              policies:
                description: 'policies controls policies for communicating with this
                  backend. Policies may also be set in AgentgatewayPolicy;

                  policies are merged on a field-level basis, with policies on the
                  Backend (this field) taking precedence.'
                properties:
                  ai:
                    description: ai specifies settings for AI workloads. This is only
                      applicable when connecting to a Backend of type 'ai'.
                    properties:
                      defaults:
                        description: Provide defaults to merge with user input fields.
                          If the field is already set, the field in the request is
                          used.
                        items:
                          description: "FieldDefault provides default values for specific\
                            \ fields in the JSON request body sent to the LLM provider.\n\
                            These defaults are merged with the user-provided request\
                            \ to ensure missing fields are populated.\n\nUser input\
                            \ fields here refer to the fields in the JSON request\
                            \ body that a client sends when making a request to the\
                            \ LLM provider.\nDefaults set here do _not_ override those\
                            \ user-provided values unless you explicitly set `override`\
                            \ to `true`.\n\nExample: Setting a default system field\
                            \ for Anthropic, which does not support system role messages:\n\
                            ```yaml\ndefaults:\n  - field: \"system\"\n    value:\
                            \ \"answer all questions in French\"\n\n```\n\nExample:\
                            \ Setting a default temperature and overriding `max_tokens`:\n\
                            ```yaml\ndefaults:\n  - field: \"temperature\"\n    value:\
                            \ \"0.5\"\n  - field: \"max_tokens\"\n    value: \"100\"\
                            \n    override: true\n\n```\n\nExample: Setting custom\
                            \ lists fields:\n```yaml\ndefaults:\n  - field: \"custom_integer_list\"\
                            \n    value: [1,2,3]\n\noverrides:\n  - field: \"custom_string_list\"\
                            \n    value: [\"one\",\"two\",\"three\"]\n\n```\n\nNote:\
                            \ The `field` values correspond to keys in the JSON request\
                            \ body, not fields in this CRD."
                          properties:
                            field:
                              description: The name of the field.
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              description: The field default value, which can be any
                                JSON Data Type.
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      modelAliases:
                        additionalProperties:
                          type: string
                        description: 'ModelAliases maps friendly model names to actual
                          provider model names.

                          Example: {"fast": "gpt-3.5-turbo", "smart": "gpt-4-turbo"}

                          Note: This field is only applicable when using the agentgateway
                          data plane.'
                        maxProperties: 64
                        type: object
                      overrides:
                        description: Provide overrides to merge with user input fields.
                          If the field is already set, the field will be overwritten.
                        items:
                          description: "FieldDefault provides default values for specific\
                            \ fields in the JSON request body sent to the LLM provider.\n\
                            These defaults are merged with the user-provided request\
                            \ to ensure missing fields are populated.\n\nUser input\
                            \ fields here refer to the fields in the JSON request\
                            \ body that a client sends when making a request to the\
                            \ LLM provider.\nDefaults set here do _not_ override those\
                            \ user-provided values unless you explicitly set `override`\
                            \ to `true`.\n\nExample: Setting a default system field\
                            \ for Anthropic, which does not support system role messages:\n\
                            ```yaml\ndefaults:\n  - field: \"system\"\n    value:\
                            \ \"answer all questions in French\"\n\n```\n\nExample:\
                            \ Setting a default temperature and overriding `max_tokens`:\n\
                            ```yaml\ndefaults:\n  - field: \"temperature\"\n    value:\
                            \ \"0.5\"\n  - field: \"max_tokens\"\n    value: \"100\"\
                            \n    override: true\n\n```\n\nExample: Setting custom\
                            \ lists fields:\n```yaml\ndefaults:\n  - field: \"custom_integer_list\"\
                            \n    value: [1,2,3]\n\noverrides:\n  - field: \"custom_string_list\"\
                            \n    value: [\"one\",\"two\",\"three\"]\n\n```\n\nNote:\
                            \ The `field` values correspond to keys in the JSON request\
                            \ body, not fields in this CRD."
                          properties:
                            field:
                              description: The name of the field.
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              description: The field default value, which can be any
                                JSON Data Type.
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      prompt:
                        description: 'Enrich requests sent to the LLM provider by
                          appending and prepending system prompts. This can be configured
                          only for

                          LLM providers that use the `CHAT` or `CHAT_STREAMING` API
                          route type.'
                        properties:
                          append:
                            description: A list of messages to be appended to the
                              prompt sent by the client.
                            items:
                              description: An entry for a message to prepend or append
                                to each prompt.
                              properties:
                                content:
                                  description: String content of the message.
                                  type: string
                                role:
                                  description: 'Role of the message. The available
                                    roles depend on the backend

                                    LLM provider model, such as `SYSTEM` or `USER`
                                    in the OpenAI API.'
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                          prepend:
                            description: A list of messages to be prepended to the
                              prompt sent by the client.
                            items:
                              description: An entry for a message to prepend or append
                                to each prompt.
                              properties:
                                content:
                                  description: String content of the message.
                                  type: string
                                role:
                                  description: 'Role of the message. The available
                                    roles depend on the backend

                                    LLM provider model, such as `SYSTEM` or `USER`
                                    in the OpenAI API.'
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                        type: object
                      promptCaching:
                        description: 'promptCaching enables automatic prompt caching
                          for supported providers (AWS Bedrock).

                          Reduces API costs by caching static content like system
                          prompts and tool definitions.

                          Only applicable for Bedrock Claude 3+ and Nova models.'
                        properties:
                          cacheMessages:
                            default: true
                            description: 'CacheMessages enables caching for conversation
                              messages.

                              Caches all messages in the conversation for cost savings.'
                            type: boolean
                          cacheSystem:
                            default: true
                            description: 'CacheSystem enables caching for system prompts.

                              Inserts a cache point after all system messages.'
                            type: boolean
                          cacheTools:
                            default: false
                            description: 'CacheTools enables caching for tool definitions.

                              Inserts a cache point after all tool specifications.'
                            type: boolean
                          minTokens:
                            default: 1024
                            description: "MinTokens specifies the minimum estimated\
                              \ token count\nbefore caching is enabled. Uses rough\
                              \ heuristic (word count \xD7 1.3) to estimate tokens.\n\
                              Bedrock requires at least 1,024 tokens for caching to\
                              \ be effective."
                            minimum: 0
                            type: integer
                        type: object
                      promptGuard:
                        description: promptGuard enables adding guardrails to LLM
                          requests and responses.
                        properties:
                          request:
                            description: Prompt guards to apply to requests sent by
                              the client.
                            items:
                              description: PromptguardRequest defines the prompt guards
                                to apply to requests sent by the client.
                              properties:
                                openAIModeration:
                                  description: 'openAIModeration passes prompt data
                                    through the OpenAI Moderations endpoint.

                                    See https://platform.openai.com/docs/api-reference/moderations
                                    for more information.'
                                  properties:
                                    model:
                                      description: model specifies the moderation
                                        model to use. For example, `omni-moderation`.
                                      type: string
                                    policies:
                                      description: policies controls policies for
                                        communicating with OpenAI.
                                      properties:
                                        auth:
                                          description: auth defines settings for managing
                                            authentication to the backend
                                          properties:
                                            aws:
                                              description: 'Auth specifies an explicit
                                                AWS authentication method for the
                                                backend.

                                                When omitted, we will try to use the
                                                default AWS SDK authentication methods.'
                                              properties:
                                                secretRef:
                                                  description: 'SecretRef references
                                                    a Kubernetes Secret containing
                                                    the AWS credentials.

                                                    The Secret must have keys "accessKey",
                                                    "secretKey", and optionally "sessionToken".'
                                                  properties:
                                                    name:
                                                      default: ''
                                                      description: 'Name of the referent.

                                                        This field is effectively
                                                        required, but due to backwards
                                                        compatibility is

                                                        allowed to be empty. Instances
                                                        of this type with an empty
                                                        value here are

                                                        almost certainly wrong.

                                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                      type: string
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                              required:
                                              - secretRef
                                              type: object
                                            key:
                                              description: 'key provides an inline
                                                key to use as the value of the Authorization
                                                header.

                                                This option is the least secure; usage
                                                of a Secret is preferred.'
                                              maxLength: 2048
                                              type: string
                                            passthrough:
                                              description: 'passthrough passes through
                                                an existing token that has been sent
                                                by the client and validated. Other
                                                policies, like

                                                JWT and API Key authentication, will
                                                strip the original client credentials.
                                                Passthrough backend authentication

                                                causes the original token to be added
                                                back into the request. If there are
                                                no client authentication policies
                                                on the

                                                request, the original token would
                                                be unchanged, so this would have no
                                                effect.'
                                              type: object
                                            secretRef:
                                              description: 'secretRef references a
                                                Kubernetes secret storing the key
                                                to use the authorization value. This
                                                must be stored in the

                                                ''Authorization'' key.'
                                              properties:
                                                name:
                                                  default: ''
                                                  description: 'Name of the referent.

                                                    This field is effectively required,
                                                    but due to backwards compatibility
                                                    is

                                                    allowed to be empty. Instances
                                                    of this type with an empty value
                                                    here are

                                                    almost certainly wrong.

                                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                  type: string
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                          x-kubernetes-validations:
                                          - message: exactly one of the fields in
                                              [key secretRef passthrough aws] must
                                              be set
                                            rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                              == 1'
                                        http:
                                          description: http defines settings for managing
                                            HTTP requests to the backend.
                                          properties:
                                            requestTimeout:
                                              description: requestTimeout specifies
                                                the deadline for receiving a response
                                                from the backend.
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: requestTimeout must be at
                                                  least 1ms
                                                rule: duration(self) >= duration('1ms')
                                            version:
                                              description: "version specifies the\
                                                \ HTTP protocol version to use when\
                                                \ connecting to the backend.\nIf not\
                                                \ specified, the version is automatically\
                                                \ determined:\n* Service types can\
                                                \ specify it with 'appProtocol' on\
                                                \ the Service port.\n* If traffic\
                                                \ is identified as gRPC, HTTP2 is\
                                                \ used.\n* If the incoming traffic\
                                                \ was plaintext HTTP, the original\
                                                \ protocol will be used.\n* If the\
                                                \ incoming traffic was HTTPS, HTTP1\
                                                \ will be used. This is because most\
                                                \ clients will\n  transparently upgrade\
                                                \ HTTPS traffic to HTTP2, even if\
                                                \ the backend doesn't support it"
                                              enum:
                                              - HTTP1
                                              - HTTP2
                                              type: string
                                          type: object
                                        tcp:
                                          description: tcp defines settings for managing
                                            TCP connections to the backend.
                                          properties:
                                            connectTimeout:
                                              description: connectTimeout defines
                                                the deadline for establishing a connection
                                                to the destination.
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: connectTimeout must be at
                                                  least 100ms
                                                rule: duration(self) >= duration('100ms')
                                            keepalive:
                                              description: keepAlive defines settings
                                                for enabling TCP keepalives on the
                                                connection.
                                              properties:
                                                interval:
                                                  description: 'interval specifies
                                                    the number of seconds between
                                                    keep-alive probes.

                                                    If unset, this defaults to 180s.'
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: interval must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                                retries:
                                                  description: 'retries specifies
                                                    the maximum number of keep-alive
                                                    probes to send before dropping
                                                    the connection.

                                                    If unset, this defaults to 9.'
                                                  format: int32
                                                  maximum: 64
                                                  minimum: 1
                                                  type: integer
                                                time:
                                                  description: 'time specifies the
                                                    number of seconds a connection
                                                    needs to be idle before keep-alive
                                                    probes start being sent.

                                                    If unset, this defaults to 180s.'
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: time must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                              type: object
                                          type: object
                                        tls:
                                          description: 'tls defines settings for managing
                                            TLS connections to the backend.


                                            If this field is set, TLS will be initiated
                                            to the backend; the system trusted CA
                                            certificates will be used to

                                            validate the server, and the SNI will
                                            automatically be set based on the destination.'
                                          properties:
                                            alpnProtocols:
                                              description: 'alpnProtocols sets the
                                                Application Level Protocol Negotiation
                                                (ALPN) value to use in the TLS handshake.


                                                If not present, defaults to ["h2",
                                                "http/1.1"].'
                                              items:
                                                maxLength: 64
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                            caCertificateRefs:
                                              description: 'caCertificateRefs defines
                                                the CA certificate ConfigMap to use
                                                to verify the server certificate.

                                                If unset, the system''s trusted certificates
                                                are used.'
                                              items:
                                                description: 'LocalObjectReference
                                                  contains enough information to let
                                                  you locate the

                                                  referenced object inside the same
                                                  namespace.'
                                                properties:
                                                  name:
                                                    default: ''
                                                    description: 'Name of the referent.

                                                      This field is effectively required,
                                                      but due to backwards compatibility
                                                      is

                                                      allowed to be empty. Instances
                                                      of this type with an empty value
                                                      here are

                                                      almost certainly wrong.

                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            insecureSkipVerify:
                                              description: "insecureSkipVerify originates\
                                                \ TLS but skips verification of the\
                                                \ backend's certificate.\nWARNING:\
                                                \ This is an insecure option that\
                                                \ should only be used if the risks\
                                                \ are understood.\n\nThere are two\
                                                \ modes:\n* All disables all TLS verification\n\
                                                * Hostname verifies the CA certificate\
                                                \ is trusted, but ignores any mismatch\
                                                \ of hostname/SANs. Note that this\
                                                \ method\n is still insecure; prefer\
                                                \ setting verifySubjectAltNames to\
                                                \ customize the valid hostnames if\
                                                \ possible."
                                              enum:
                                              - All
                                              - Hostname
                                              type: string
                                            mtlsCertificateRef:
                                              description: 'mtlsCertificateRef enables
                                                mutual TLS to the backend, using the
                                                specified key (tls.key) and cert (tls.crt)
                                                from the

                                                refenced Secret.


                                                An optional ''ca.cert'' field, if
                                                present, will be used to verify the
                                                server certificate if present. If

                                                caCertificateRefs is also specified,
                                                the caCertificateRefs field takes
                                                priority.


                                                If unspecified, no client certificate
                                                will be used.'
                                              items:
                                                description: 'LocalObjectReference
                                                  contains enough information to let
                                                  you locate the

                                                  referenced object inside the same
                                                  namespace.'
                                                properties:
                                                  name:
                                                    default: ''
                                                    description: 'Name of the referent.

                                                      This field is effectively required,
                                                      but due to backwards compatibility
                                                      is

                                                      allowed to be empty. Instances
                                                      of this type with an empty value
                                                      here are

                                                      almost certainly wrong.

                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            sni:
                                              description: 'sni specifies the Server
                                                Name Indicator (SNI) to be used in
                                                the TLS handshake. If unset, the SNI
                                                is automatically

                                                set based on the destination hostname.'
                                              maxLength: 253
                                              minLength: 1
                                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                              type: string
                                            verifySubjectAltNames:
                                              description: 'verifySubjectAltNames
                                                specifies the Subject Alternative
                                                Names (SAN) to verify in the server
                                                certificate.

                                                If not present, the destination hostname
                                                is automatically used.'
                                              items:
                                                maxLength: 256
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                          type: object
                                          x-kubernetes-validations:
                                          - message: insecureSkipVerify All and caCertificateRefs
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) &&
                                              self.insecureSkipVerify == ''All'' ?
                                              !has(self.caCertificateRefs) : true'
                                          - message: insecureSkipVerify and verifySubjectAltNames
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) ?
                                              !has(self.verifySubjectAltNames) : true'
                                          - message: at most one of the fields in
                                              [verifySubjectAltNames insecureSkipVerify]
                                              may be set
                                            rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                              <= 1'
                                      type: object
                                  type: object
                                regex:
                                  description: Regular expression (regex) matching
                                    for prompt guards and data masking.
                                  properties:
                                    action:
                                      default: Mask
                                      description: 'The action to take if a regex
                                        pattern is matched in a request or response.

                                        This setting applies only to request matches.
                                        PromptguardResponse matches are always masked
                                        by default.

                                        Defaults to `Mask`.'
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      description: 'A list of built-in regex patterns
                                        to match against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        description: 'BuiltIn regex patterns for specific
                                          types of strings in prompts.

                                          For example, if you specify `CreditCard`,
                                          any credit card numbers

                                          in the request or response are matched.'
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      description: 'A list of regex patterns to match
                                        against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  description: 'A custom response message to return
                                    to the client. If not specified, defaults to

                                    "The request was rejected due to inappropriate
                                    content".'
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      description: 'A custom response message to return
                                        to the client. If not specified, defaults
                                        to

                                        "The request was rejected due to inappropriate
                                        content".'
                                      type: string
                                    statusCode:
                                      default: 403
                                      description: The status code to return to the
                                        client. Defaults to 403.
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  description: Configure a webhook to forward requests
                                    to for prompt guarding.
                                  properties:
                                    backendRef:
                                      description: 'backendRef references the webhook
                                        server to reach.


                                        Supported types: Service and Backend.'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      description: 'ForwardHeaderMatches defines a
                                        list of HTTP header matches that will be

                                        used to select the headers to forward to the
                                        webhook.

                                        Request headers are used when forwarding requests
                                        and response headers

                                        are used when forwarding responses.

                                        By default, no headers are forwarded.'
                                      items:
                                        description: 'HTTPHeaderMatch describes how
                                          to select a HTTP route by matching HTTP
                                          request

                                          headers.'
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, only the first

                                              entry with an equivalent name MUST be
                                              considered for a match. Subsequent

                                              entries with an equivalent header name
                                              MUST be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.


                                              When a header is repeated in an HTTP
                                              request, it is

                                              implementation-specific behavior as
                                              to how this is represented.

                                              Generally, proxies should follow the
                                              guidance from the RFC:

                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                              regarding

                                              processing a repeated header, with special
                                              handling for "Set-Cookie".'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            description: 'Type specifies how to match
                                              against the value of the header.


                                              Support: Core (Exact)


                                              Support: Implementation-specific (RegularExpression)


                                              Since RegularExpression HeaderMatchType
                                              has implementation-specific

                                              conformance, implementations can support
                                              POSIX, PCRE or any other dialects

                                              of regular expressions. Please read
                                              the implementation''s documentation
                                              to

                                              determine the supported dialect.'
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook
                                  openAIModeration] must be set
                                rule: '[has(self.regex),has(self.webhook),has(self.openAIModeration)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                          response:
                            description: Prompt guards to apply to responses returned
                              by the LLM provider.
                            items:
                              description: PromptguardResponse configures the response
                                that the prompt guard applies to responses returned
                                by the LLM provider.
                              properties:
                                regex:
                                  description: Regular expression (regex) matching
                                    for prompt guards and data masking.
                                  properties:
                                    action:
                                      default: Mask
                                      description: 'The action to take if a regex
                                        pattern is matched in a request or response.

                                        This setting applies only to request matches.
                                        PromptguardResponse matches are always masked
                                        by default.

                                        Defaults to `Mask`.'
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      description: 'A list of built-in regex patterns
                                        to match against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        description: 'BuiltIn regex patterns for specific
                                          types of strings in prompts.

                                          For example, if you specify `CreditCard`,
                                          any credit card numbers

                                          in the request or response are matched.'
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      description: 'A list of regex patterns to match
                                        against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  description: 'A custom response message to return
                                    to the client. If not specified, defaults to

                                    "The response was rejected due to inappropriate
                                    content".'
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      description: 'A custom response message to return
                                        to the client. If not specified, defaults
                                        to

                                        "The request was rejected due to inappropriate
                                        content".'
                                      type: string
                                    statusCode:
                                      default: 403
                                      description: The status code to return to the
                                        client. Defaults to 403.
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  description: Configure a webhook to forward responses
                                    to for prompt guarding.
                                  properties:
                                    backendRef:
                                      description: 'backendRef references the webhook
                                        server to reach.


                                        Supported types: Service and Backend.'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      description: 'ForwardHeaderMatches defines a
                                        list of HTTP header matches that will be

                                        used to select the headers to forward to the
                                        webhook.

                                        Request headers are used when forwarding requests
                                        and response headers

                                        are used when forwarding responses.

                                        By default, no headers are forwarded.'
                                      items:
                                        description: 'HTTPHeaderMatch describes how
                                          to select a HTTP route by matching HTTP
                                          request

                                          headers.'
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, only the first

                                              entry with an equivalent name MUST be
                                              considered for a match. Subsequent

                                              entries with an equivalent header name
                                              MUST be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.


                                              When a header is repeated in an HTTP
                                              request, it is

                                              implementation-specific behavior as
                                              to how this is represented.

                                              Generally, proxies should follow the
                                              guidance from the RFC:

                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                              regarding

                                              processing a repeated header, with special
                                              handling for "Set-Cookie".'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            description: 'Type specifies how to match
                                              against the value of the header.


                                              Support: Core (Exact)


                                              Support: Implementation-specific (RegularExpression)


                                              Since RegularExpression HeaderMatchType
                                              has implementation-specific

                                              conformance, implementations can support
                                              POSIX, PCRE or any other dialects

                                              of regular expressions. Please read
                                              the implementation''s documentation
                                              to

                                              determine the supported dialect.'
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook]
                                  must be set
                                rule: '[has(self.regex),has(self.webhook)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [request response]
                            must be set
                          rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                            >= 1'
                      routes:
                        additionalProperties:
                          description: 'RouteType specifies how the AI gateway should
                            process incoming requests

                            based on the URL path and the API format expected.'
                          enum:
                          - Completions
                          - Messages
                          - Models
                          - Passthrough
                          - Responses
                          - AnthropicTokenCount
                          - Embeddings
                          type: string
                        description: 'routes defines how to identify the type of traffic
                          to handle.

                          The keys are URL path suffixes matched using ends-with comparison
                          (e.g., "/v1/chat/completions").

                          The special "*" wildcard matches any path.

                          If not specified, all traffic defaults to "completions"
                          type.'
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [prompt promptGuard defaults
                        overrides modelAliases promptCaching routes] must be set
                      rule: '[has(self.prompt),has(self.promptGuard),has(self.defaults),has(self.overrides),has(self.modelAliases),has(self.promptCaching),has(self.routes)].filter(x,x==true).size()
                        >= 1'
                  auth:
                    description: auth defines settings for managing authentication
                      to the backend
                    properties:
                      aws:
                        description: 'Auth specifies an explicit AWS authentication
                          method for the backend.

                          When omitted, we will try to use the default AWS SDK authentication
                          methods.'
                        properties:
                          secretRef:
                            description: 'SecretRef references a Kubernetes Secret
                              containing the AWS credentials.

                              The Secret must have keys "accessKey", "secretKey",
                              and optionally "sessionToken".'
                            properties:
                              name:
                                default: ''
                                description: 'Name of the referent.

                                  This field is effectively required, but due to backwards
                                  compatibility is

                                  allowed to be empty. Instances of this type with
                                  an empty value here are

                                  almost certainly wrong.

                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            type: object
                            x-kubernetes-map-type: atomic
                        required:
                        - secretRef
                        type: object
                      key:
                        description: 'key provides an inline key to use as the value
                          of the Authorization header.

                          This option is the least secure; usage of a Secret is preferred.'
                        maxLength: 2048
                        type: string
                      passthrough:
                        description: 'passthrough passes through an existing token
                          that has been sent by the client and validated. Other policies,
                          like

                          JWT and API Key authentication, will strip the original
                          client credentials. Passthrough backend authentication

                          causes the original token to be added back into the request.
                          If there are no client authentication policies on the

                          request, the original token would be unchanged, so this
                          would have no effect.'
                        type: object
                      secretRef:
                        description: 'secretRef references a Kubernetes secret storing
                          the key to use the authorization value. This must be stored
                          in the

                          ''Authorization'' key.'
                        properties:
                          name:
                            default: ''
                            description: 'Name of the referent.

                              This field is effectively required, but due to backwards
                              compatibility is

                              allowed to be empty. Instances of this type with an
                              empty value here are

                              almost certainly wrong.

                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [key secretRef passthrough
                        aws] must be set
                      rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                        == 1'
                  http:
                    description: http defines settings for managing HTTP requests
                      to the backend.
                    properties:
                      requestTimeout:
                        description: requestTimeout specifies the deadline for receiving
                          a response from the backend.
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: requestTimeout must be at least 1ms
                          rule: duration(self) >= duration('1ms')
                      version:
                        description: "version specifies the HTTP protocol version\
                          \ to use when connecting to the backend.\nIf not specified,\
                          \ the version is automatically determined:\n* Service types\
                          \ can specify it with 'appProtocol' on the Service port.\n\
                          * If traffic is identified as gRPC, HTTP2 is used.\n* If\
                          \ the incoming traffic was plaintext HTTP, the original\
                          \ protocol will be used.\n* If the incoming traffic was\
                          \ HTTPS, HTTP1 will be used. This is because most clients\
                          \ will\n  transparently upgrade HTTPS traffic to HTTP2,\
                          \ even if the backend doesn't support it"
                        enum:
                        - HTTP1
                        - HTTP2
                        type: string
                    type: object
                  mcp:
                    description: mcp specifies settings for MCP workloads. This is
                      only applicable when connecting to a Backend of type 'mcp'.
                    properties:
                      authentication:
                        description: authentication defines MCPBackend specific authentication
                          rules.
                        properties:
                          audiences:
                            description: 'audiences specify the list of allowed audiences
                              that are allowed access. This corresponds to the ''aud''
                              claim (https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3).

                              If unset, any audience is allowed.'
                            items:
                              type: string
                            maxItems: 64
                            minItems: 1
                            type: array
                          issuer:
                            description: Issuer identifies the IdP that issued the
                              JWT. This corresponds to the 'iss' claim (https://tools.ietf.org/html/rfc7519#section-4.1.1).
                            maxLength: 256
                            minLength: 1
                            type: string
                          jwks:
                            description: jwks defines the remote JSON Web Key used
                              to validate the signature of the JWT.
                            properties:
                              backendRef:
                                description: 'backendRef references the remote JWKS
                                  server to reach.

                                  Supported types are Service and (static) Backend.
                                  An AgentgatewayPolicy containing backend tls config

                                  can then be attached to the service/backend in order
                                  to set tls options for a connection to the remote
                                  jwks source.'
                                properties:
                                  group:
                                    default: ''
                                    description: 'Group is the group of the referent.
                                      For example, "gateway.networking.k8s.io".

                                      When unspecified or empty string, core API group
                                      is inferred.'
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    description: 'Kind is the Kubernetes resource
                                      kind of the referent. For example

                                      "Service".


                                      Defaults to "Service" when not specified.


                                      ExternalName services can refer to CNAME DNS
                                      records that may live

                                      outside of the cluster and as such are difficult
                                      to reason about in

                                      terms of conformance. They also may not be safe
                                      to forward to (see

                                      CVE-2021-25740 for more information). Implementations
                                      SHOULD NOT

                                      support ExternalName Services.


                                      Support: Core (Services with a type other than
                                      ExternalName)


                                      Support: Implementation-specific (Services with
                                      type ExternalName)'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    description: Name is the name of the referent.
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: 'Namespace is the namespace of the
                                      backend. When unspecified, the local

                                      namespace is inferred.


                                      Note that when a namespace different than the
                                      local namespace is specified,

                                      a ReferenceGrant object is required in the referent
                                      namespace to allow that

                                      namespace''s owner to accept the reference.
                                      See the ReferenceGrant

                                      documentation for details.


                                      Support: Core'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    description: 'Port specifies the destination port
                                      number to use for this resource.

                                      Port is required when the referent is a Kubernetes
                                      Service. In this

                                      case, the port number is the service port number,
                                      not the target port.

                                      For other resources, destination port might
                                      be derived from the referent

                                      resource or this field.'
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              cacheDuration:
                                default: 5m
                                type: string
                                x-kubernetes-validations:
                                - message: invalid duration value
                                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                - message: cacheDuration must be at least 5m.
                                  rule: duration(self) >= duration('5m')
                              jwksPath:
                                description: Path to IdP jwks endpoint, relative to
                                  the root, commonly ".well-known/jwks.json".
                                maxLength: 2000
                                minLength: 1
                                type: string
                            required:
                            - backendRef
                            - jwksPath
                            type: object
                          mode:
                            description: validation mode for JWT authentication.
                            enum:
                            - Strict
                            - Optional
                            - Permissive
                            type: string
                          provider:
                            description: McpIDP specifies the identity provider to
                              use for authentication
                            enum:
                            - Auth0
                            - Keycloak
                            type: string
                          resourceMetadata:
                            additionalProperties:
                              x-kubernetes-preserve-unknown-fields: true
                            description: ResourceMetadata defines the metadata to
                              use for MCP resources.
                            type: object
                        required:
                        - jwks
                        type: object
                      authorization:
                        description: 'authorization defines MCPBackend level authorization.
                          Unlike authorization at the HTTP level, which will reject

                          unauthorized requests with a 403 error, this policy works
                          at the MCPBackend level.


                          List operations, such as list_tools, will have each item
                          evaluated. Items that do not meet the rule will be filtered.


                          Get or call operations, such as call_tool, will evaluate
                          the specific item and reject requests that do not meet the
                          rule.'
                        properties:
                          action:
                            default: Allow
                            description: 'Action defines whether the rule allows or
                              denies the request if matched.

                              If unspecified, the default is "Allow".'
                            enum:
                            - Allow
                            - Deny
                            type: string
                          policy:
                            description: 'Policy specifies the Authorization rule
                              to evaluate.

                              A policy matches when **any** of the conditions evaluates
                              to true.'
                            properties:
                              matchExpressions:
                                description: 'MatchExpressions defines a set of conditions
                                  that must be satisfied for the rule to match.

                                  These expression should be in the form of a Common
                                  Expression Language (CEL) expression.'
                                items:
                                  description: CELExpression represents a Common Expression
                                    Language (CEL) expression.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                maxItems: 256
                                minItems: 1
                                type: array
                            required:
                            - matchExpressions
                            type: object
                        required:
                        - policy
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [authorization authentication]
                        must be set
                      rule: '[has(self.authorization),has(self.authentication)].filter(x,x==true).size()
                        >= 1'
                  tcp:
                    description: tcp defines settings for managing TCP connections
                      to the backend.
                    properties:
                      connectTimeout:
                        description: connectTimeout defines the deadline for establishing
                          a connection to the destination.
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: connectTimeout must be at least 100ms
                          rule: duration(self) >= duration('100ms')
                      keepalive:
                        description: keepAlive defines settings for enabling TCP keepalives
                          on the connection.
                        properties:
                          interval:
                            description: 'interval specifies the number of seconds
                              between keep-alive probes.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: interval must be at least 1 second
                              rule: duration(self) >= duration('1s')
                          retries:
                            description: 'retries specifies the maximum number of
                              keep-alive probes to send before dropping the connection.

                              If unset, this defaults to 9.'
                            format: int32
                            maximum: 64
                            minimum: 1
                            type: integer
                          time:
                            description: 'time specifies the number of seconds a connection
                              needs to be idle before keep-alive probes start being
                              sent.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: time must be at least 1 second
                              rule: duration(self) >= duration('1s')
                        type: object
                    type: object
                  tls:
                    description: 'tls defines settings for managing TLS connections
                      to the backend.


                      If this field is set, TLS will be initiated to the backend;
                      the system trusted CA certificates will be used to

                      validate the server, and the SNI will automatically be set based
                      on the destination.'
                    properties:
                      alpnProtocols:
                        description: 'alpnProtocols sets the Application Level Protocol
                          Negotiation (ALPN) value to use in the TLS handshake.


                          If not present, defaults to ["h2", "http/1.1"].'
                        items:
                          maxLength: 64
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                      caCertificateRefs:
                        description: 'caCertificateRefs defines the CA certificate
                          ConfigMap to use to verify the server certificate.

                          If unset, the system''s trusted certificates are used.'
                        items:
                          description: 'LocalObjectReference contains enough information
                            to let you locate the

                            referenced object inside the same namespace.'
                          properties:
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      insecureSkipVerify:
                        description: "insecureSkipVerify originates TLS but skips\
                          \ verification of the backend's certificate.\nWARNING: This\
                          \ is an insecure option that should only be used if the\
                          \ risks are understood.\n\nThere are two modes:\n* All disables\
                          \ all TLS verification\n* Hostname verifies the CA certificate\
                          \ is trusted, but ignores any mismatch of hostname/SANs.\
                          \ Note that this method\n is still insecure; prefer setting\
                          \ verifySubjectAltNames to customize the valid hostnames\
                          \ if possible."
                        enum:
                        - All
                        - Hostname
                        type: string
                      mtlsCertificateRef:
                        description: 'mtlsCertificateRef enables mutual TLS to the
                          backend, using the specified key (tls.key) and cert (tls.crt)
                          from the

                          refenced Secret.


                          An optional ''ca.cert'' field, if present, will be used
                          to verify the server certificate if present. If

                          caCertificateRefs is also specified, the caCertificateRefs
                          field takes priority.


                          If unspecified, no client certificate will be used.'
                        items:
                          description: 'LocalObjectReference contains enough information
                            to let you locate the

                            referenced object inside the same namespace.'
                          properties:
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      sni:
                        description: 'sni specifies the Server Name Indicator (SNI)
                          to be used in the TLS handshake. If unset, the SNI is automatically

                          set based on the destination hostname.'
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      verifySubjectAltNames:
                        description: 'verifySubjectAltNames specifies the Subject
                          Alternative Names (SAN) to verify in the server certificate.

                          If not present, the destination hostname is automatically
                          used.'
                        items:
                          maxLength: 256
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: insecureSkipVerify All and caCertificateRefs may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) && self.insecureSkipVerify
                        == ''All'' ? !has(self.caCertificateRefs) : true'
                    - message: insecureSkipVerify and verifySubjectAltNames may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) ? !has(self.verifySubjectAltNames)
                        : true'
                    - message: at most one of the fields in [verifySubjectAltNames
                        insecureSkipVerify] may be set
                      rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                        <= 1'
                type: object
                x-kubernetes-validations:
                - message: at least one of the fields in [tcp tls http auth mcp ai]
                    must be set
                  rule: '[has(self.tcp),has(self.tls),has(self.http),has(self.auth),has(self.mcp),has(self.ai)].filter(x,x==true).size()
                    >= 1'
              static:
                description: static represents a static hostname.
                properties:
                  host:
                    description: host to connect to.
                    maxLength: 256
                    minLength: 1
                    type: string
                  port:
                    description: port to connect to.
                    format: int32
                    maximum: 65535
                    minimum: 1
                    type: integer
                required:
                - host
                - port
                type: object
            type: object
            x-kubernetes-validations:
            - message: AI policies require AI backend
              rule: 'has(self.policies) && has(self.policies.ai) ? has(self.ai) :
                true'
            - message: MCP policies require MCP backend
              rule: 'has(self.policies) && has(self.policies.mcp) ? has(self.mcp)
                : true'
            - message: exactly one of the fields in [ai static dynamicForwardProxy
                mcp] must be set
              rule: '[has(self.ai),has(self.static),has(self.dynamicForwardProxy),has(self.mcp)].filter(x,x==true).size()
                == 1'
          status:
            description: status defines the current state of AgentgatewayBackend.
            properties:
              conditions:
                description: Conditions is the list of conditions for the backend.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.1-0.20251023132335-bf7d6b742e6a
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
    gateway.networking.k8s.io/policy: Direct
  name: agentgatewayparameters.agentgateway.dev
spec:
  conversion:
    strategy: None
  group: agentgateway.dev
  names:
    categories:
    - kgateway
    kind: AgentgatewayParameters
    listKind: AgentgatewayParametersList
    plural: agentgatewayparameters
    shortNames:
    - agpar
    singular: agentgatewayparameters
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: 'AgentgatewayParameters are configuration that is used to dynamically

          provision the agentgateway data plane. Labels and annotations that apply
          to

          all resources may be specified at a higher level; see

          https://gateway-api.sigs.k8s.io/reference/spec/#gatewayinfrastructure'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: spec defines the desired state of AgentgatewayParameters.
            properties:
              deployment:
                description: deployment allows specifying overrides for the generated
                  Deployment resource.
                properties:
                  metadata:
                    description: metadata defines a subset of object metadata to be
                      customized.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be

                          set by external tools to store and retrieve arbitrary metadata.
                          They are not

                          queryable and should be preserved when modifying objects.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize

                          (scope and select) objects. May match selectors of replication
                          controllers

                          and services.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels'
                        type: object
                    type: object
                  spec:
                    description: "Spec provides an opaque mechanism to configure the\
                      \ resource Spec.\nThis field accepts a complete or partial Kubernetes\
                      \ resource spec (e.g., PodSpec, ServiceSpec)\nand will be merged\
                      \ with the generated configuration using **Strategic Merge Patch**\
                      \ semantics.\nThe patch is applied after all other fields are\
                      \ applied.\nIf you merge-patch the same resource from AgentgatewayParameters\
                      \ on the\nGatewayClass and also from AgentgatewayParameters\
                      \ on the Gateway, then\nthe GatewayClass merge-patch happens\
                      \ first.\n\n# Strategic Merge Patch & Deletion Guide\n\nThis\
                      \ merge strategy allows you to override individual fields, merge\
                      \ lists, or delete items\nwithout needing to provide the entire\
                      \ resource definition.\n\n**1. Replacing Values (Scalars):**\n\
                      Simple fields (strings, integers, booleans) in your config will\
                      \ overwrite the generated defaults.\n\n**2. Merging Lists (Append/Merge):**\n\
                      Lists with \"merge keys\" (like `containers` which merges on\
                      \ `name`, or `tolerations` which merges on `key`)\nwill append\
                      \ your items to the generated list, or update existing items\
                      \ if keys match.\n\n**3. Deleting List Items ($patch: delete):**\n\
                      To remove an item from a generated list (e.g., removing a default\
                      \ sidecar), you must use\nthe special `$patch: delete` directive.\n\
                      \n\tspec:\n\t  containers:\n\t    - name: agentgateway\n\t \
                      \     # Delete the securityContext using $patch: delete\n\t\
                      \      securityContext:\n\t        $patch: delete\n\n**4. Deleting/Clearing\
                      \ Map Fields (null):**\nTo remove a map field or a scalar entirely,\
                      \ set its value to `null`.\n\n\tspec:\n\t  template:\n\t   \
                      \ spec:\n\t      nodeSelector: null  # Removes default nodeSelector\n\
                      \n**5. Replacing Lists Entirely ($patch: replace):**\nIf you\
                      \ want to strictly define a list and ignore all generated defaults,\
                      \ use `$patch: replace`.\n\n\tservice:\n\t  spec:\n\t    ports:\n\
                      \t      - $patch: replace\n\t      - name: http\n\t        port:\
                      \ 80\n\t        targetPort: 8080\n\t        protocol: TCP\n\t\
                      \      - name: https\n\t        port: 443\n\t        targetPort:\
                      \ 8443\n\t        protocol: TCP"
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              env:
                description: 'The container environment variables. These override
                  any existing

                  values. If you want to delete an environment variable entirely,
                  use

                  `$patch: delete` with AgentgatewayParametersOverlays instead. Note
                  that

                  [variable

                  expansion](https://kubernetes.io/docs/tasks/inject-data-application/define-interdependent-environment-variables/)

                  does apply, but is highly discouraged -- to set dependent environment

                  variables, you can use $(VAR_NAME), but it''s highly

                  discouraged. `$$(VAR_NAME)` avoids expansion and results in a literal

                  `$(VAR_NAME)`.'
                items:
                  description: EnvVar represents an environment variable present in
                    a Container.
                  properties:
                    name:
                      description: 'Name of the environment variable.

                        May consist of any printable ASCII characters except ''=''.'
                      type: string
                    value:
                      description: 'Variable references $(VAR_NAME) are expanded

                        using the previously defined environment variables in the
                        container and

                        any service environment variables. If a variable cannot be
                        resolved,

                        the reference in the input string will be unchanged. Double
                        $$ are reduced

                        to a single $, which allows for escaping the $(VAR_NAME) syntax:
                        i.e.

                        "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".

                        Escaped references will never be expanded, regardless of whether
                        the variable

                        exists or not.

                        Defaults to "".'
                      type: string
                    valueFrom:
                      description: Source for the environment variable's value. Cannot
                        be used if value is not empty.
                      properties:
                        configMapKeyRef:
                          description: Selects a key of a ConfigMap.
                          properties:
                            key:
                              description: The key to select.
                              type: string
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                            optional:
                              description: Specify whether the ConfigMap or its key
                                must be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                        fieldRef:
                          description: 'Selects a field of the pod: supports metadata.name,
                            metadata.namespace, `metadata.labels[''<KEY>'']`, `metadata.annotations[''<KEY>'']`,

                            spec.nodeName, spec.serviceAccountName, status.hostIP,
                            status.podIP, status.podIPs.'
                          properties:
                            apiVersion:
                              description: Version of the schema the FieldPath is
                                written in terms of, defaults to "v1".
                              type: string
                            fieldPath:
                              description: Path of the field to select in the specified
                                API version.
                              type: string
                          required:
                          - fieldPath
                          type: object
                          x-kubernetes-map-type: atomic
                        fileKeyRef:
                          description: 'FileKeyRef selects a key of the env file.

                            Requires the EnvFiles feature gate to be enabled.'
                          properties:
                            key:
                              description: 'The key within the env file. An invalid
                                key will prevent the pod from starting.

                                The keys defined within a source may consist of any
                                printable ASCII characters except ''=''.

                                During Alpha stage of the EnvFiles feature gate, the
                                key size is limited to 128 characters.'
                              type: string
                            optional:
                              default: false
                              description: 'Specify whether the file or its key must
                                be defined. If the file or key

                                does not exist, then the env var is not published.

                                If optional is set to true and the specified key does
                                not exist,

                                the environment variable will not be set in the Pod''s
                                containers.


                                If optional is set to false and the specified key
                                does not exist,

                                an error will be returned during Pod creation.'
                              type: boolean
                            path:
                              description: 'The path within the volume from which
                                to select the file.

                                Must be relative and may not contain the ''..'' path
                                or start with ''..''.'
                              type: string
                            volumeName:
                              description: The name of the volume mount containing
                                the env file.
                              type: string
                          required:
                          - key
                          - path
                          - volumeName
                          type: object
                          x-kubernetes-map-type: atomic
                        resourceFieldRef:
                          description: 'Selects a resource of the container: only
                            resources limits and requests

                            (limits.cpu, limits.memory, limits.ephemeral-storage,
                            requests.cpu, requests.memory and requests.ephemeral-storage)
                            are currently supported.'
                          properties:
                            containerName:
                              description: 'Container name: required for volumes,
                                optional for env vars'
                              type: string
                            divisor:
                              anyOf:
                              - type: integer
                              - type: string
                              description: Specifies the output format of the exposed
                                resources, defaults to "1"
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            resource:
                              description: 'Required: resource to select'
                              type: string
                          required:
                          - resource
                          type: object
                          x-kubernetes-map-type: atomic
                        secretKeyRef:
                          description: Selects a key of a secret in the pod's namespace
                          properties:
                            key:
                              description: The key of the secret to select from.  Must
                                be a valid secret key.
                              type: string
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                            optional:
                              description: Specify whether the Secret or its key must
                                be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                      type: object
                  required:
                  - name
                  type: object
                type: array
              horizontalPodAutoscaler:
                description: 'horizontalPodAutoscaler allows creating a HorizontalPodAutoscaler
                  for the agentgateway proxy.

                  If absent, no HPA is created. If present, an HPA is created with
                  its scaleTargetRef

                  automatically configured to target the agentgateway proxy Deployment.

                  The metadata and spec fields from this overlay are applied to the
                  generated HPA.'
                properties:
                  metadata:
                    description: metadata defines a subset of object metadata to be
                      customized.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be

                          set by external tools to store and retrieve arbitrary metadata.
                          They are not

                          queryable and should be preserved when modifying objects.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize

                          (scope and select) objects. May match selectors of replication
                          controllers

                          and services.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels'
                        type: object
                    type: object
                  spec:
                    description: "Spec provides an opaque mechanism to configure the\
                      \ resource Spec.\nThis field accepts a complete or partial Kubernetes\
                      \ resource spec (e.g., PodSpec, ServiceSpec)\nand will be merged\
                      \ with the generated configuration using **Strategic Merge Patch**\
                      \ semantics.\nThe patch is applied after all other fields are\
                      \ applied.\nIf you merge-patch the same resource from AgentgatewayParameters\
                      \ on the\nGatewayClass and also from AgentgatewayParameters\
                      \ on the Gateway, then\nthe GatewayClass merge-patch happens\
                      \ first.\n\n# Strategic Merge Patch & Deletion Guide\n\nThis\
                      \ merge strategy allows you to override individual fields, merge\
                      \ lists, or delete items\nwithout needing to provide the entire\
                      \ resource definition.\n\n**1. Replacing Values (Scalars):**\n\
                      Simple fields (strings, integers, booleans) in your config will\
                      \ overwrite the generated defaults.\n\n**2. Merging Lists (Append/Merge):**\n\
                      Lists with \"merge keys\" (like `containers` which merges on\
                      \ `name`, or `tolerations` which merges on `key`)\nwill append\
                      \ your items to the generated list, or update existing items\
                      \ if keys match.\n\n**3. Deleting List Items ($patch: delete):**\n\
                      To remove an item from a generated list (e.g., removing a default\
                      \ sidecar), you must use\nthe special `$patch: delete` directive.\n\
                      \n\tspec:\n\t  containers:\n\t    - name: agentgateway\n\t \
                      \     # Delete the securityContext using $patch: delete\n\t\
                      \      securityContext:\n\t        $patch: delete\n\n**4. Deleting/Clearing\
                      \ Map Fields (null):**\nTo remove a map field or a scalar entirely,\
                      \ set its value to `null`.\n\n\tspec:\n\t  template:\n\t   \
                      \ spec:\n\t      nodeSelector: null  # Removes default nodeSelector\n\
                      \n**5. Replacing Lists Entirely ($patch: replace):**\nIf you\
                      \ want to strictly define a list and ignore all generated defaults,\
                      \ use `$patch: replace`.\n\n\tservice:\n\t  spec:\n\t    ports:\n\
                      \t      - $patch: replace\n\t      - name: http\n\t        port:\
                      \ 80\n\t        targetPort: 8080\n\t        protocol: TCP\n\t\
                      \      - name: https\n\t        port: 443\n\t        targetPort:\
                      \ 8443\n\t        protocol: TCP"
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              image:
                description: "The agentgateway container image. See\nhttps://kubernetes.io/docs/concepts/containers/images\n\
                  for details.\n\nDefault values, which may be overridden individually:\n\
                  \n\tregistry: cr.agentgateway.dev\n\trepository: agentgateway\n\t\
                  tag: <agentgateway version>\n\tpullPolicy: <omitted, relying on\
                  \ Kubernetes defaults which depend on the tag>"
                properties:
                  digest:
                    description: The hash digest of the image, e.g. `sha256:12345...`
                    type: string
                  pullPolicy:
                    description: 'The image pull policy for the container. See

                      https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy

                      for details.'
                    type: string
                  registry:
                    description: The image registry.
                    type: string
                  repository:
                    description: The image repository (name).
                    type: string
                  tag:
                    description: The image tag.
                    type: string
                type: object
              istio:
                description: Configure Istio integration. If enabled, Agentgateway
                  can natively connect to Istio enabled pods with mTLS.
                properties:
                  caAddress:
                    description: The address of the Istio CA. If unset, defaults to
                      `https://istiod.istio-system.svc:15012`.
                    type: string
                  trustDomain:
                    description: The Istio trust domain. If not set, defaults to `cluster.local`.
                    type: string
                type: object
              logging:
                description: logging configuration for Agentgateway. By default, all
                  logs are set to "info" level.
                properties:
                  format:
                    description: The default logging format is text.
                    enum:
                    - json
                    - text
                    type: string
                  level:
                    description: 'Logging level in standard RUST_LOG syntax, e.g.
                      ''info'', the default, or

                      by module, comma-separated. E.g.,

                      "rmcp=warn,hickory_server::server::server_future=off,typespec_client_core::http::policies::logging=warn"'
                    type: string
                type: object
              podDisruptionBudget:
                description: 'podDisruptionBudget allows creating a PodDisruptionBudget
                  for the agentgateway proxy.

                  If absent, no PDB is created. If present, a PDB is created with
                  its selector

                  automatically configured to target the agentgateway proxy Deployment.

                  The metadata and spec fields from this overlay are applied to the
                  generated PDB.'
                properties:
                  metadata:
                    description: metadata defines a subset of object metadata to be
                      customized.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be

                          set by external tools to store and retrieve arbitrary metadata.
                          They are not

                          queryable and should be preserved when modifying objects.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize

                          (scope and select) objects. May match selectors of replication
                          controllers

                          and services.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels'
                        type: object
                    type: object
                  spec:
                    description: "Spec provides an opaque mechanism to configure the\
                      \ resource Spec.\nThis field accepts a complete or partial Kubernetes\
                      \ resource spec (e.g., PodSpec, ServiceSpec)\nand will be merged\
                      \ with the generated configuration using **Strategic Merge Patch**\
                      \ semantics.\nThe patch is applied after all other fields are\
                      \ applied.\nIf you merge-patch the same resource from AgentgatewayParameters\
                      \ on the\nGatewayClass and also from AgentgatewayParameters\
                      \ on the Gateway, then\nthe GatewayClass merge-patch happens\
                      \ first.\n\n# Strategic Merge Patch & Deletion Guide\n\nThis\
                      \ merge strategy allows you to override individual fields, merge\
                      \ lists, or delete items\nwithout needing to provide the entire\
                      \ resource definition.\n\n**1. Replacing Values (Scalars):**\n\
                      Simple fields (strings, integers, booleans) in your config will\
                      \ overwrite the generated defaults.\n\n**2. Merging Lists (Append/Merge):**\n\
                      Lists with \"merge keys\" (like `containers` which merges on\
                      \ `name`, or `tolerations` which merges on `key`)\nwill append\
                      \ your items to the generated list, or update existing items\
                      \ if keys match.\n\n**3. Deleting List Items ($patch: delete):**\n\
                      To remove an item from a generated list (e.g., removing a default\
                      \ sidecar), you must use\nthe special `$patch: delete` directive.\n\
                      \n\tspec:\n\t  containers:\n\t    - name: agentgateway\n\t \
                      \     # Delete the securityContext using $patch: delete\n\t\
                      \      securityContext:\n\t        $patch: delete\n\n**4. Deleting/Clearing\
                      \ Map Fields (null):**\nTo remove a map field or a scalar entirely,\
                      \ set its value to `null`.\n\n\tspec:\n\t  template:\n\t   \
                      \ spec:\n\t      nodeSelector: null  # Removes default nodeSelector\n\
                      \n**5. Replacing Lists Entirely ($patch: replace):**\nIf you\
                      \ want to strictly define a list and ignore all generated defaults,\
                      \ use `$patch: replace`.\n\n\tservice:\n\t  spec:\n\t    ports:\n\
                      \t      - $patch: replace\n\t      - name: http\n\t        port:\
                      \ 80\n\t        targetPort: 8080\n\t        protocol: TCP\n\t\
                      \      - name: https\n\t        port: 443\n\t        targetPort:\
                      \ 8443\n\t        protocol: TCP"
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              rawConfig:
                description: "rawConfig provides an opaque mechanism to configure\
                  \ the agentgateway\nconfig file (the agentgateway binary has a '-f'\
                  \ option to specify a\nconfig file, and this is that file).  This\
                  \ will be merged with\nconfiguration derived from typed fields like\n\
                  AgentgatewayParametersLogging.Format, and those typed fields will\
                  \ take\nprecedence.\n\nExample:\n\n\trawConfig:\n\t  binds:\n\t\
                  \  - port: 3000\n\t    listeners:\n\t    - routes:\n\t      - policies:\n\
                  \t          cors:\n\t            allowOrigins:\n\t             \
                  \ - \"*\"\n\t            allowHeaders:\n\t              - mcp-protocol-version\n\
                  \t              - content-type\n\t              - cache-control\n\
                  \t        backends:\n\t        - mcp:\n\t            targets:\n\t\
                  \            - name: everything\n\t              stdio:\n\t    \
                  \            cmd: npx\n\t                args: [\"@modelcontextprotocol/server-everything\"\
                  ]"
                type: object
                x-kubernetes-preserve-unknown-fields: true
              resources:
                description: 'The compute resources required by this container. See

                  https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

                  for details.'
                properties:
                  claims:
                    description: 'Claims lists the names of resources, defined in
                      spec.resourceClaims,

                      that are used by this container.


                      This field depends on the

                      DynamicResourceAllocation feature gate.


                      This field is immutable. It can only be set for containers.'
                    items:
                      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                      properties:
                        name:
                          description: 'Name must match the name of one entry in pod.spec.resourceClaims
                            of

                            the Pod where this field is used. It makes that resource
                            available

                            inside a container.'
                          type: string
                        request:
                          description: 'Request is the name chosen for a request in
                            the referenced claim.

                            If empty, everything from the claim is made available,
                            otherwise

                            only the result of this request.'
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Limits describes the maximum amount of compute resources
                      allowed.

                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Requests describes the minimum amount of compute
                      resources required.

                      If Requests is omitted for a container, it defaults to Limits
                      if that is explicitly specified,

                      otherwise to an implementation-defined value. Requests cannot
                      exceed Limits.

                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                type: object
              service:
                description: service allows specifying overrides for the generated
                  Service resource.
                properties:
                  metadata:
                    description: metadata defines a subset of object metadata to be
                      customized.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be

                          set by external tools to store and retrieve arbitrary metadata.
                          They are not

                          queryable and should be preserved when modifying objects.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize

                          (scope and select) objects. May match selectors of replication
                          controllers

                          and services.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels'
                        type: object
                    type: object
                  spec:
                    description: "Spec provides an opaque mechanism to configure the\
                      \ resource Spec.\nThis field accepts a complete or partial Kubernetes\
                      \ resource spec (e.g., PodSpec, ServiceSpec)\nand will be merged\
                      \ with the generated configuration using **Strategic Merge Patch**\
                      \ semantics.\nThe patch is applied after all other fields are\
                      \ applied.\nIf you merge-patch the same resource from AgentgatewayParameters\
                      \ on the\nGatewayClass and also from AgentgatewayParameters\
                      \ on the Gateway, then\nthe GatewayClass merge-patch happens\
                      \ first.\n\n# Strategic Merge Patch & Deletion Guide\n\nThis\
                      \ merge strategy allows you to override individual fields, merge\
                      \ lists, or delete items\nwithout needing to provide the entire\
                      \ resource definition.\n\n**1. Replacing Values (Scalars):**\n\
                      Simple fields (strings, integers, booleans) in your config will\
                      \ overwrite the generated defaults.\n\n**2. Merging Lists (Append/Merge):**\n\
                      Lists with \"merge keys\" (like `containers` which merges on\
                      \ `name`, or `tolerations` which merges on `key`)\nwill append\
                      \ your items to the generated list, or update existing items\
                      \ if keys match.\n\n**3. Deleting List Items ($patch: delete):**\n\
                      To remove an item from a generated list (e.g., removing a default\
                      \ sidecar), you must use\nthe special `$patch: delete` directive.\n\
                      \n\tspec:\n\t  containers:\n\t    - name: agentgateway\n\t \
                      \     # Delete the securityContext using $patch: delete\n\t\
                      \      securityContext:\n\t        $patch: delete\n\n**4. Deleting/Clearing\
                      \ Map Fields (null):**\nTo remove a map field or a scalar entirely,\
                      \ set its value to `null`.\n\n\tspec:\n\t  template:\n\t   \
                      \ spec:\n\t      nodeSelector: null  # Removes default nodeSelector\n\
                      \n**5. Replacing Lists Entirely ($patch: replace):**\nIf you\
                      \ want to strictly define a list and ignore all generated defaults,\
                      \ use `$patch: replace`.\n\n\tservice:\n\t  spec:\n\t    ports:\n\
                      \t      - $patch: replace\n\t      - name: http\n\t        port:\
                      \ 80\n\t        targetPort: 8080\n\t        protocol: TCP\n\t\
                      \      - name: https\n\t        port: 443\n\t        targetPort:\
                      \ 8443\n\t        protocol: TCP"
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              serviceAccount:
                description: serviceAccount allows specifying overrides for the generated
                  ServiceAccount resource.
                properties:
                  metadata:
                    description: metadata defines a subset of object metadata to be
                      customized.
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: 'Annotations is an unstructured key value map
                          stored with a resource that may be

                          set by external tools to store and retrieve arbitrary metadata.
                          They are not

                          queryable and should be preserved when modifying objects.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations'
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: 'Map of string keys and values that can be used
                          to organize and categorize

                          (scope and select) objects. May match selectors of replication
                          controllers

                          and services.

                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels'
                        type: object
                    type: object
                  spec:
                    description: "Spec provides an opaque mechanism to configure the\
                      \ resource Spec.\nThis field accepts a complete or partial Kubernetes\
                      \ resource spec (e.g., PodSpec, ServiceSpec)\nand will be merged\
                      \ with the generated configuration using **Strategic Merge Patch**\
                      \ semantics.\nThe patch is applied after all other fields are\
                      \ applied.\nIf you merge-patch the same resource from AgentgatewayParameters\
                      \ on the\nGatewayClass and also from AgentgatewayParameters\
                      \ on the Gateway, then\nthe GatewayClass merge-patch happens\
                      \ first.\n\n# Strategic Merge Patch & Deletion Guide\n\nThis\
                      \ merge strategy allows you to override individual fields, merge\
                      \ lists, or delete items\nwithout needing to provide the entire\
                      \ resource definition.\n\n**1. Replacing Values (Scalars):**\n\
                      Simple fields (strings, integers, booleans) in your config will\
                      \ overwrite the generated defaults.\n\n**2. Merging Lists (Append/Merge):**\n\
                      Lists with \"merge keys\" (like `containers` which merges on\
                      \ `name`, or `tolerations` which merges on `key`)\nwill append\
                      \ your items to the generated list, or update existing items\
                      \ if keys match.\n\n**3. Deleting List Items ($patch: delete):**\n\
                      To remove an item from a generated list (e.g., removing a default\
                      \ sidecar), you must use\nthe special `$patch: delete` directive.\n\
                      \n\tspec:\n\t  containers:\n\t    - name: agentgateway\n\t \
                      \     # Delete the securityContext using $patch: delete\n\t\
                      \      securityContext:\n\t        $patch: delete\n\n**4. Deleting/Clearing\
                      \ Map Fields (null):**\nTo remove a map field or a scalar entirely,\
                      \ set its value to `null`.\n\n\tspec:\n\t  template:\n\t   \
                      \ spec:\n\t      nodeSelector: null  # Removes default nodeSelector\n\
                      \n**5. Replacing Lists Entirely ($patch: replace):**\nIf you\
                      \ want to strictly define a list and ignore all generated defaults,\
                      \ use `$patch: replace`.\n\n\tservice:\n\t  spec:\n\t    ports:\n\
                      \t      - $patch: replace\n\t      - name: http\n\t        port:\
                      \ 80\n\t        targetPort: 8080\n\t        protocol: TCP\n\t\
                      \      - name: https\n\t        port: 443\n\t        targetPort:\
                      \ 8443\n\t        protocol: TCP"
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              shutdown:
                description: 'Shutdown delay configuration.  How graceful planned
                  or unplanned data

                  plane changes happen is in tension with how quickly rollouts of
                  the data

                  plane complete. How long a data plane pod must wait for shutdown
                  to be

                  perfectly graceful depends on how you have configured your Gateways.'
                properties:
                  max:
                    description: 'Maximum time (in seconds) to wait before allowing
                      Agentgateway to

                      terminate. Refer to the TERMINATION_GRACE_PERIOD_SECONDS environment

                      variable for details.'
                    format: int64
                    maximum: 31536000
                    minimum: 0
                    type: integer
                  min:
                    description: 'Minimum time (in seconds) to wait before allowing
                      Agentgateway to

                      terminate. Refer to the CONNECTION_MIN_TERMINATION_DEADLINE
                      environment

                      variable for details.'
                    format: int64
                    maximum: 31536000
                    minimum: 0
                    type: integer
                required:
                - max
                - min
                type: object
                x-kubernetes-validations:
                - message: The 'min' value must be less than or equal to the 'max'
                    value.
                  rule: self.min <= self.max
            type: object
          status:
            description: status defines the current state of AgentgatewayParameters.
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.1-0.20251023132335-bf7d6b742e6a
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
    gateway.networking.k8s.io/policy: Direct
  name: agentgatewaypolicies.agentgateway.dev
spec:
  conversion:
    strategy: None
  group: agentgateway.dev
  names:
    categories:
    - kgateway
    kind: AgentgatewayPolicy
    listKind: AgentgatewayPolicyList
    plural: agentgatewaypolicies
    shortNames:
    - agpol
    singular: agentgatewaypolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Agentgateway policy acceptance status
      jsonPath: .status.ancestors[*].conditions[?(@.type=='Accepted')].status
      name: Accepted
      type: string
    - description: Agentgateway policy attachment status
      jsonPath: .status.ancestors[*].conditions[?(@.type=='Attached')].status
      name: Attached
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: spec defines the desired state of AgentgatewayPolicy.
            properties:
              backend:
                description: 'backend defines settings for how to connect to destination
                  backends.


                  A backend policy can target a Gateway (optionally, with a sectionName
                  indicating the listener), ListenerSet, Route

                  (optionally, with a sectionName indicating the route rule), or a
                  Service/Backend (optionally, with a sectionName

                  indicating the port (for Service) or sub-backend (for Backend).


                  Note that a backend policy applies when connecting to a specific
                  destination backend. Targeting a higher level

                  resource, like Gateway, is just a way to easily apply a policy to
                  a group of backends.


                  When multiple policies are selected for a given request, they are
                  merged on a field-level basis, but not a deep

                  merge. Precedence is given to more precise policies: Gateway < Listener
                  < Route < Route Rule < Backend/Service. For

                  example, if a Gateway policy sets ''tcp'' and ''tls'', and a Backend
                  policy sets ''tls'', the effective policy would be

                  ''tcp'' from the Gateway, and ''tls'' from the Backend.'
                properties:
                  ai:
                    description: ai specifies settings for AI workloads. This is only
                      applicable when connecting to a Backend of type 'ai'.
                    properties:
                      defaults:
                        description: Provide defaults to merge with user input fields.
                          If the field is already set, the field in the request is
                          used.
                        items:
                          description: "FieldDefault provides default values for specific\
                            \ fields in the JSON request body sent to the LLM provider.\n\
                            These defaults are merged with the user-provided request\
                            \ to ensure missing fields are populated.\n\nUser input\
                            \ fields here refer to the fields in the JSON request\
                            \ body that a client sends when making a request to the\
                            \ LLM provider.\nDefaults set here do _not_ override those\
                            \ user-provided values unless you explicitly set `override`\
                            \ to `true`.\n\nExample: Setting a default system field\
                            \ for Anthropic, which does not support system role messages:\n\
                            ```yaml\ndefaults:\n  - field: \"system\"\n    value:\
                            \ \"answer all questions in French\"\n\n```\n\nExample:\
                            \ Setting a default temperature and overriding `max_tokens`:\n\
                            ```yaml\ndefaults:\n  - field: \"temperature\"\n    value:\
                            \ \"0.5\"\n  - field: \"max_tokens\"\n    value: \"100\"\
                            \n    override: true\n\n```\n\nExample: Setting custom\
                            \ lists fields:\n```yaml\ndefaults:\n  - field: \"custom_integer_list\"\
                            \n    value: [1,2,3]\n\noverrides:\n  - field: \"custom_string_list\"\
                            \n    value: [\"one\",\"two\",\"three\"]\n\n```\n\nNote:\
                            \ The `field` values correspond to keys in the JSON request\
                            \ body, not fields in this CRD."
                          properties:
                            field:
                              description: The name of the field.
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              description: The field default value, which can be any
                                JSON Data Type.
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      modelAliases:
                        additionalProperties:
                          type: string
                        description: 'ModelAliases maps friendly model names to actual
                          provider model names.

                          Example: {"fast": "gpt-3.5-turbo", "smart": "gpt-4-turbo"}

                          Note: This field is only applicable when using the agentgateway
                          data plane.'
                        maxProperties: 64
                        type: object
                      overrides:
                        description: Provide overrides to merge with user input fields.
                          If the field is already set, the field will be overwritten.
                        items:
                          description: "FieldDefault provides default values for specific\
                            \ fields in the JSON request body sent to the LLM provider.\n\
                            These defaults are merged with the user-provided request\
                            \ to ensure missing fields are populated.\n\nUser input\
                            \ fields here refer to the fields in the JSON request\
                            \ body that a client sends when making a request to the\
                            \ LLM provider.\nDefaults set here do _not_ override those\
                            \ user-provided values unless you explicitly set `override`\
                            \ to `true`.\n\nExample: Setting a default system field\
                            \ for Anthropic, which does not support system role messages:\n\
                            ```yaml\ndefaults:\n  - field: \"system\"\n    value:\
                            \ \"answer all questions in French\"\n\n```\n\nExample:\
                            \ Setting a default temperature and overriding `max_tokens`:\n\
                            ```yaml\ndefaults:\n  - field: \"temperature\"\n    value:\
                            \ \"0.5\"\n  - field: \"max_tokens\"\n    value: \"100\"\
                            \n    override: true\n\n```\n\nExample: Setting custom\
                            \ lists fields:\n```yaml\ndefaults:\n  - field: \"custom_integer_list\"\
                            \n    value: [1,2,3]\n\noverrides:\n  - field: \"custom_string_list\"\
                            \n    value: [\"one\",\"two\",\"three\"]\n\n```\n\nNote:\
                            \ The `field` values correspond to keys in the JSON request\
                            \ body, not fields in this CRD."
                          properties:
                            field:
                              description: The name of the field.
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              description: The field default value, which can be any
                                JSON Data Type.
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      prompt:
                        description: 'Enrich requests sent to the LLM provider by
                          appending and prepending system prompts. This can be configured
                          only for

                          LLM providers that use the `CHAT` or `CHAT_STREAMING` API
                          route type.'
                        properties:
                          append:
                            description: A list of messages to be appended to the
                              prompt sent by the client.
                            items:
                              description: An entry for a message to prepend or append
                                to each prompt.
                              properties:
                                content:
                                  description: String content of the message.
                                  type: string
                                role:
                                  description: 'Role of the message. The available
                                    roles depend on the backend

                                    LLM provider model, such as `SYSTEM` or `USER`
                                    in the OpenAI API.'
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                          prepend:
                            description: A list of messages to be prepended to the
                              prompt sent by the client.
                            items:
                              description: An entry for a message to prepend or append
                                to each prompt.
                              properties:
                                content:
                                  description: String content of the message.
                                  type: string
                                role:
                                  description: 'Role of the message. The available
                                    roles depend on the backend

                                    LLM provider model, such as `SYSTEM` or `USER`
                                    in the OpenAI API.'
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                        type: object
                      promptCaching:
                        description: 'promptCaching enables automatic prompt caching
                          for supported providers (AWS Bedrock).

                          Reduces API costs by caching static content like system
                          prompts and tool definitions.

                          Only applicable for Bedrock Claude 3+ and Nova models.'
                        properties:
                          cacheMessages:
                            default: true
                            description: 'CacheMessages enables caching for conversation
                              messages.

                              Caches all messages in the conversation for cost savings.'
                            type: boolean
                          cacheSystem:
                            default: true
                            description: 'CacheSystem enables caching for system prompts.

                              Inserts a cache point after all system messages.'
                            type: boolean
                          cacheTools:
                            default: false
                            description: 'CacheTools enables caching for tool definitions.

                              Inserts a cache point after all tool specifications.'
                            type: boolean
                          minTokens:
                            default: 1024
                            description: "MinTokens specifies the minimum estimated\
                              \ token count\nbefore caching is enabled. Uses rough\
                              \ heuristic (word count \xD7 1.3) to estimate tokens.\n\
                              Bedrock requires at least 1,024 tokens for caching to\
                              \ be effective."
                            minimum: 0
                            type: integer
                        type: object
                      promptGuard:
                        description: promptGuard enables adding guardrails to LLM
                          requests and responses.
                        properties:
                          request:
                            description: Prompt guards to apply to requests sent by
                              the client.
                            items:
                              description: PromptguardRequest defines the prompt guards
                                to apply to requests sent by the client.
                              properties:
                                openAIModeration:
                                  description: 'openAIModeration passes prompt data
                                    through the OpenAI Moderations endpoint.

                                    See https://platform.openai.com/docs/api-reference/moderations
                                    for more information.'
                                  properties:
                                    model:
                                      description: model specifies the moderation
                                        model to use. For example, `omni-moderation`.
                                      type: string
                                    policies:
                                      description: policies controls policies for
                                        communicating with OpenAI.
                                      properties:
                                        auth:
                                          description: auth defines settings for managing
                                            authentication to the backend
                                          properties:
                                            aws:
                                              description: 'Auth specifies an explicit
                                                AWS authentication method for the
                                                backend.

                                                When omitted, we will try to use the
                                                default AWS SDK authentication methods.'
                                              properties:
                                                secretRef:
                                                  description: 'SecretRef references
                                                    a Kubernetes Secret containing
                                                    the AWS credentials.

                                                    The Secret must have keys "accessKey",
                                                    "secretKey", and optionally "sessionToken".'
                                                  properties:
                                                    name:
                                                      default: ''
                                                      description: 'Name of the referent.

                                                        This field is effectively
                                                        required, but due to backwards
                                                        compatibility is

                                                        allowed to be empty. Instances
                                                        of this type with an empty
                                                        value here are

                                                        almost certainly wrong.

                                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                      type: string
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                              required:
                                              - secretRef
                                              type: object
                                            key:
                                              description: 'key provides an inline
                                                key to use as the value of the Authorization
                                                header.

                                                This option is the least secure; usage
                                                of a Secret is preferred.'
                                              maxLength: 2048
                                              type: string
                                            passthrough:
                                              description: 'passthrough passes through
                                                an existing token that has been sent
                                                by the client and validated. Other
                                                policies, like

                                                JWT and API Key authentication, will
                                                strip the original client credentials.
                                                Passthrough backend authentication

                                                causes the original token to be added
                                                back into the request. If there are
                                                no client authentication policies
                                                on the

                                                request, the original token would
                                                be unchanged, so this would have no
                                                effect.'
                                              type: object
                                            secretRef:
                                              description: 'secretRef references a
                                                Kubernetes secret storing the key
                                                to use the authorization value. This
                                                must be stored in the

                                                ''Authorization'' key.'
                                              properties:
                                                name:
                                                  default: ''
                                                  description: 'Name of the referent.

                                                    This field is effectively required,
                                                    but due to backwards compatibility
                                                    is

                                                    allowed to be empty. Instances
                                                    of this type with an empty value
                                                    here are

                                                    almost certainly wrong.

                                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                  type: string
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                          x-kubernetes-validations:
                                          - message: exactly one of the fields in
                                              [key secretRef passthrough aws] must
                                              be set
                                            rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                              == 1'
                                        http:
                                          description: http defines settings for managing
                                            HTTP requests to the backend.
                                          properties:
                                            requestTimeout:
                                              description: requestTimeout specifies
                                                the deadline for receiving a response
                                                from the backend.
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: requestTimeout must be at
                                                  least 1ms
                                                rule: duration(self) >= duration('1ms')
                                            version:
                                              description: "version specifies the\
                                                \ HTTP protocol version to use when\
                                                \ connecting to the backend.\nIf not\
                                                \ specified, the version is automatically\
                                                \ determined:\n* Service types can\
                                                \ specify it with 'appProtocol' on\
                                                \ the Service port.\n* If traffic\
                                                \ is identified as gRPC, HTTP2 is\
                                                \ used.\n* If the incoming traffic\
                                                \ was plaintext HTTP, the original\
                                                \ protocol will be used.\n* If the\
                                                \ incoming traffic was HTTPS, HTTP1\
                                                \ will be used. This is because most\
                                                \ clients will\n  transparently upgrade\
                                                \ HTTPS traffic to HTTP2, even if\
                                                \ the backend doesn't support it"
                                              enum:
                                              - HTTP1
                                              - HTTP2
                                              type: string
                                          type: object
                                        tcp:
                                          description: tcp defines settings for managing
                                            TCP connections to the backend.
                                          properties:
                                            connectTimeout:
                                              description: connectTimeout defines
                                                the deadline for establishing a connection
                                                to the destination.
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: connectTimeout must be at
                                                  least 100ms
                                                rule: duration(self) >= duration('100ms')
                                            keepalive:
                                              description: keepAlive defines settings
                                                for enabling TCP keepalives on the
                                                connection.
                                              properties:
                                                interval:
                                                  description: 'interval specifies
                                                    the number of seconds between
                                                    keep-alive probes.

                                                    If unset, this defaults to 180s.'
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: interval must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                                retries:
                                                  description: 'retries specifies
                                                    the maximum number of keep-alive
                                                    probes to send before dropping
                                                    the connection.

                                                    If unset, this defaults to 9.'
                                                  format: int32
                                                  maximum: 64
                                                  minimum: 1
                                                  type: integer
                                                time:
                                                  description: 'time specifies the
                                                    number of seconds a connection
                                                    needs to be idle before keep-alive
                                                    probes start being sent.

                                                    If unset, this defaults to 180s.'
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: time must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                              type: object
                                          type: object
                                        tls:
                                          description: 'tls defines settings for managing
                                            TLS connections to the backend.


                                            If this field is set, TLS will be initiated
                                            to the backend; the system trusted CA
                                            certificates will be used to

                                            validate the server, and the SNI will
                                            automatically be set based on the destination.'
                                          properties:
                                            alpnProtocols:
                                              description: 'alpnProtocols sets the
                                                Application Level Protocol Negotiation
                                                (ALPN) value to use in the TLS handshake.


                                                If not present, defaults to ["h2",
                                                "http/1.1"].'
                                              items:
                                                maxLength: 64
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                            caCertificateRefs:
                                              description: 'caCertificateRefs defines
                                                the CA certificate ConfigMap to use
                                                to verify the server certificate.

                                                If unset, the system''s trusted certificates
                                                are used.'
                                              items:
                                                description: 'LocalObjectReference
                                                  contains enough information to let
                                                  you locate the

                                                  referenced object inside the same
                                                  namespace.'
                                                properties:
                                                  name:
                                                    default: ''
                                                    description: 'Name of the referent.

                                                      This field is effectively required,
                                                      but due to backwards compatibility
                                                      is

                                                      allowed to be empty. Instances
                                                      of this type with an empty value
                                                      here are

                                                      almost certainly wrong.

                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            insecureSkipVerify:
                                              description: "insecureSkipVerify originates\
                                                \ TLS but skips verification of the\
                                                \ backend's certificate.\nWARNING:\
                                                \ This is an insecure option that\
                                                \ should only be used if the risks\
                                                \ are understood.\n\nThere are two\
                                                \ modes:\n* All disables all TLS verification\n\
                                                * Hostname verifies the CA certificate\
                                                \ is trusted, but ignores any mismatch\
                                                \ of hostname/SANs. Note that this\
                                                \ method\n is still insecure; prefer\
                                                \ setting verifySubjectAltNames to\
                                                \ customize the valid hostnames if\
                                                \ possible."
                                              enum:
                                              - All
                                              - Hostname
                                              type: string
                                            mtlsCertificateRef:
                                              description: 'mtlsCertificateRef enables
                                                mutual TLS to the backend, using the
                                                specified key (tls.key) and cert (tls.crt)
                                                from the

                                                refenced Secret.


                                                An optional ''ca.cert'' field, if
                                                present, will be used to verify the
                                                server certificate if present. If

                                                caCertificateRefs is also specified,
                                                the caCertificateRefs field takes
                                                priority.


                                                If unspecified, no client certificate
                                                will be used.'
                                              items:
                                                description: 'LocalObjectReference
                                                  contains enough information to let
                                                  you locate the

                                                  referenced object inside the same
                                                  namespace.'
                                                properties:
                                                  name:
                                                    default: ''
                                                    description: 'Name of the referent.

                                                      This field is effectively required,
                                                      but due to backwards compatibility
                                                      is

                                                      allowed to be empty. Instances
                                                      of this type with an empty value
                                                      here are

                                                      almost certainly wrong.

                                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            sni:
                                              description: 'sni specifies the Server
                                                Name Indicator (SNI) to be used in
                                                the TLS handshake. If unset, the SNI
                                                is automatically

                                                set based on the destination hostname.'
                                              maxLength: 253
                                              minLength: 1
                                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                              type: string
                                            verifySubjectAltNames:
                                              description: 'verifySubjectAltNames
                                                specifies the Subject Alternative
                                                Names (SAN) to verify in the server
                                                certificate.

                                                If not present, the destination hostname
                                                is automatically used.'
                                              items:
                                                maxLength: 256
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                          type: object
                                          x-kubernetes-validations:
                                          - message: insecureSkipVerify All and caCertificateRefs
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) &&
                                              self.insecureSkipVerify == ''All'' ?
                                              !has(self.caCertificateRefs) : true'
                                          - message: insecureSkipVerify and verifySubjectAltNames
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) ?
                                              !has(self.verifySubjectAltNames) : true'
                                          - message: at most one of the fields in
                                              [verifySubjectAltNames insecureSkipVerify]
                                              may be set
                                            rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                              <= 1'
                                      type: object
                                  type: object
                                regex:
                                  description: Regular expression (regex) matching
                                    for prompt guards and data masking.
                                  properties:
                                    action:
                                      default: Mask
                                      description: 'The action to take if a regex
                                        pattern is matched in a request or response.

                                        This setting applies only to request matches.
                                        PromptguardResponse matches are always masked
                                        by default.

                                        Defaults to `Mask`.'
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      description: 'A list of built-in regex patterns
                                        to match against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        description: 'BuiltIn regex patterns for specific
                                          types of strings in prompts.

                                          For example, if you specify `CreditCard`,
                                          any credit card numbers

                                          in the request or response are matched.'
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      description: 'A list of regex patterns to match
                                        against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  description: 'A custom response message to return
                                    to the client. If not specified, defaults to

                                    "The request was rejected due to inappropriate
                                    content".'
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      description: 'A custom response message to return
                                        to the client. If not specified, defaults
                                        to

                                        "The request was rejected due to inappropriate
                                        content".'
                                      type: string
                                    statusCode:
                                      default: 403
                                      description: The status code to return to the
                                        client. Defaults to 403.
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  description: Configure a webhook to forward requests
                                    to for prompt guarding.
                                  properties:
                                    backendRef:
                                      description: 'backendRef references the webhook
                                        server to reach.


                                        Supported types: Service and Backend.'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      description: 'ForwardHeaderMatches defines a
                                        list of HTTP header matches that will be

                                        used to select the headers to forward to the
                                        webhook.

                                        Request headers are used when forwarding requests
                                        and response headers

                                        are used when forwarding responses.

                                        By default, no headers are forwarded.'
                                      items:
                                        description: 'HTTPHeaderMatch describes how
                                          to select a HTTP route by matching HTTP
                                          request

                                          headers.'
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, only the first

                                              entry with an equivalent name MUST be
                                              considered for a match. Subsequent

                                              entries with an equivalent header name
                                              MUST be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.


                                              When a header is repeated in an HTTP
                                              request, it is

                                              implementation-specific behavior as
                                              to how this is represented.

                                              Generally, proxies should follow the
                                              guidance from the RFC:

                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                              regarding

                                              processing a repeated header, with special
                                              handling for "Set-Cookie".'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            description: 'Type specifies how to match
                                              against the value of the header.


                                              Support: Core (Exact)


                                              Support: Implementation-specific (RegularExpression)


                                              Since RegularExpression HeaderMatchType
                                              has implementation-specific

                                              conformance, implementations can support
                                              POSIX, PCRE or any other dialects

                                              of regular expressions. Please read
                                              the implementation''s documentation
                                              to

                                              determine the supported dialect.'
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook
                                  openAIModeration] must be set
                                rule: '[has(self.regex),has(self.webhook),has(self.openAIModeration)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                          response:
                            description: Prompt guards to apply to responses returned
                              by the LLM provider.
                            items:
                              description: PromptguardResponse configures the response
                                that the prompt guard applies to responses returned
                                by the LLM provider.
                              properties:
                                regex:
                                  description: Regular expression (regex) matching
                                    for prompt guards and data masking.
                                  properties:
                                    action:
                                      default: Mask
                                      description: 'The action to take if a regex
                                        pattern is matched in a request or response.

                                        This setting applies only to request matches.
                                        PromptguardResponse matches are always masked
                                        by default.

                                        Defaults to `Mask`.'
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      description: 'A list of built-in regex patterns
                                        to match against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        description: 'BuiltIn regex patterns for specific
                                          types of strings in prompts.

                                          For example, if you specify `CreditCard`,
                                          any credit card numbers

                                          in the request or response are matched.'
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      description: 'A list of regex patterns to match
                                        against the request or response.

                                        Matches and built-ins are additive.'
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  description: 'A custom response message to return
                                    to the client. If not specified, defaults to

                                    "The response was rejected due to inappropriate
                                    content".'
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      description: 'A custom response message to return
                                        to the client. If not specified, defaults
                                        to

                                        "The request was rejected due to inappropriate
                                        content".'
                                      type: string
                                    statusCode:
                                      default: 403
                                      description: The status code to return to the
                                        client. Defaults to 403.
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  description: Configure a webhook to forward responses
                                    to for prompt guarding.
                                  properties:
                                    backendRef:
                                      description: 'backendRef references the webhook
                                        server to reach.


                                        Supported types: Service and Backend.'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      description: 'ForwardHeaderMatches defines a
                                        list of HTTP header matches that will be

                                        used to select the headers to forward to the
                                        webhook.

                                        Request headers are used when forwarding requests
                                        and response headers

                                        are used when forwarding responses.

                                        By default, no headers are forwarded.'
                                      items:
                                        description: 'HTTPHeaderMatch describes how
                                          to select a HTTP route by matching HTTP
                                          request

                                          headers.'
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, only the first

                                              entry with an equivalent name MUST be
                                              considered for a match. Subsequent

                                              entries with an equivalent header name
                                              MUST be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.


                                              When a header is repeated in an HTTP
                                              request, it is

                                              implementation-specific behavior as
                                              to how this is represented.

                                              Generally, proxies should follow the
                                              guidance from the RFC:

                                              https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                              regarding

                                              processing a repeated header, with special
                                              handling for "Set-Cookie".'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            description: 'Type specifies how to match
                                              against the value of the header.


                                              Support: Core (Exact)


                                              Support: Implementation-specific (RegularExpression)


                                              Since RegularExpression HeaderMatchType
                                              has implementation-specific

                                              conformance, implementations can support
                                              POSIX, PCRE or any other dialects

                                              of regular expressions. Please read
                                              the implementation''s documentation
                                              to

                                              determine the supported dialect.'
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook]
                                  must be set
                                rule: '[has(self.regex),has(self.webhook)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [request response]
                            must be set
                          rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                            >= 1'
                      routes:
                        additionalProperties:
                          description: 'RouteType specifies how the AI gateway should
                            process incoming requests

                            based on the URL path and the API format expected.'
                          enum:
                          - Completions
                          - Messages
                          - Models
                          - Passthrough
                          - Responses
                          - AnthropicTokenCount
                          - Embeddings
                          type: string
                        description: 'routes defines how to identify the type of traffic
                          to handle.

                          The keys are URL path suffixes matched using ends-with comparison
                          (e.g., "/v1/chat/completions").

                          The special "*" wildcard matches any path.

                          If not specified, all traffic defaults to "completions"
                          type.'
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [prompt promptGuard defaults
                        overrides modelAliases promptCaching routes] must be set
                      rule: '[has(self.prompt),has(self.promptGuard),has(self.defaults),has(self.overrides),has(self.modelAliases),has(self.promptCaching),has(self.routes)].filter(x,x==true).size()
                        >= 1'
                  auth:
                    description: auth defines settings for managing authentication
                      to the backend
                    properties:
                      aws:
                        description: 'Auth specifies an explicit AWS authentication
                          method for the backend.

                          When omitted, we will try to use the default AWS SDK authentication
                          methods.'
                        properties:
                          secretRef:
                            description: 'SecretRef references a Kubernetes Secret
                              containing the AWS credentials.

                              The Secret must have keys "accessKey", "secretKey",
                              and optionally "sessionToken".'
                            properties:
                              name:
                                default: ''
                                description: 'Name of the referent.

                                  This field is effectively required, but due to backwards
                                  compatibility is

                                  allowed to be empty. Instances of this type with
                                  an empty value here are

                                  almost certainly wrong.

                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                type: string
                            type: object
                            x-kubernetes-map-type: atomic
                        required:
                        - secretRef
                        type: object
                      key:
                        description: 'key provides an inline key to use as the value
                          of the Authorization header.

                          This option is the least secure; usage of a Secret is preferred.'
                        maxLength: 2048
                        type: string
                      passthrough:
                        description: 'passthrough passes through an existing token
                          that has been sent by the client and validated. Other policies,
                          like

                          JWT and API Key authentication, will strip the original
                          client credentials. Passthrough backend authentication

                          causes the original token to be added back into the request.
                          If there are no client authentication policies on the

                          request, the original token would be unchanged, so this
                          would have no effect.'
                        type: object
                      secretRef:
                        description: 'secretRef references a Kubernetes secret storing
                          the key to use the authorization value. This must be stored
                          in the

                          ''Authorization'' key.'
                        properties:
                          name:
                            default: ''
                            description: 'Name of the referent.

                              This field is effectively required, but due to backwards
                              compatibility is

                              allowed to be empty. Instances of this type with an
                              empty value here are

                              almost certainly wrong.

                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [key secretRef passthrough
                        aws] must be set
                      rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                        == 1'
                  http:
                    description: http defines settings for managing HTTP requests
                      to the backend.
                    properties:
                      requestTimeout:
                        description: requestTimeout specifies the deadline for receiving
                          a response from the backend.
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: requestTimeout must be at least 1ms
                          rule: duration(self) >= duration('1ms')
                      version:
                        description: "version specifies the HTTP protocol version\
                          \ to use when connecting to the backend.\nIf not specified,\
                          \ the version is automatically determined:\n* Service types\
                          \ can specify it with 'appProtocol' on the Service port.\n\
                          * If traffic is identified as gRPC, HTTP2 is used.\n* If\
                          \ the incoming traffic was plaintext HTTP, the original\
                          \ protocol will be used.\n* If the incoming traffic was\
                          \ HTTPS, HTTP1 will be used. This is because most clients\
                          \ will\n  transparently upgrade HTTPS traffic to HTTP2,\
                          \ even if the backend doesn't support it"
                        enum:
                        - HTTP1
                        - HTTP2
                        type: string
                    type: object
                  mcp:
                    description: mcp specifies settings for MCP workloads. This is
                      only applicable when connecting to a Backend of type 'mcp'.
                    properties:
                      authentication:
                        description: authentication defines MCPBackend specific authentication
                          rules.
                        properties:
                          audiences:
                            description: 'audiences specify the list of allowed audiences
                              that are allowed access. This corresponds to the ''aud''
                              claim (https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3).

                              If unset, any audience is allowed.'
                            items:
                              type: string
                            maxItems: 64
                            minItems: 1
                            type: array
                          issuer:
                            description: Issuer identifies the IdP that issued the
                              JWT. This corresponds to the 'iss' claim (https://tools.ietf.org/html/rfc7519#section-4.1.1).
                            maxLength: 256
                            minLength: 1
                            type: string
                          jwks:
                            description: jwks defines the remote JSON Web Key used
                              to validate the signature of the JWT.
                            properties:
                              backendRef:
                                description: 'backendRef references the remote JWKS
                                  server to reach.

                                  Supported types are Service and (static) Backend.
                                  An AgentgatewayPolicy containing backend tls config

                                  can then be attached to the service/backend in order
                                  to set tls options for a connection to the remote
                                  jwks source.'
                                properties:
                                  group:
                                    default: ''
                                    description: 'Group is the group of the referent.
                                      For example, "gateway.networking.k8s.io".

                                      When unspecified or empty string, core API group
                                      is inferred.'
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    description: 'Kind is the Kubernetes resource
                                      kind of the referent. For example

                                      "Service".


                                      Defaults to "Service" when not specified.


                                      ExternalName services can refer to CNAME DNS
                                      records that may live

                                      outside of the cluster and as such are difficult
                                      to reason about in

                                      terms of conformance. They also may not be safe
                                      to forward to (see

                                      CVE-2021-25740 for more information). Implementations
                                      SHOULD NOT

                                      support ExternalName Services.


                                      Support: Core (Services with a type other than
                                      ExternalName)


                                      Support: Implementation-specific (Services with
                                      type ExternalName)'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    description: Name is the name of the referent.
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: 'Namespace is the namespace of the
                                      backend. When unspecified, the local

                                      namespace is inferred.


                                      Note that when a namespace different than the
                                      local namespace is specified,

                                      a ReferenceGrant object is required in the referent
                                      namespace to allow that

                                      namespace''s owner to accept the reference.
                                      See the ReferenceGrant

                                      documentation for details.


                                      Support: Core'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    description: 'Port specifies the destination port
                                      number to use for this resource.

                                      Port is required when the referent is a Kubernetes
                                      Service. In this

                                      case, the port number is the service port number,
                                      not the target port.

                                      For other resources, destination port might
                                      be derived from the referent

                                      resource or this field.'
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              cacheDuration:
                                default: 5m
                                type: string
                                x-kubernetes-validations:
                                - message: invalid duration value
                                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                - message: cacheDuration must be at least 5m.
                                  rule: duration(self) >= duration('5m')
                              jwksPath:
                                description: Path to IdP jwks endpoint, relative to
                                  the root, commonly ".well-known/jwks.json".
                                maxLength: 2000
                                minLength: 1
                                type: string
                            required:
                            - backendRef
                            - jwksPath
                            type: object
                          mode:
                            description: validation mode for JWT authentication.
                            enum:
                            - Strict
                            - Optional
                            - Permissive
                            type: string
                          provider:
                            description: McpIDP specifies the identity provider to
                              use for authentication
                            enum:
                            - Auth0
                            - Keycloak
                            type: string
                          resourceMetadata:
                            additionalProperties:
                              x-kubernetes-preserve-unknown-fields: true
                            description: ResourceMetadata defines the metadata to
                              use for MCP resources.
                            type: object
                        required:
                        - jwks
                        type: object
                      authorization:
                        description: 'authorization defines MCPBackend level authorization.
                          Unlike authorization at the HTTP level, which will reject

                          unauthorized requests with a 403 error, this policy works
                          at the MCPBackend level.


                          List operations, such as list_tools, will have each item
                          evaluated. Items that do not meet the rule will be filtered.


                          Get or call operations, such as call_tool, will evaluate
                          the specific item and reject requests that do not meet the
                          rule.'
                        properties:
                          action:
                            default: Allow
                            description: 'Action defines whether the rule allows or
                              denies the request if matched.

                              If unspecified, the default is "Allow".'
                            enum:
                            - Allow
                            - Deny
                            type: string
                          policy:
                            description: 'Policy specifies the Authorization rule
                              to evaluate.

                              A policy matches when **any** of the conditions evaluates
                              to true.'
                            properties:
                              matchExpressions:
                                description: 'MatchExpressions defines a set of conditions
                                  that must be satisfied for the rule to match.

                                  These expression should be in the form of a Common
                                  Expression Language (CEL) expression.'
                                items:
                                  description: CELExpression represents a Common Expression
                                    Language (CEL) expression.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                maxItems: 256
                                minItems: 1
                                type: array
                            required:
                            - matchExpressions
                            type: object
                        required:
                        - policy
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [authorization authentication]
                        must be set
                      rule: '[has(self.authorization),has(self.authentication)].filter(x,x==true).size()
                        >= 1'
                  tcp:
                    description: tcp defines settings for managing TCP connections
                      to the backend.
                    properties:
                      connectTimeout:
                        description: connectTimeout defines the deadline for establishing
                          a connection to the destination.
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: connectTimeout must be at least 100ms
                          rule: duration(self) >= duration('100ms')
                      keepalive:
                        description: keepAlive defines settings for enabling TCP keepalives
                          on the connection.
                        properties:
                          interval:
                            description: 'interval specifies the number of seconds
                              between keep-alive probes.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: interval must be at least 1 second
                              rule: duration(self) >= duration('1s')
                          retries:
                            description: 'retries specifies the maximum number of
                              keep-alive probes to send before dropping the connection.

                              If unset, this defaults to 9.'
                            format: int32
                            maximum: 64
                            minimum: 1
                            type: integer
                          time:
                            description: 'time specifies the number of seconds a connection
                              needs to be idle before keep-alive probes start being
                              sent.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: time must be at least 1 second
                              rule: duration(self) >= duration('1s')
                        type: object
                    type: object
                  tls:
                    description: 'tls defines settings for managing TLS connections
                      to the backend.


                      If this field is set, TLS will be initiated to the backend;
                      the system trusted CA certificates will be used to

                      validate the server, and the SNI will automatically be set based
                      on the destination.'
                    properties:
                      alpnProtocols:
                        description: 'alpnProtocols sets the Application Level Protocol
                          Negotiation (ALPN) value to use in the TLS handshake.


                          If not present, defaults to ["h2", "http/1.1"].'
                        items:
                          maxLength: 64
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                      caCertificateRefs:
                        description: 'caCertificateRefs defines the CA certificate
                          ConfigMap to use to verify the server certificate.

                          If unset, the system''s trusted certificates are used.'
                        items:
                          description: 'LocalObjectReference contains enough information
                            to let you locate the

                            referenced object inside the same namespace.'
                          properties:
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      insecureSkipVerify:
                        description: "insecureSkipVerify originates TLS but skips\
                          \ verification of the backend's certificate.\nWARNING: This\
                          \ is an insecure option that should only be used if the\
                          \ risks are understood.\n\nThere are two modes:\n* All disables\
                          \ all TLS verification\n* Hostname verifies the CA certificate\
                          \ is trusted, but ignores any mismatch of hostname/SANs.\
                          \ Note that this method\n is still insecure; prefer setting\
                          \ verifySubjectAltNames to customize the valid hostnames\
                          \ if possible."
                        enum:
                        - All
                        - Hostname
                        type: string
                      mtlsCertificateRef:
                        description: 'mtlsCertificateRef enables mutual TLS to the
                          backend, using the specified key (tls.key) and cert (tls.crt)
                          from the

                          refenced Secret.


                          An optional ''ca.cert'' field, if present, will be used
                          to verify the server certificate if present. If

                          caCertificateRefs is also specified, the caCertificateRefs
                          field takes priority.


                          If unspecified, no client certificate will be used.'
                        items:
                          description: 'LocalObjectReference contains enough information
                            to let you locate the

                            referenced object inside the same namespace.'
                          properties:
                            name:
                              default: ''
                              description: 'Name of the referent.

                                This field is effectively required, but due to backwards
                                compatibility is

                                allowed to be empty. Instances of this type with an
                                empty value here are

                                almost certainly wrong.

                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      sni:
                        description: 'sni specifies the Server Name Indicator (SNI)
                          to be used in the TLS handshake. If unset, the SNI is automatically

                          set based on the destination hostname.'
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      verifySubjectAltNames:
                        description: 'verifySubjectAltNames specifies the Subject
                          Alternative Names (SAN) to verify in the server certificate.

                          If not present, the destination hostname is automatically
                          used.'
                        items:
                          maxLength: 256
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: insecureSkipVerify All and caCertificateRefs may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) && self.insecureSkipVerify
                        == ''All'' ? !has(self.caCertificateRefs) : true'
                    - message: insecureSkipVerify and verifySubjectAltNames may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) ? !has(self.verifySubjectAltNames)
                        : true'
                    - message: at most one of the fields in [verifySubjectAltNames
                        insecureSkipVerify] may be set
                      rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                        <= 1'
                type: object
                x-kubernetes-validations:
                - message: at least one of the fields in [tcp tls http auth mcp ai]
                    must be set
                  rule: '[has(self.tcp),has(self.tls),has(self.http),has(self.auth),has(self.mcp),has(self.ai)].filter(x,x==true).size()
                    >= 1'
              frontend:
                description: 'frontend defines settings for how to handle incoming
                  traffic.


                  A frontend policy can only target a Gateway. Listener and ListenerSet
                  are not valid targets.


                  When multiple policies are selected for a given request, they are
                  merged on a field-level basis, but not a deep

                  merge. For example, policy A sets ''tcp'' and ''tls'', and policy
                  B sets ''tls'', the effective policy would be ''tcp'' from

                  policy A, and ''tls'' from policy B.'
                properties:
                  accessLog:
                    description: AccessLoggingConfig contains access logging configuration
                    properties:
                      attributes:
                        description: attributes specifies customizations to the key-value
                          pairs that are logged
                        properties:
                          add:
                            description: 'add specifies additional key-value pairs
                              to be added to each entry.

                              The value is a CEL expression. If the CEL expression
                              fails to evaluate, the pair will be excluded.'
                            items:
                              properties:
                                expression:
                                  description: CELExpression represents a Common Expression
                                    Language (CEL) expression.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  type: string
                              required:
                              - expression
                              - name
                              type: object
                            minItems: 1
                            type: array
                          remove:
                            description: remove lists the default fields that should
                              be removed. For example, "http.method".
                            items:
                              maxLength: 64
                              minLength: 1
                              type: string
                            maxItems: 32
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [remove add] must
                            be set
                          rule: '[has(self.remove),has(self.add)].filter(x,x==true).size()
                            >= 1'
                      filter:
                        description: 'filter specifies a CEL expression that is used
                          to filter logs. A log will only be emitted if the expression
                          evaluates

                          to ''true''.'
                        maxLength: 16384
                        minLength: 1
                        type: string
                    type: object
                  http:
                    description: http defines settings on managing incoming HTTP requests.
                    properties:
                      http1IdleTimeout:
                        description: 'http1IdleTimeout defines the timeout before
                          an unused connection is closed.

                          If unset, this defaults to 10 minutes.'
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http1IdleTimeout must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http1MaxHeaders:
                        description: 'http1MaxHeaders defines the maximum number of
                          headers that are allowed in HTTP/1.1 requests.

                          If unset, this defaults to 100.'
                        format: int32
                        maximum: 4096
                        minimum: 1
                        type: integer
                      http2ConnectionWindowSize:
                        description: http2ConnectionWindowSize indicates the initial
                          window size for connection-level flow control for received
                          data.
                        format: int32
                        minimum: 1
                        type: integer
                      http2FrameSize:
                        description: 'http2FrameSize sets the maximum frame size to
                          use.

                          If unset, this defaults to 16kb'
                        format: int32
                        maximum: 1677215
                        minimum: 16384
                        type: integer
                      http2KeepaliveInterval:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http2KeepaliveInterval must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http2KeepaliveTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http2KeepaliveTimeout must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http2WindowSize:
                        description: http2WindowSize indicates the initial window
                          size for stream-level flow control for received data.
                        format: int32
                        minimum: 1
                        type: integer
                      maxBufferSize:
                        description: 'maxBufferSize defines the maximum size HTTP
                          body that will be buffered into memory.

                          Bodies will only be buffered for policies which require
                          buffering.

                          If unset, this defaults to 2mb.'
                        format: int32
                        minimum: 1
                        type: integer
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [maxBufferSize http1MaxHeaders
                        http1IdleTimeout http2WindowSize http2ConnectionWindowSize
                        http2FrameSize http2KeepaliveInterval http2KeepaliveTimeout]
                        must be set
                      rule: '[has(self.maxBufferSize),has(self.http1MaxHeaders),has(self.http1IdleTimeout),has(self.http2WindowSize),has(self.http2ConnectionWindowSize),has(self.http2FrameSize),has(self.http2KeepaliveInterval),has(self.http2KeepaliveTimeout)].filter(x,x==true).size()
                        >= 1'
                  tcp:
                    description: tcp defines settings on managing incoming TCP connections.
                    properties:
                      keepalive:
                        description: keepalive defines settings for enabling TCP keepalives
                          on the connection.
                        properties:
                          interval:
                            description: 'interval specifies the number of seconds
                              between keep-alive probes.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: interval must be at least 1 second
                              rule: duration(self) >= duration('1s')
                          retries:
                            description: 'retries specifies the maximum number of
                              keep-alive probes to send before dropping the connection.

                              If unset, this defaults to 9.'
                            format: int32
                            maximum: 64
                            minimum: 1
                            type: integer
                          time:
                            description: 'time specifies the number of seconds a connection
                              needs to be idle before keep-alive probes start being
                              sent.

                              If unset, this defaults to 180s.'
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: time must be at least 1 second
                              rule: duration(self) >= duration('1s')
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [keepalive] must be set
                      rule: '[has(self.keepalive)].filter(x,x==true).size() >= 1'
                  tls:
                    description: tls defines settings on managing incoming TLS connections.
                    properties:
                      alpnProtocols:
                        description: 'alpnProtocols sets the Application Level Protocol
                          Negotiation (ALPN) value to use in the TLS handshake.


                          If not present, defaults to ["h2", "http/1.1"].'
                        items:
                          maxLength: 64
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                      cipherSuites:
                        description: 'CipherSuites configures the list of cipher suites
                          for a TLS listener.

                          The value is a comma-separated list of cipher suites, e.g
                          "TLS13_AES_256_GCM_SHA384,TLS13_AES_128_GCM_SHA256".

                          Use in the TLS options field of a TLS listener.'
                        items:
                          enum:
                          - TLS13_AES_256_GCM_SHA384
                          - TLS13_AES_128_GCM_SHA256
                          - TLS13_CHACHA20_POLY1305_SHA256
                          - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
                          - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
                          - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
                          - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
                          - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
                          - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
                          type: string
                        type: array
                      handshakeTimeout:
                        description: 'handshakeTimeout specifies the deadline for
                          a TLS handshake to complete.

                          If unset, this defaults to 15s.'
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: handshakeTimeout must be at least 100ms
                          rule: duration(self) >= duration('100ms')
                      maxProtocolVersion:
                        description: MaxTLSVersion configures the maximum TLS version
                          to support.
                        enum:
                        - '1.2'
                        - '1.3'
                        type: string
                      minProtocolVersion:
                        description: MinTLSVersion configures the minimum TLS version
                          to support.
                        enum:
                        - '1.2'
                        - '1.3'
                        type: string
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [handshakeTimeout] must
                        be set
                      rule: '[has(self.handshakeTimeout)].filter(x,x==true).size()
                        >= 1'
                  tracing:
                    description: Tracing contains various settings for OpenTelemetry
                      tracer.
                    properties:
                      attributes:
                        description: attributes specify customizations to the key-value
                          pairs that are included in the trace.
                        properties:
                          add:
                            description: 'add specifies additional key-value pairs
                              to be added to each entry.

                              The value is a CEL expression. If the CEL expression
                              fails to evaluate, the pair will be excluded.'
                            items:
                              properties:
                                expression:
                                  description: CELExpression represents a Common Expression
                                    Language (CEL) expression.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  type: string
                              required:
                              - expression
                              - name
                              type: object
                            minItems: 1
                            type: array
                          remove:
                            description: remove lists the default fields that should
                              be removed. For example, "http.method".
                            items:
                              maxLength: 64
                              minLength: 1
                              type: string
                            maxItems: 32
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [remove add] must
                            be set
                          rule: '[has(self.remove),has(self.add)].filter(x,x==true).size()
                            >= 1'
                      backendRef:
                        description: 'backendRef references the OTLP server to reach.

                          Supported types: Service and AgentgatewayBackend.'
                        properties:
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      clientSampling:
                        description: 'clientSampling is an expression to determine
                          the amount of client sampling. Client sampling determines
                          whether to

                          initiate a new trace span if the incoming request does have
                          a trace already. This should evaluate to a float between

                          0.0-1.0, or a boolean (true/false) If unspecified, client
                          sampling is 100% enabled.'
                        maxLength: 16384
                        minLength: 1
                        type: string
                      protocol:
                        default: HTTP
                        description: protocol specifies the OTLP protocol variant
                          to use.
                        enum:
                        - HTTP
                        - GRPC
                        type: string
                      randomSampling:
                        description: 'randomSampling is an expression to determine
                          the amount of random sampling. Random sampling will initiate
                          a new

                          trace span if the incoming request does not have a trace
                          initiated already. This should evaluate to a float between

                          0.0-1.0, or a boolean (true/false) If unspecified, random
                          sampling is disabled.'
                        maxLength: 16384
                        minLength: 1
                        type: string
                      resources:
                        description: resources describe the entity producing telemetry
                          and specify the resources to be included in the trace.
                        items:
                          properties:
                            expression:
                              description: CELExpression represents a Common Expression
                                Language (CEL) expression.
                              maxLength: 16384
                              minLength: 1
                              type: string
                            name:
                              maxLength: 256
                              minLength: 1
                              type: string
                          required:
                          - expression
                          - name
                          type: object
                        type: array
                    required:
                    - backendRef
                    type: object
                type: object
              targetRefs:
                description: targetRefs specifies the target resources by reference
                  to attach the policy to.
                items:
                  description: 'Select the object to attach the policy by Group, Kind,
                    Name and SectionName.

                    The object must be in the same namespace as the policy.

                    You can target only one object at a time.'
                  properties:
                    group:
                      description: 'The API group of the target resource.

                        For Kubernetes Gateway API resources, the group is `gateway.networking.k8s.io`.'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: 'The API kind of the target resource,

                        such as Gateway or HTTPRoute.'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: The name of the target resource.
                      maxLength: 253
                      minLength: 1
                      type: string
                    sectionName:
                      description: The section name of the target resource.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway, HTTPRoute, XListenerSet,
                    Service, or AgentgatewayBackend resources
                  rule: self.all(r, (r.kind == 'Service' && r.group == '') || (r.kind
                    == 'AgentgatewayBackend' && r.group == 'agentgateway.dev') ||
                    (r.kind in ['Gateway', 'HTTPRoute'] && r.group == 'gateway.networking.k8s.io')
                    || (r.kind == 'XListenerSet' && r.group == 'gateway.networking.x-k8s.io'))
                - message: Only one Kind of targetRef can be set on one policy
                  rule: self.all(l1, !self.exists(l2, l1.kind != l2.kind))
              targetSelectors:
                description: targetSelectors specifies the target selectors to select
                  resources to attach the policy to.
                items:
                  description: 'LocalPolicyTargetSelectorWithSectionName the object
                    to attach the policy by Group, Kind, MatchLabels, and optionally
                    SectionName.

                    The object must be in the same namespace as the policy and match
                    the

                    specified labels.

                    Do not use targetSelectors when reconciliation times are critical,
                    especially if you

                    have a large number of policies that target the same resource.

                    Instead, use targetRefs to attach the policy.'
                  properties:
                    group:
                      description: 'The API group of the target resource.

                        For Kubernetes Gateway API resources, the group is `gateway.networking.k8s.io`.'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: 'The API kind of the target resource,

                        such as Gateway or HTTPRoute.'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    matchLabels:
                      additionalProperties:
                        type: string
                      description: Label selector to select the target resource.
                      type: object
                    sectionName:
                      description: The section name of the target resource.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - matchLabels
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway, HTTPRoute, XListenerSet,
                    Service, or AgentgatewayBackend resources
                  rule: self.all(r, (r.kind == 'Service' && r.group == '') || (r.kind
                    == 'AgentgatewayBackend' && r.group == 'agentgateway.dev') ||
                    (r.kind in ['Gateway', 'HTTPRoute'] && r.group == 'gateway.networking.k8s.io')
                    || (r.kind == 'XListenerSet' && r.group == 'gateway.networking.x-k8s.io'))
                - message: Only one Kind of targetRef can be set on one policy
                  rule: self.all(l1, !self.exists(l2, l1.kind != l2.kind))
              traffic:
                description: 'traffic defines settings for how process traffic.


                  A traffic policy can target a Gateway (optionally, with a sectionName
                  indicating the listener), ListenerSet, Route

                  (optionally, with a sectionName indicating the route rule).


                  When multiple policies are selected for a given request, they are
                  merged on a field-level basis, but not a deep

                  merge. Precedence is given to more precise policies: Gateway < Listener
                  < Route < Route Rule. For example, policy A

                  sets ''timeouts'' and ''retries'', and policy B sets ''retries'',
                  the effective policy would be ''timeouts'' from policy A,

                  and ''retries'' from policy B.'
                properties:
                  apiKeyAuthentication:
                    description: apiKeyAuthentication authenticates users based on
                      a configured API Key.
                    properties:
                      mode:
                        default: Strict
                        description: Validation mode for api key authentication.
                        enum:
                        - Strict
                        - Optional
                        type: string
                      secretRef:
                        description: "secretRef references a Kubernetes secret storing\
                          \ a set of API Keys. If there are many keys, 'secretSelector'\
                          \ can be\nused instead.\n\nEach entry in the Secret represents\
                          \ one API Key. The key is an arbitrary identifier. The value\
                          \ can either be:\n* A string, representing the API Key.\n\
                          * A JSON object, with two fields, `key` and `metadata`.\
                          \ `key` contains the API Key. `metadata` contains arbitrary\
                          \ JSON\n  metadata associated with the key, which may be\
                          \ used by other policies. For example, you may write an\
                          \ authorization\n  policy allow `apiKey.group == 'sales'`.\n\
                          \nExample:\n\napiVersion: v1\nkind: Secret\nmetadata:\n\
                          \  name: api-key\nstringData:\n  client1: |\n    {\n   \
                          \   \"key\": \"k-123\",\n      \"metadata\": {\n       \
                          \ \"group\": \"sales\",\n        \"created_at\": \"2024-10-01T12:00:00Z\"\
                          ,\n      }\n    }\n  client2: \"k-456\""
                        properties:
                          name:
                            default: ''
                            description: 'Name of the referent.

                              This field is effectively required, but due to backwards
                              compatibility is

                              allowed to be empty. Instances of this type with an
                              empty value here are

                              almost certainly wrong.

                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      secretSelector:
                        description: "secretSelector selects multiple secrets containing\
                          \ API Keys. If the same key is defined in multiple secrets,\
                          \ the\nbehavior is undefined.\n\nEach entry in the Secret\
                          \ represents one API Key. The key is an arbitrary identifier.\
                          \ The value can either be:\n* A string, representing the\
                          \ API Key.\n* A JSON object, with two fields, `key` and\
                          \ `metadata`. `key` contains the API Key. `metadata` contains\
                          \ arbitrary JSON\n  metadata associated with the key, which\
                          \ may be used by other policies. For example, you may write\
                          \ an authorization\n  policy allow `apiKey.group == 'sales'`.\n\
                          \nExample:\n\napiVersion: v1\nkind: Secret\nmetadata:\n\
                          \  name: api-key\nstringData:\n  client1: |\n    {\n   \
                          \   \"key\": \"k-123\",\n      \"metadata\": {\n       \
                          \ \"group\": \"sales\",\n        \"created_at\": \"2024-10-01T12:00:00Z\"\
                          ,\n      }\n    }\n  client2: \"k-456\""
                        properties:
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: Label selector to select the target resource.
                            type: object
                        required:
                        - matchLabels
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [secretRef secretSelector]
                        must be set
                      rule: '[has(self.secretRef),has(self.secretSelector)].filter(x,x==true).size()
                        == 1'
                  authorization:
                    description: 'authorization specifies the access rules based on
                      roles and permissions.

                      If multiple authorization rules are applied across different
                      policies (at the same, or different, attahcment points),

                      all rules are merged.'
                    properties:
                      action:
                        default: Allow
                        description: 'Action defines whether the rule allows or denies
                          the request if matched.

                          If unspecified, the default is "Allow".'
                        enum:
                        - Allow
                        - Deny
                        type: string
                      policy:
                        description: 'Policy specifies the Authorization rule to evaluate.

                          A policy matches when **any** of the conditions evaluates
                          to true.'
                        properties:
                          matchExpressions:
                            description: 'MatchExpressions defines a set of conditions
                              that must be satisfied for the rule to match.

                              These expression should be in the form of a Common Expression
                              Language (CEL) expression.'
                            items:
                              description: CELExpression represents a Common Expression
                                Language (CEL) expression.
                              maxLength: 16384
                              minLength: 1
                              type: string
                            maxItems: 256
                            minItems: 1
                            type: array
                        required:
                        - matchExpressions
                        type: object
                    required:
                    - policy
                    type: object
                  basicAuthentication:
                    description: 'basicAuthentication authenticates users based on
                      the "Basic" authentication scheme (RFC 7617), where a username
                      and password

                      are encoded in the request.'
                    properties:
                      mode:
                        default: Strict
                        description: validation mode for basic auth authentication.
                        enum:
                        - Strict
                        - Optional
                        type: string
                      realm:
                        description: 'realm specifies the ''realm'' to return in the
                          WWW-Authenticate header for failed authentication requests.

                          If unset, "Restricted" will be used.'
                        type: string
                      secretRef:
                        description: "secretRef references a Kubernetes secret storing\
                          \ the .htaccess file. The Secret must have a key named '.htaccess',\n\
                          and should contain the complete .htaccess file.\n\nNote:\
                          \ passwords should be the hash of the password, not the\
                          \ raw password. Use the `htpasswd` or similar commands\n\
                          to generate a hash. MD5, bcrypt, crypt, and SHA-1 are supported.\n\
                          \nExample:\n\napiVersion: v1\nkind: Secret\nmetadata:\n\
                          \  name: basic-auth\nstringData:\n  .htaccess: |\n    alice:$apr1$3zSE0Abt$IuETi4l5yO87MuOrbSE4V.\n\
                          \    bob:$apr1$Ukb5LgRD$EPY2lIfY.A54jzLELNIId/"
                        properties:
                          name:
                            default: ''
                            description: 'Name of the referent.

                              This field is effectively required, but due to backwards
                              compatibility is

                              allowed to be empty. Instances of this type with an
                              empty value here are

                              almost certainly wrong.

                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      users:
                        description: 'users provides an inline list of username/password
                          pairs that will be accepted.

                          Each entry represents one line of the htpasswd format: https://httpd.apache.org/docs/2.4/programs/htpasswd.html.


                          Note: passwords should be the hash of the password, not
                          the raw password. Use the `htpasswd` or similar commands

                          to generate a hash. MD5, bcrypt, crypt, and SHA-1 are supported.


                          Example:

                          users:

                          - "user1:$apr1$ivPt0D4C$DmRhnewfHRSrb3DQC.WHC."

                          - "user2:$2y$05$r3J4d3VepzFkedkd/q1vI.pBYIpSqjfN0qOARV3ScUHysatnS0cL2"'
                        items:
                          type: string
                        maxItems: 256
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [users secretRef] must
                        be set
                      rule: '[has(self.users),has(self.secretRef)].filter(x,x==true).size()
                        == 1'
                  cors:
                    description: cors specifies the CORS configuration for the policy.
                    properties:
                      allowCredentials:
                        description: 'AllowCredentials indicates whether the actual
                          cross-origin request allows

                          to include credentials.


                          When set to true, the gateway will include the `Access-Control-Allow-Credentials`

                          response header with value true (case-sensitive).


                          When set to false or omitted the gateway will omit the header

                          `Access-Control-Allow-Credentials` entirely (this is the
                          standard CORS

                          behavior).


                          Support: Extended'
                        type: boolean
                      allowHeaders:
                        description: 'AllowHeaders indicates which HTTP request headers
                          are supported for

                          accessing the requested resource.


                          Header names are not case sensitive.


                          Multiple header names in the value of the `Access-Control-Allow-Headers`

                          response header are separated by a comma (",").


                          When the `AllowHeaders` field is configured with one or
                          more headers, the

                          gateway must return the `Access-Control-Allow-Headers` response
                          header

                          which value is present in the `AllowHeaders` field.


                          If any header name in the `Access-Control-Request-Headers`
                          request header

                          is not included in the list of header names specified by
                          the response

                          header `Access-Control-Allow-Headers`, it will present an
                          error on the

                          client side.


                          If any header name in the `Access-Control-Allow-Headers`
                          response header

                          does not recognize by the client, it will also occur an
                          error on the

                          client side.


                          A wildcard indicates that the requests with all HTTP headers
                          are allowed.

                          The `Access-Control-Allow-Headers` response header can only
                          use `*`

                          wildcard as value when the `AllowCredentials` field is false
                          or omitted.


                          When the `AllowCredentials` field is true and `AllowHeaders`
                          field

                          specified with the `*` wildcard, the gateway must specify
                          one or more

                          HTTP headers in the value of the `Access-Control-Allow-Headers`
                          response

                          header. The value of the header `Access-Control-Allow-Headers`
                          is same as

                          the `Access-Control-Request-Headers` header provided by
                          the client. If

                          the header `Access-Control-Request-Headers` is not included
                          in the

                          request, the gateway will omit the `Access-Control-Allow-Headers`

                          response header, instead of specifying the `*` wildcard.
                          A Gateway

                          implementation may choose to add implementation-specific
                          default headers.


                          Support: Extended'
                        items:
                          description: "HTTPHeaderName is the name of an HTTP header.\n\
                            \nValid values include:\n\n* \"Authorization\"\n* \"Set-Cookie\"\
                            \n\nInvalid values include:\n\n  - \":method\" - \":\"\
                            \ is an invalid character. This means that HTTP/2 pseudo\n\
                            \    headers are not currently supported by this type.\n\
                            \  - \"/invalid\" - \"/ \" is an invalid character"
                          maxLength: 256
                          minLength: 1
                          pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                      allowMethods:
                        description: 'AllowMethods indicates which HTTP methods are
                          supported for accessing the

                          requested resource.


                          Valid values are any method defined by RFC9110, along with
                          the special

                          value `*`, which represents all HTTP methods are allowed.


                          Method names are case sensitive, so these values are also
                          case-sensitive.

                          (See https://www.rfc-editor.org/rfc/rfc2616#section-5.1.1)


                          Multiple method names in the value of the `Access-Control-Allow-Methods`

                          response header are separated by a comma (",").


                          A CORS-safelisted method is a method that is `GET`, `HEAD`,
                          or `POST`.

                          (See https://fetch.spec.whatwg.org/#cors-safelisted-method)
                          The

                          CORS-safelisted methods are always allowed, regardless of
                          whether they

                          are specified in the `AllowMethods` field.


                          When the `AllowMethods` field is configured with one or
                          more methods, the

                          gateway must return the `Access-Control-Allow-Methods` response
                          header

                          which value is present in the `AllowMethods` field.


                          If the HTTP method of the `Access-Control-Request-Method`
                          request header

                          is not included in the list of methods specified by the
                          response header

                          `Access-Control-Allow-Methods`, it will present an error
                          on the client

                          side.


                          The `Access-Control-Allow-Methods` response header can only
                          use `*`

                          wildcard as value when the `AllowCredentials` field is false
                          or omitted.


                          When the `AllowCredentials` field is true and `AllowMethods`
                          field

                          specified with the `*` wildcard, the gateway must specify
                          one HTTP method

                          in the value of the Access-Control-Allow-Methods response
                          header. The

                          value of the header `Access-Control-Allow-Methods` is same
                          as the

                          `Access-Control-Request-Method` header provided by the client.
                          If the

                          header `Access-Control-Request-Method` is not included in
                          the request,

                          the gateway will omit the `Access-Control-Allow-Methods`
                          response header,

                          instead of specifying the `*` wildcard. A Gateway implementation
                          may

                          choose to add implementation-specific default methods.


                          Support: Extended'
                        items:
                          enum:
                          - GET
                          - HEAD
                          - POST
                          - PUT
                          - DELETE
                          - CONNECT
                          - OPTIONS
                          - TRACE
                          - PATCH
                          - '*'
                          type: string
                        maxItems: 9
                        type: array
                        x-kubernetes-list-type: set
                        x-kubernetes-validations:
                        - message: AllowMethods cannot contain '*' alongside other
                            methods
                          rule: '!(''*'' in self && self.size() > 1)'
                      allowOrigins:
                        description: "AllowOrigins indicates whether the response\
                          \ can be shared with requested\nresource from the given\
                          \ `Origin`.\n\nThe `Origin` consists of a scheme and a host,\
                          \ with an optional port, and\ntakes the form `<scheme>://<host>(:<port>)`.\n\
                          \nValid values for scheme are: `http` and `https`.\n\nValid\
                          \ values for port are any integer between 1 and 65535 (the\
                          \ list of\navailable TCP/UDP ports). Note that, if not included,\
                          \ port `80` is\nassumed for `http` scheme origins, and port\
                          \ `443` is assumed for `https`\norigins. This may affect\
                          \ origin matching.\n\nThe host part of the origin may contain\
                          \ the wildcard character `*`. These\nwildcard characters\
                          \ behave as follows:\n\n* `*` is a greedy match to the _left_,\
                          \ including any number of\n  DNS labels to the left of its\
                          \ position. This also means that\n  `*` will include any\
                          \ number of period `.` characters to the\n  left of its\
                          \ position.\n* A wildcard by itself matches all hosts.\n\
                          \nAn origin value that includes _only_ the `*` character\
                          \ indicates requests\nfrom all `Origin`s are allowed.\n\n\
                          When the `AllowOrigins` field is configured with multiple\
                          \ origins, it\nmeans the server supports clients from multiple\
                          \ origins. If the request\n`Origin` matches the configured\
                          \ allowed origins, the gateway must return\nthe given `Origin`\
                          \ and sets value of the header\n`Access-Control-Allow-Origin`\
                          \ same as the `Origin` header provided by the\nclient.\n\
                          \nThe status code of a successful response to a \"preflight\"\
                          \ request is\nalways an OK status (i.e., 204 or 200).\n\n\
                          If the request `Origin` does not match the configured allowed\
                          \ origins,\nthe gateway returns 204/200 response but doesn't\
                          \ set the relevant\ncross-origin response headers. Alternatively,\
                          \ the gateway responds with\n403 status to the \"preflight\"\
                          \ request is denied, coupled with omitting\nthe CORS headers.\
                          \ The cross-origin request fails on the client side.\nTherefore,\
                          \ the client doesn't attempt the actual cross-origin request.\n\
                          \nThe `Access-Control-Allow-Origin` response header can\
                          \ only use `*`\nwildcard as value when the `AllowCredentials`\
                          \ field is false or omitted.\n\nWhen the `AllowCredentials`\
                          \ field is true and `AllowOrigins` field\nspecified with\
                          \ the `*` wildcard, the gateway must return a single origin\n\
                          in the value of the `Access-Control-Allow-Origin` response\
                          \ header,\ninstead of specifying the `*` wildcard. The value\
                          \ of the header\n`Access-Control-Allow-Origin` is same as\
                          \ the `Origin` header provided by\nthe client.\n\nSupport:\
                          \ Extended"
                        items:
                          description: 'The CORSOrigin MUST NOT be a relative URI,
                            and it MUST follow the URI syntax and

                            encoding rules specified in RFC3986.  The CORSOrigin MUST
                            include both a

                            scheme (e.g., "http" or "spiffe") and a scheme-specific-part,
                            or it should be a single ''*'' character.

                            URIs that include an authority MUST include a fully qualified
                            domain name or

                            IP address as the host.

                            <gateway:util:excludeFromCRD> The below regex was generated
                            to simplify the assertion of scheme://host:<port> being
                            port optional </gateway:util:excludeFromCRD>'
                          maxLength: 253
                          minLength: 1
                          pattern: (^\*$)|(^([a-zA-Z][a-zA-Z0-9+\-.]+):\/\/([^:/?#]+)(:([0-9]{1,5}))?$)
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                        x-kubernetes-validations:
                        - message: AllowOrigins cannot contain '*' alongside other
                            origins
                          rule: '!(''*'' in self && self.size() > 1)'
                      exposeHeaders:
                        description: 'ExposeHeaders indicates which HTTP response
                          headers can be exposed

                          to client-side scripts in response to a cross-origin request.


                          A CORS-safelisted response header is an HTTP header in a
                          CORS response

                          that it is considered safe to expose to the client scripts.

                          The CORS-safelisted response headers include the following
                          headers:

                          `Cache-Control`

                          `Content-Language`

                          `Content-Length`

                          `Content-Type`

                          `Expires`

                          `Last-Modified`

                          `Pragma`

                          (See https://fetch.spec.whatwg.org/#cors-safelisted-response-header-name)

                          The CORS-safelisted response headers are exposed to client
                          by default.


                          When an HTTP header name is specified using the `ExposeHeaders`
                          field,

                          this additional header will be exposed as part of the response
                          to the

                          client.


                          Header names are not case sensitive.


                          Multiple header names in the value of the `Access-Control-Expose-Headers`

                          response header are separated by a comma (",").


                          A wildcard indicates that the responses with all HTTP headers
                          are exposed

                          to clients. The `Access-Control-Expose-Headers` response
                          header can only

                          use `*` wildcard as value when the `AllowCredentials` field
                          is false or omitted.


                          Support: Extended'
                        items:
                          description: "HTTPHeaderName is the name of an HTTP header.\n\
                            \nValid values include:\n\n* \"Authorization\"\n* \"Set-Cookie\"\
                            \n\nInvalid values include:\n\n  - \":method\" - \":\"\
                            \ is an invalid character. This means that HTTP/2 pseudo\n\
                            \    headers are not currently supported by this type.\n\
                            \  - \"/invalid\" - \"/ \" is an invalid character"
                          maxLength: 256
                          minLength: 1
                          pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                      maxAge:
                        default: 5
                        description: 'MaxAge indicates the duration (in seconds) for
                          the client to cache the

                          results of a "preflight" request.


                          The information provided by the `Access-Control-Allow-Methods`
                          and

                          `Access-Control-Allow-Headers` response headers can be cached
                          by the

                          client until the time specified by `Access-Control-Max-Age`
                          elapses.


                          The default value of `Access-Control-Max-Age` response header
                          is 5

                          (seconds).'
                        format: int32
                        minimum: 1
                        type: integer
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  csrf:
                    description: 'csrf specifies the Cross-Site Request Forgery (CSRF)
                      policy for this traffic policy.


                      The CSRF policy has the following behavior:

                      * Safe methods (GET, HEAD, OPTIONS) are automatically allowed

                      * Requests without Sec-Fetch-Site or Origin headers are assumed
                      to be same-origin or non-browser requests and are allowed.

                      * Otherwise, the Sec-Fetch-Site header is checked, with a fallback
                      to comparing the Origin header to the Host header.'
                    properties:
                      additionalOrigins:
                        description: 'additionalOrigin specifies additional source
                          origins that will be allowed in addition to the destination
                          origin. The

                          `Origin` consists of a scheme and a host, with an optional
                          port, and takes the form `<scheme>://<host>(:<port>)`.'
                        items:
                          maxLength: 256
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                  directResponse:
                    description: direct response configures the policy to send a direct
                      response to the client.
                    properties:
                      body:
                        description: 'Body defines the content to be returned in the
                          HTTP response body.

                          The maximum length of the body is restricted to prevent
                          excessively large responses.

                          If this field is omitted, no body is included in the response.'
                        maxLength: 4096
                        minLength: 1
                        type: string
                      status:
                        description: StatusCode defines the HTTP status code to return
                          for this route.
                        format: int32
                        maximum: 599
                        minimum: 200
                        type: integer
                    required:
                    - status
                    type: object
                  extAuth:
                    description: 'extAuth specifies the external authentication configuration
                      for the policy.

                      This controls what external server to send requests to for authentication.'
                    properties:
                      backendRef:
                        description: 'backendRef references the External Authorization
                          server to reach.


                          Supported types: Service and Backend.'
                        properties:
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      forwardBody:
                        description: 'forwardBody configures whether to include the
                          HTTP body in the request. If enabled, the request body will
                          be

                          buffered.'
                        properties:
                          maxSize:
                            description: 'maxSize specifies how large in bytes the
                              largest body that will be buffered and sent to the authorization
                              server. If

                              the body size is larger than maxSize, then the request
                              will be rejected with a response.'
                            format: int32
                            minimum: 1
                            type: integer
                        required:
                        - maxSize
                        type: object
                      grpc:
                        description: 'grpc specifies that the gRPC External Authorization

                          [protocol](https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto)
                          should be used.'
                        properties:
                          contextExtensions:
                            additionalProperties:
                              type: string
                            description: contextExtensions specifies additional arbitrary
                              key-value pairs to send to the authorization server
                              in the `context_extensions` field.
                            maxProperties: 64
                            type: object
                          requestMetadata:
                            additionalProperties:
                              description: CELExpression represents a Common Expression
                                Language (CEL) expression.
                              maxLength: 16384
                              minLength: 1
                              type: string
                            description: 'requestMetadata specifies metadata to be
                              sent *to* the authorization server.

                              This maps to the `metadata_context.filter_metadata`
                              field of the request, and allows dynamic CEL expressions.

                              If unset, by default the `envoy.filters.http.jwt_authn`
                              key is set if the JWT policy is used as well, for compatibility.'
                            maxProperties: 64
                            type: object
                        type: object
                      http:
                        description: 'http specifies that the HTTP protocol should
                          be used for connecting to the authorization server.

                          The authorization server must return a `200` status code,
                          otherwise the request is considered an authorization failure.'
                        properties:
                          addRequestHeaders:
                            additionalProperties:
                              description: CELExpression represents a Common Expression
                                Language (CEL) expression.
                              maxLength: 16384
                              minLength: 1
                              type: string
                            description: 'addRequestHeaders specifies what additional
                              headers to add to the request to the authorization server.

                              While allowedRequestHeaders just passes the original
                              headers through, addRequestHeaders allows defining custom
                              headers

                              based on CEL Expressions.'
                            maxProperties: 64
                            type: object
                          allowedRequestHeaders:
                            description: 'allowedRequestHeaders specifies what additional
                              headers from the client request

                              will be sent to the authorization server.


                              If unset, the following headers are sent by default:
                              `Authorization`.'
                            items:
                              maxLength: 256
                              minLength: 1
                              type: string
                            maxItems: 64
                            type: array
                          allowedResponseHeaders:
                            description: 'allowedResponseHeaders specifies what headers
                              from the authorization response

                              will be copied into the request to the backend.'
                            items:
                              maxLength: 256
                              minLength: 1
                              type: string
                            maxItems: 64
                            type: array
                          path:
                            description: 'path specifies the path to send to the authorization
                              server. If unset, this defaults to the original request
                              path.

                              This is a CEL expression, which allows customizing the
                              path based on the incoming request.

                              For example, to add a prefix: `path: ''"/prefix/" +
                              request.path''`.'
                            maxLength: 16384
                            minLength: 1
                            type: string
                          redirect:
                            description: 'redirect defines an optional expression
                              to determine a path to redirect to on authorization
                              failure.

                              This is useful to redirect to a sign-in page.'
                            maxLength: 16384
                            minLength: 1
                            type: string
                          responseMetadata:
                            additionalProperties:
                              description: CELExpression represents a Common Expression
                                Language (CEL) expression.
                              maxLength: 16384
                              minLength: 1
                              type: string
                            description: 'responseMetadata specifies what metadata
                              fields should be constructed *from* the authorization
                              response. These will be

                              included under the `extauthz` variable in future CEL
                              expressions. Setting this is useful to do things like
                              logging

                              usernames, without needing to include them as headers
                              to the backend (as `allowedResponseHeaders` would).'
                            maxProperties: 64
                            type: object
                        type: object
                    required:
                    - backendRef
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [grpc http] must be set
                      rule: '[has(self.grpc),has(self.http)].filter(x,x==true).size()
                        == 1'
                  extProc:
                    description: extProc specifies the external processing configuration
                      for the policy.
                    properties:
                      backendRef:
                        description: 'backendRef references the External Processor
                          server to reach.

                          Supported types: Service and Backend.'
                        properties:
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    required:
                    - backendRef
                    type: object
                  headerModifiers:
                    description: headerModifiers defines the policy to modify request
                      and response headers.
                    properties:
                      request:
                        description: Request modifies request headers.
                        properties:
                          add:
                            description: "Add adds the given header(s) (name, value)\
                              \ to the request\nbefore the action. It appends to any\
                              \ existing values associated\nwith the header name.\n\
                              \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\n\
                              Config:\n  add:\n  - name: \"my-header\"\n    value:\
                              \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                              \ foo,bar,baz"
                            items:
                              description: HTTPHeader represents an HTTP Header name
                                and value as defined by RFC 7230.
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, the first entry with

                                    an equivalent name MUST be considered for a match.
                                    Subsequent entries

                                    with an equivalent header name MUST be ignored.
                                    Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          remove:
                            description: "Remove the given header(s) from the HTTP\
                              \ request before the action. The\nvalue of Remove is\
                              \ a list of HTTP header names. Note that the header\n\
                              names are case-insensitive (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                              \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n \
                              \ my-header2: bar\n  my-header3: baz\n\nConfig:\n  remove:\
                              \ [\"my-header1\", \"my-header3\"]\n\nOutput:\n  GET\
                              \ /foo HTTP/1.1\n  my-header2: bar"
                            items:
                              type: string
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            description: "Set overwrites the request with the given\
                              \ header (name, value)\nbefore the action.\n\nInput:\n\
                              \  GET /foo HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                              \  set:\n  - name: \"my-header\"\n    value: \"bar\"\
                              \n\nOutput:\n  GET /foo HTTP/1.1\n  my-header: bar"
                            items:
                              description: HTTPHeader represents an HTTP Header name
                                and value as defined by RFC 7230.
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, the first entry with

                                    an equivalent name MUST be considered for a match.
                                    Subsequent entries

                                    with an equivalent header name MUST be ignored.
                                    Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                      response:
                        description: Response modifies response headers.
                        properties:
                          add:
                            description: "Add adds the given header(s) (name, value)\
                              \ to the request\nbefore the action. It appends to any\
                              \ existing values associated\nwith the header name.\n\
                              \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\n\
                              Config:\n  add:\n  - name: \"my-header\"\n    value:\
                              \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                              \ foo,bar,baz"
                            items:
                              description: HTTPHeader represents an HTTP Header name
                                and value as defined by RFC 7230.
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, the first entry with

                                    an equivalent name MUST be considered for a match.
                                    Subsequent entries

                                    with an equivalent header name MUST be ignored.
                                    Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          remove:
                            description: "Remove the given header(s) from the HTTP\
                              \ request before the action. The\nvalue of Remove is\
                              \ a list of HTTP header names. Note that the header\n\
                              names are case-insensitive (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                              \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n \
                              \ my-header2: bar\n  my-header3: baz\n\nConfig:\n  remove:\
                              \ [\"my-header1\", \"my-header3\"]\n\nOutput:\n  GET\
                              \ /foo HTTP/1.1\n  my-header2: bar"
                            items:
                              type: string
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            description: "Set overwrites the request with the given\
                              \ header (name, value)\nbefore the action.\n\nInput:\n\
                              \  GET /foo HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                              \  set:\n  - name: \"my-header\"\n    value: \"bar\"\
                              \n\nOutput:\n  GET /foo HTTP/1.1\n  my-header: bar"
                            items:
                              description: HTTPHeader represents an HTTP Header name
                                and value as defined by RFC 7230.
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, the first entry with

                                    an equivalent name MUST be considered for a match.
                                    Subsequent entries

                                    with an equivalent header name MUST be ignored.
                                    Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [request response] must
                        be set
                      rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                        >= 1'
                  hostRewrite:
                    description: 'hostRewrite specifies how to rewrite the Host header
                      for requests.


                      If the HTTPRoute `urlRewrite` filter already specifies a host
                      rewrite, this setting is ignored.'
                    enum:
                    - Auto
                    - None
                    properties:
                      mode:
                        description: 'mode sets the hostname rewrite mode.


                          The following may be specified:

                          * Auto: automatically set the Host header based on the destination.

                          * None: do not rewrite the Host header. The original Host
                          header will be passed through.


                          This setting defaults to Auto when connecting to hostname-based
                          Backend types, and None otherwise (for Service or

                          IP-based Backends).'
                        type: string
                    required:
                    - mode
                    type: object
                  jwtAuthentication:
                    description: jwtAuthentication authenticates users based on JWT
                      tokens.
                    properties:
                      mode:
                        default: Strict
                        description: validation mode for JWT authentication.
                        enum:
                        - Strict
                        - Optional
                        - Permissive
                        type: string
                      providers:
                        items:
                          properties:
                            audiences:
                              description: 'audiences specifies the list of allowed
                                audiences that are allowed access. This corresponds
                                to the ''aud'' claim (https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3).

                                If unset, any audience is allowed.'
                              items:
                                type: string
                              maxItems: 64
                              minItems: 1
                              type: array
                            issuer:
                              description: issuer identifies the IdP that issued the
                                JWT. This corresponds to the 'iss' claim (https://tools.ietf.org/html/rfc7519#section-4.1.1).
                              maxLength: 256
                              minLength: 1
                              type: string
                            jwks:
                              description: jwks defines the JSON Web Key Set used
                                to validate the signature of the JWT.
                              properties:
                                inline:
                                  description: inline specifies an inline JSON Web
                                    Key Set used validate the signature of the JWT.
                                  maxLength: 65536
                                  minLength: 2
                                  type: string
                                remote:
                                  description: remote specifies how to reach the JSON
                                    Web Key Set from a remote address.
                                  properties:
                                    backendRef:
                                      description: 'backendRef references the remote
                                        JWKS server to reach.

                                        Supported types are Service and (static) Backend.
                                        An AgentgatewayPolicy containing backend tls
                                        config

                                        can then be attached to the service/backend
                                        in order to set tls options for a connection
                                        to the remote jwks source.'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    cacheDuration:
                                      default: 5m
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                      - message: cacheDuration must be at least 5m.
                                        rule: duration(self) >= duration('5m')
                                    jwksPath:
                                      description: Path to IdP jwks endpoint, relative
                                        to the root, commonly ".well-known/jwks.json".
                                      maxLength: 2000
                                      minLength: 1
                                      type: string
                                  required:
                                  - backendRef
                                  - jwksPath
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [remote inline]
                                  must be set
                                rule: '[has(self.remote),has(self.inline)].filter(x,x==true).size()
                                  == 1'
                          required:
                          - issuer
                          - jwks
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                    required:
                    - providers
                    type: object
                  phase:
                    description: 'The phase to apply the traffic policy to. If the
                      phase is PreRouting, the targetRef must be a Gateway or a Listener.

                      PreRouting is typically used only when a policy needs to influence
                      the routing decision.


                      Even when using PostRouting mode, the policy can target the
                      Gateway/Listener. This is a helper for applying the policy

                      to all routes under that Gateway/Listener, and follows the merging
                      logic described above.


                      Note: PreRouting and PostRouting rules do not merge together.
                      These are independent execution phases. That is, all

                      PreRouting rules will merge and execute, then all PostRouting
                      rules will merge and execute.


                      If unset, this defaults to PostRouting.'
                    enum:
                    - PreRouting
                    - PostRouting
                    type: string
                  rateLimit:
                    description: 'rateLimit specifies the rate limiting configuration
                      for the policy.

                      This controls the rate at which requests are allowed to be processed.'
                    properties:
                      global:
                        description: Global defines a global rate limiting policy
                          using an external service.
                        properties:
                          backendRef:
                            description: 'backendRef references the Rate Limit server
                              to reach.

                              Supported types: Service and Backend.'
                            properties:
                              group:
                                default: ''
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Service
                                description: 'Kind is the Kubernetes resource kind
                                  of the referent. For example

                                  "Service".


                                  Defaults to "Service" when not specified.


                                  ExternalName services can refer to CNAME DNS records
                                  that may live

                                  outside of the cluster and as such are difficult
                                  to reason about in

                                  terms of conformance. They also may not be safe
                                  to forward to (see

                                  CVE-2021-25740 for more information). Implementations
                                  SHOULD NOT

                                  support ExternalName Services.


                                  Support: Core (Services with a type other than ExternalName)


                                  Support: Implementation-specific (Services with
                                  type ExternalName)'
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                description: 'Namespace is the namespace of the backend.
                                  When unspecified, the local

                                  namespace is inferred.


                                  Note that when a namespace different than the local
                                  namespace is specified,

                                  a ReferenceGrant object is required in the referent
                                  namespace to allow that

                                  namespace''s owner to accept the reference. See
                                  the ReferenceGrant

                                  documentation for details.


                                  Support: Core'
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                              port:
                                description: 'Port specifies the destination port
                                  number to use for this resource.

                                  Port is required when the referent is a Kubernetes
                                  Service. In this

                                  case, the port number is the service port number,
                                  not the target port.

                                  For other resources, destination port might be derived
                                  from the referent

                                  resource or this field.'
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                            required:
                            - name
                            type: object
                            x-kubernetes-validations:
                            - message: Must have port for Service reference
                              rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                ? has(self.port) : true'
                          descriptors:
                            description: 'Descriptors define the dimensions for rate
                              limiting. These values are passed to the rate limit
                              service which applies

                              configured limits based on them. Each descriptor represents
                              a single rate limit rule with one or more entries.'
                            items:
                              properties:
                                entries:
                                  description: entries are the individual components
                                    that make up this descriptor.
                                  items:
                                    description: A descriptor entry defines a single
                                      entry in a rate limit descriptor.
                                    properties:
                                      expression:
                                        description: 'expression is a Common Expression
                                          Language (CEL) expression that defines the
                                          value for the descriptor.


                                          For example, to rate limit based on the
                                          Client IP: `source.address`.


                                          See https://agentgateway.dev/docs/reference/cel/
                                          for more info.'
                                        maxLength: 16384
                                        minLength: 1
                                        type: string
                                      name:
                                        description: name specifies the name of the
                                          descriptor.
                                        maxLength: 64
                                        minLength: 1
                                        type: string
                                    required:
                                    - expression
                                    - name
                                    type: object
                                  maxItems: 16
                                  minItems: 1
                                  type: array
                                unit:
                                  description: unit defines what to use as the cost
                                    function. If unspecified, Requests is used.
                                  enum:
                                  - Requests
                                  - Tokens
                                  type: string
                              required:
                              - entries
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                          domain:
                            description: 'domain specifies the domain under which
                              this limit should apply.

                              This is an arbitrary string that enables a rate limit
                              server to distinguish between different applications.'
                            maxLength: 256
                            minLength: 1
                            type: string
                        required:
                        - backendRef
                        - descriptors
                        - domain
                        type: object
                      local:
                        description: Local defines a local rate limiting policy.
                        items:
                          description: 'Policy for local rate limiting. Local rate
                            limits are handled locally on a per-proxy basis, without
                            co-ordination

                            between instances of the proxy.'
                          properties:
                            burst:
                              description: burst specifies an allowance of requests
                                above the request-per-unit that should be allowed
                                within a short period of time.
                              format: int32
                              type: integer
                            requests:
                              description: 'requests specifies the number of HTTP
                                requests per unit of time that are allowed. Requests
                                exceeding this limit will fail with

                                a 429 error.'
                              format: int32
                              minimum: 1
                              type: integer
                            tokens:
                              description: 'tokens specifies the number of LLM tokens
                                per unit of time that are allowed. Requests exceeding
                                this limit will fail

                                with a 429 error.


                                Both input and output tokens are counted. However,
                                token counts are not known until the request completes.
                                As a

                                result, token-based rate limits will apply to future
                                requests only.'
                              format: int32
                              minimum: 1
                              type: integer
                            unit:
                              description: unit specifies the unit of time that requests
                                are limited based on.
                              enum:
                              - Seconds
                              - Minutes
                              - Hours
                              type: string
                          required:
                          - unit
                          type: object
                          x-kubernetes-validations:
                          - message: exactly one of the fields in [requests tokens]
                              must be set
                            rule: '[has(self.requests),has(self.tokens)].filter(x,x==true).size()
                              == 1'
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [local global] must be
                        set
                      rule: '[has(self.local),has(self.global)].filter(x,x==true).size()
                        >= 1'
                  retry:
                    description: retry defines the policy for retrying requests.
                    properties:
                      attempts:
                        description: 'Attempts specifies the maximum number of times
                          an individual request

                          from the gateway to a backend should be retried.


                          If the maximum number of retries has been attempted without
                          a successful

                          response from the backend, the Gateway MUST return an error.


                          When this field is unspecified, the number of times to attempt
                          to retry

                          a backend request is implementation-specific.


                          Support: Extended'
                        type: integer
                      backoff:
                        description: 'Backoff specifies the minimum duration a Gateway
                          should wait between

                          retry attempts and is represented in Gateway API Duration
                          formatting.


                          For example, setting the `rules[].retry.backoff` field to
                          the value

                          `100ms` will cause a backend request to first be retried
                          approximately

                          100 milliseconds after timing out or receiving a response
                          code configured

                          to be retryable.


                          An implementation MAY use an exponential or alternative
                          backoff strategy

                          for subsequent retry attempts, MAY cap the maximum backoff
                          duration to

                          some amount greater than the specified minimum, and MAY
                          add arbitrary

                          jitter to stagger requests, as long as unsuccessful backend
                          requests are

                          not retried before the configured minimum duration.


                          If a Request timeout (`rules[].timeouts.request`) is configured
                          on the

                          route, the entire duration of the initial request and any
                          retry attempts

                          MUST not exceed the Request timeout duration. If any retry
                          attempts are

                          still in progress when the Request timeout duration has
                          been reached,

                          these SHOULD be canceled if possible and the Gateway MUST
                          immediately

                          return a timeout error.


                          If a BackendRequest timeout (`rules[].timeouts.backendRequest`)
                          is

                          configured on the route, any retry attempts which reach
                          the configured

                          BackendRequest timeout duration without a response SHOULD
                          be canceled if

                          possible and the Gateway should wait for at least the specified
                          backoff

                          duration before attempting to retry the backend request
                          again.


                          If a BackendRequest timeout is _not_ configured on the route,
                          retry

                          attempts MAY time out after an implementation default duration,
                          or MAY

                          remain pending until a configured Request timeout or implementation

                          default duration for total request time is reached.


                          When this field is unspecified, the time to wait between
                          retry attempts

                          is implementation-specific.


                          Support: Extended'
                        pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                        type: string
                      codes:
                        description: 'Codes defines the HTTP response status codes
                          for which a backend request

                          should be retried.


                          Support: Extended'
                        items:
                          description: 'HTTPRouteRetryStatusCode defines an HTTP response
                            status code for

                            which a backend request should be retried.


                            Implementations MUST support the following status codes
                            as retryable:


                            * 500

                            * 502

                            * 503

                            * 504


                            Implementations MAY support specifying additional discrete
                            values in the

                            500-599 range.


                            Implementations MAY support specifying discrete values
                            in the 400-499 range,

                            which are often inadvisable to retry.


                            <gateway:experimental>'
                          maximum: 599
                          minimum: 400
                          type: integer
                        type: array
                        x-kubernetes-list-type: atomic
                    type: object
                  timeouts:
                    description: 'timeouts defines the timeouts for requests

                      It is applicable to HTTPRoutes and ignored for other targeted
                      kinds.'
                    properties:
                      request:
                        description: 'request specifies a timeout for an individual
                          request from the gateway to a backend. This covers the time
                          from when

                          the request first starts being sent from the gateway to
                          when the full response has been received from the backend.'
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: request must be at least 1ms
                          rule: duration(self) >= duration('100ms')
                    type: object
                  transformation:
                    description: 'transformation is used to mutate and transform requests
                      and responses

                      before forwarding them to the destination.'
                    properties:
                      request:
                        description: request is used to modify the request path.
                        properties:
                          add:
                            description: 'add is a list of headers to add to the request
                              and what that value should be set to. If there is already
                              a header

                              with these values then append the value as an extra
                              entry.'
                            items:
                              properties:
                                name:
                                  description: the name of the header to add.
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  description: value is the CEL expression to apply
                                    to generate the output value for the header.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          body:
                            description: body controls manipulation of the HTTP body.
                            maxLength: 16384
                            minLength: 1
                            type: string
                          remove:
                            description: Remove is a list of header names to remove
                              from the request/response.
                            items:
                              description: An HTTP Header Name.
                              maxLength: 256
                              minLength: 1
                              pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                              x-kubernetes-validations:
                              - message: pseudo-headers must be one of :authority,
                                  :method, :path, :scheme, or :status
                                rule: '!self.startsWith('':'') || self in ['':authority'',
                                  '':method'', '':path'', '':scheme'', '':status'']'
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            description: set is a list of headers and the value they
                              should be set to.
                            items:
                              properties:
                                name:
                                  description: the name of the header to add.
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  description: value is the CEL expression to apply
                                    to generate the output value for the header.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [set add remove body]
                            must be set
                          rule: '[has(self.set),has(self.add),has(self.remove),has(self.body)].filter(x,x==true).size()
                            >= 1'
                      response:
                        description: response is used to modify the response path.
                        properties:
                          add:
                            description: 'add is a list of headers to add to the request
                              and what that value should be set to. If there is already
                              a header

                              with these values then append the value as an extra
                              entry.'
                            items:
                              properties:
                                name:
                                  description: the name of the header to add.
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  description: value is the CEL expression to apply
                                    to generate the output value for the header.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          body:
                            description: body controls manipulation of the HTTP body.
                            maxLength: 16384
                            minLength: 1
                            type: string
                          remove:
                            description: Remove is a list of header names to remove
                              from the request/response.
                            items:
                              description: An HTTP Header Name.
                              maxLength: 256
                              minLength: 1
                              pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                              x-kubernetes-validations:
                              - message: pseudo-headers must be one of :authority,
                                  :method, :path, :scheme, or :status
                                rule: '!self.startsWith('':'') || self in ['':authority'',
                                  '':method'', '':path'', '':scheme'', '':status'']'
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            description: set is a list of headers and the value they
                              should be set to.
                            items:
                              properties:
                                name:
                                  description: the name of the header to add.
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  description: value is the CEL expression to apply
                                    to generate the output value for the header.
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [set add remove body]
                            must be set
                          rule: '[has(self.set),has(self.add),has(self.remove),has(self.body)].filter(x,x==true).size()
                            >= 1'
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [request response] must
                        be set
                      rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                        >= 1'
                type: object
                x-kubernetes-validations:
                - message: phase PreRouting only supports extAuth, transformation,
                    and extProc
                  rule: 'has(self.phase) && self.phase == ''PreRouting'' ? !has(self.rateLimit)
                    && !has(self.cors) && !has(self.csrf) && !has(self.headerModifiers)
                    && !has(self.hostRewrite) && !has(self.timeouts) && !has(self.retry)
                    && !has(self.authorization): true'
            type: object
            x-kubernetes-validations:
            - message: At least one of traffic, frontend, or backend must be provided.
              rule: has(self.traffic) || has(self.frontend) || has(self.backend)
            - message: backend.mcp may not be used with a Service target
              rule: '!has(self.backend) || !has(self.backend.mcp) || ((!has(self.targetRefs)
                || !self.targetRefs.exists(t, t.kind == ''Service'')) && (!has(self.targetSelectors)
                || !self.targetSelectors.exists(t, t.kind == ''Service'')))'
            - message: backend.ai may not be used with a Service target
              rule: '!has(self.backend) || !has(self.backend.ai) || ((!has(self.targetRefs)
                || !self.targetRefs.exists(t, t.kind == ''Service'')) && (!has(self.targetSelectors)
                || !self.targetSelectors.exists(t, t.kind == ''Service'')))'
            - message: the 'frontend' field can only target a Gateway
              rule: 'has(self.frontend) && has(self.targetRefs) ? self.targetRefs.all(t,
                t.kind == ''Gateway'' && !has(t.sectionName)) : true'
            - message: the 'frontend' field can only target a Gateway
              rule: 'has(self.frontend) && has(self.targetSelectors) ? self.targetSelectors.all(t,
                t.kind == ''Gateway'' && !has(t.sectionName)) : true'
            - message: the 'traffic' field can only target a Gateway, XListenerSet,
                or HTTPRoute
              rule: 'has(self.traffic) && has(self.targetRefs) ? self.targetRefs.all(t,
                t.kind in [''Gateway'', ''HTTPRoute'', ''XListenerSet'']) : true'
            - message: the 'traffic' field can only target a Gateway, XListenerSet,
                or HTTPRoute
              rule: 'has(self.traffic) && has(self.targetSelectors) ? self.targetSelectors.all(t,
                t.kind in [''Gateway'', ''HTTPRoute'', ''XListenerSet'']) : true'
            - message: the 'traffic.phase=PreRouting' field can only target a Gateway
                or XListenerSet
              rule: 'has(self.targetRefs) && has(self.traffic) && has(self.traffic.phase)
                && self.traffic.phase == ''PreRouting'' ? self.targetRefs.all(t, t.kind
                in [''Gateway'', ''XListenerSet'']) : true'
            - message: the 'traffic.phase=PreRouting' field can only target a Gateway
                or XListenerSet
              rule: 'has(self.targetSelectors) && has(self.traffic) && has(self.traffic.phase)
                && self.traffic.phase == ''PreRouting'' ? self.targetSelectors.all(t,
                t.kind in [''Gateway'', ''XListenerSet'']) : true'
            - message: exactly one of the fields in [targetRefs targetSelectors] must
                be set
              rule: '[has(self.targetRefs),has(self.targetSelectors)].filter(x,x==true).size()
                == 1'
          status:
            description: status defines the current state of AgentgatewayPolicy.
            properties:
              ancestors:
                description: 'Ancestors is a list of ancestor resources (usually Gateways)
                  that are

                  associated with the policy, and the status of the policy with respect
                  to

                  each ancestor. When this policy attaches to a parent, the controller
                  that

                  manages the parent and the ancestors MUST add an entry to this list
                  when

                  the controller first sees the policy and SHOULD update the entry
                  as

                  appropriate when the relevant ancestor is modified.


                  Note that choosing the relevant ancestor is left to the Policy designers;

                  an important part of Policy design is designing the right object
                  level at

                  which to namespace this status.


                  Note also that implementations MUST ONLY populate ancestor status
                  for

                  the Ancestor resources they are responsible for. Implementations
                  MUST

                  use the ControllerName field to uniquely identify the entries in
                  this list

                  that they are responsible for.


                  Note that to achieve this, the list of PolicyAncestorStatus structs

                  MUST be treated as a map with a composite key, made up of the AncestorRef

                  and ControllerName fields combined.


                  A maximum of 16 ancestors will be represented in this list. An empty
                  list

                  means the Policy is not relevant for any ancestors.


                  If this slice is full, implementations MUST NOT add further entries.

                  Instead they MUST consider the policy unimplementable and signal
                  that

                  on any related resources such as the ancestor that would be referenced

                  here. For example, if this list was full on BackendTLSPolicy, no

                  additional Gateways would be able to reference the Service targeted
                  by

                  the BackendTLSPolicy.'
                items:
                  description: 'PolicyAncestorStatus describes the status of a route
                    with respect to an

                    associated Ancestor.


                    Ancestors refer to objects that are either the Target of a policy
                    or above it

                    in terms of object hierarchy. For example, if a policy targets
                    a Service, the

                    Policy''s Ancestors are, in order, the Service, the HTTPRoute,
                    the Gateway, and

                    the GatewayClass. Almost always, in this hierarchy, the Gateway
                    will be the most

                    useful object to place Policy status on, so we recommend that
                    implementations

                    SHOULD use Gateway as the PolicyAncestorStatus object unless the
                    designers

                    have a _very_ good reason otherwise.


                    In the context of policy attachment, the Ancestor is used to distinguish
                    which

                    resource results in a distinct application of this policy. For
                    example, if a policy

                    targets a Service, it may have a distinct result per attached
                    Gateway.


                    Policies targeting the same resource may have different effects
                    depending on the

                    ancestors of those resources. For example, different Gateways
                    targeting the same

                    Service may have different capabilities, especially if they have
                    different underlying

                    implementations.


                    For example, in BackendTLSPolicy, the Policy attaches to a Service
                    that is

                    used as a backend in a HTTPRoute that is itself attached to a
                    Gateway.

                    In this case, the relevant object for status is the Gateway, and
                    that is the

                    ancestor object referred to in this status.


                    Note that a parent is also an ancestor, so for objects where the
                    parent is the

                    relevant object for status, this struct SHOULD still be used.


                    This struct is intended to be used in a slice that''s effectively
                    a map,

                    with a composite key made up of the AncestorRef and the ControllerName.'
                  properties:
                    ancestorRef:
                      description: 'AncestorRef corresponds with a ParentRef in the
                        spec that this

                        PolicyAncestorStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            <gateway:experimental:description>

                            ParentRefs from a Route to a Service in the same namespace
                            are "producer"

                            routes, which apply default routing rules to inbound connections
                            from

                            any namespace to the Service.


                            ParentRefs from a Route to a Service in a different namespace
                            are

                            "consumer" routes, and these routing rules are only applied
                            to outbound

                            connections originating from the same namespace as the
                            Route, for which

                            the intended destination of the connections are a Service
                            targeted as a

                            ParentRef of the Route.

                            </gateway:experimental:description>


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            <gateway:experimental:description>

                            When the parent resource is a Service, this targets a
                            specific port in the

                            Service spec. When both Port (experimental) and SectionName
                            are specified,

                            the name and port of the selected port must match both
                            specified values.

                            </gateway:experimental:description>


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      description: "Conditions describes the status of the Policy\
                        \ with respect to the given Ancestor.\n\n<gateway:util:excludeFromCRD>\n\
                        \nNotes for implementors:\n\nConditions are a listType `map`,\
                        \ which means that they function like a\nmap with a key of\
                        \ the `type` field _in the k8s apiserver_.\n\nThis means that\
                        \ implementations must obey some rules when updating this\n\
                        section.\n\n* Implementations MUST perform a read-modify-write\
                        \ cycle on this field\n  before modifying it. That is, when\
                        \ modifying this field, implementations\n  must be confident\
                        \ they have fetched the most recent version of this field,\n\
                        \  and ensure that changes they make are on that recent version.\n\
                        * Implementations MUST NOT remove or reorder Conditions that\
                        \ they are not\n  directly responsible for. For example, if\
                        \ an implementation sees a Condition\n  with type `special.io/SomeField`,\
                        \ it MUST NOT remove, change or update that\n  Condition.\n\
                        * Implementations MUST always _merge_ changes into Conditions\
                        \ of the same Type,\n  rather than creating more than one\
                        \ Condition of the same Type.\n* Implementations MUST always\
                        \ update the `observedGeneration` field of the\n  Condition\
                        \ to the `metadata.generation` of the Gateway at the time\
                        \ of update creation.\n* If the `observedGeneration` of a\
                        \ Condition is _greater than_ the value the\n  implementation\
                        \ knows about, then it MUST NOT perform the update on that\
                        \ Condition,\n  but must wait for a future reconciliation\
                        \ and status update. (The assumption is that\n  the implementation's\
                        \ copy of the object is stale and an update will be re-triggered\n\
                        \  if relevant.)\n\n</gateway:util:excludeFromCRD>"
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - conditions
                  - controllerName
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
            required:
            - ancestors
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  labels:
    gateway.networking.k8s.io/policy: Direct
  name: backendtlspolicies.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: BackendTLSPolicy
    listKind: BackendTLSPolicyList
    plural: backendtlspolicies
    shortNames:
    - btlspolicy
    singular: backendtlspolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: 'BackendTLSPolicy provides a way to configure how a Gateway

          connects to a Backend via TLS.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of BackendTLSPolicy.
            properties:
              options:
                additionalProperties:
                  description: 'AnnotationValue is the value of an annotation in Gateway
                    API. This is used

                    for validation of maps such as TLS options. This roughly matches
                    Kubernetes

                    annotation validation, although the length validation in that
                    case is based

                    on the entire size of the annotations struct.'
                  maxLength: 4096
                  minLength: 0
                  type: string
                description: 'Options are a list of key/value pairs to enable extended
                  TLS

                  configuration for each implementation. For example, configuring
                  the

                  minimum TLS version or supported cipher suites.


                  A set of common keys MAY be defined by the API in the future. To
                  avoid

                  any ambiguity, implementation-specific definitions MUST use

                  domain-prefixed names, such as `example.com/my-custom-option`.

                  Un-prefixed names are reserved for key names defined by Gateway
                  API.


                  Support: Implementation-specific'
                maxProperties: 16
                type: object
              targetRefs:
                description: "TargetRefs identifies an API object to apply the policy\
                  \ to.\nOnly Services have Extended support. Implementations MAY\
                  \ support\nadditional objects, with Implementation Specific support.\n\
                  Note that this config applies to the entire referenced resource\n\
                  by default, but this default may change in the future to provide\n\
                  a more granular application of the policy.\n\nTargetRefs must be\
                  \ _distinct_. This means either that:\n\n* They select different\
                  \ targets. If this is the case, then targetRef\n  entries are distinct.\
                  \ In terms of fields, this means that the\n  multi-part key defined\
                  \ by `group`, `kind`, and `name` must\n  be unique across all targetRef\
                  \ entries in the BackendTLSPolicy.\n* They select different sectionNames\
                  \ in the same target.\n\nWhen more than one BackendTLSPolicy selects\
                  \ the same target and\nsectionName, implementations MUST determine\
                  \ precedence using the\nfollowing criteria, continuing on ties:\n\
                  \n* The older policy by creation timestamp takes precedence. For\n\
                  \  example, a policy with a creation timestamp of \"2021-07-15\n\
                  \  01:02:03\" MUST be given precedence over a policy with a\n  creation\
                  \ timestamp of \"2021-07-15 01:02:04\".\n* The policy appearing\
                  \ first in alphabetical order by {name}.\n  For example, a policy\
                  \ named `bar` is given precedence over a\n  policy named `baz`.\n\
                  \nFor any BackendTLSPolicy that does not take precedence, the\n\
                  implementation MUST ensure the `Accepted` Condition is set to\n\
                  `status: False`, with Reason `Conflicted`.\n\nSupport: Extended\
                  \ for Kubernetes Service\n\nSupport: Implementation-specific for\
                  \ any other resource"
                items:
                  description: 'LocalPolicyTargetReferenceWithSectionName identifies
                    an API object to apply a

                    direct policy to. This should be used as part of Policy resources
                    that can

                    target single resources. For more information on how this policy
                    attachment

                    mode works, and a sample Policy resource, refer to the policy
                    attachment

                    documentation for Gateway API.


                    Note: This should only be used for direct policy attachment when
                    references

                    to SectionName are actually needed. In all other cases,

                    LocalPolicyTargetReference should be used.'
                  properties:
                    group:
                      description: Group is the group of the target resource.
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: Kind is kind of the target resource.
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: Name is the name of the target resource.
                      maxLength: 253
                      minLength: 1
                      type: string
                    sectionName:
                      description: 'SectionName is the name of a section within the
                        target resource. When

                        unspecified, this targetRef targets the entire resource. In
                        the following

                        resources, SectionName is interpreted as the following:


                        * Gateway: Listener name

                        * HTTPRoute: HTTPRouteRule name

                        * Service: Port name


                        If a SectionName is specified, but does not exist on the targeted
                        object,

                        the Policy must fail to attach, and the policy implementation
                        should record

                        a `ResolvedRefs` or similar Condition in the Policy''s status.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: sectionName must be specified when targetRefs includes
                    2 or more references to the same target
                  rule: 'self.all(p1, self.all(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name ? ((!has(p1.sectionName) || p1.sectionName
                    == '''') == (!has(p2.sectionName) || p2.sectionName == ''''))
                    : true))'
                - message: sectionName must be unique when targetRefs includes 2 or
                    more references to the same target
                  rule: self.all(p1, self.exists_one(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.sectionName) ||
                    p1.sectionName == '') && (!has(p2.sectionName) || p2.sectionName
                    == '')) || (has(p1.sectionName) && has(p2.sectionName) && p1.sectionName
                    == p2.sectionName))))
              validation:
                description: Validation contains backend TLS validation configuration.
                properties:
                  caCertificateRefs:
                    description: "CACertificateRefs contains one or more references\
                      \ to Kubernetes objects that\ncontain a PEM-encoded TLS CA certificate\
                      \ bundle, which is used to\nvalidate a TLS handshake between\
                      \ the Gateway and backend Pod.\n\nIf CACertificateRefs is empty\
                      \ or unspecified, then WellKnownCACertificates must be\nspecified.\
                      \ Only one of CACertificateRefs or WellKnownCACertificates may\
                      \ be specified,\nnot both. If CACertificateRefs is empty or\
                      \ unspecified, the configuration for\nWellKnownCACertificates\
                      \ MUST be honored instead if supported by the implementation.\n\
                      \nA CACertificateRef is invalid if:\n\n* It refers to a resource\
                      \ that cannot be resolved (e.g., the referenced resource\n \
                      \ does not exist) or is misconfigured (e.g., a ConfigMap does\
                      \ not contain a key\n  named `ca.crt`). In this case, the Reason\
                      \ must be set to `InvalidCACertificateRef`\n  and the Message\
                      \ of the Condition must indicate which reference is invalid\
                      \ and why.\n\n* It refers to an unknown or unsupported kind\
                      \ of resource. In this case, the Reason\n  must be set to `InvalidKind`\
                      \ and the Message of the Condition must explain which\n  kind\
                      \ of resource is unknown or unsupported.\n\n* It refers to a\
                      \ resource in another namespace. This may change in future\n\
                      \  spec updates.\n\nImplementations MAY choose to perform further\
                      \ validation of the certificate\ncontent (e.g., checking expiry\
                      \ or enforcing specific formats). In such cases,\nan implementation-specific\
                      \ Reason and Message must be set for the invalid reference.\n\
                      \nIn all cases, the implementation MUST ensure the `ResolvedRefs`\
                      \ Condition on\nthe BackendTLSPolicy is set to `status: False`,\
                      \ with a Reason and Message\nthat indicate the cause of the\
                      \ error. Connections using an invalid\nCACertificateRef MUST\
                      \ fail, and the client MUST receive an HTTP 5xx error\nresponse.\
                      \ If ALL CACertificateRefs are invalid, the implementation MUST\
                      \ also\nensure the `Accepted` Condition on the BackendTLSPolicy\
                      \ is set to\n`status: False`, with a Reason `NoValidCACertificate`.\n\
                      \nA single CACertificateRef to a Kubernetes ConfigMap kind has\
                      \ \"Core\" support.\nImplementations MAY choose to support attaching\
                      \ multiple certificates to\na backend, but this behavior is\
                      \ implementation-specific.\n\nSupport: Core - An optional single\
                      \ reference to a Kubernetes ConfigMap,\nwith the CA certificate\
                      \ in a key named `ca.crt`.\n\nSupport: Implementation-specific\
                      \ - More than one reference, other kinds\nof resources, or a\
                      \ single reference that includes multiple certificates."
                    items:
                      description: 'LocalObjectReference identifies an API object
                        within the namespace of the

                        referrer.

                        The API object must be valid in the cluster; the Group and
                        Kind must

                        be registered in the cluster for this reference to be valid.


                        References to objects with invalid Group and Kind are not
                        valid, and must

                        be rejected by the implementation, with appropriate Conditions
                        set

                        on the containing object.'
                      properties:
                        group:
                          description: 'Group is the group of the referent. For example,
                            "gateway.networking.k8s.io".

                            When unspecified or empty string, core API group is inferred.'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          description: Kind is kind of the referent. For example "HTTPRoute"
                            or "Service".
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: Name is the name of the referent.
                          maxLength: 253
                          minLength: 1
                          type: string
                      required:
                      - group
                      - kind
                      - name
                      type: object
                    maxItems: 8
                    type: array
                    x-kubernetes-list-type: atomic
                  hostname:
                    description: "Hostname is used for two purposes in the connection\
                      \ between Gateways and\nbackends:\n\n1. Hostname MUST be used\
                      \ as the SNI to connect to the backend (RFC 6066).\n2. Hostname\
                      \ MUST be used for authentication and MUST match the certificate\n\
                      \   served by the matching backend, unless SubjectAltNames is\
                      \ specified.\n3. If SubjectAltNames are specified, Hostname\
                      \ can be used for certificate selection\n   but MUST NOT be\
                      \ used for authentication. If you want to use the value\n  \
                      \ of the Hostname field for authentication, you MUST add it\
                      \ to the SubjectAltNames list.\n\nSupport: Core"
                    maxLength: 253
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  subjectAltNames:
                    description: 'SubjectAltNames contains one or more Subject Alternative
                      Names.

                      When specified the certificate served from the backend MUST

                      have at least one Subject Alternate Name matching one of the
                      specified SubjectAltNames.


                      Support: Extended'
                    items:
                      description: SubjectAltName represents Subject Alternative Name.
                      properties:
                        hostname:
                          description: 'Hostname contains Subject Alternative Name
                            specified in DNS name format.

                            Required when Type is set to Hostname, ignored otherwise.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        type:
                          description: 'Type determines the format of the Subject
                            Alternative Name. Always required.


                            Support: Core'
                          enum:
                          - Hostname
                          - URI
                          type: string
                        uri:
                          description: 'URI contains Subject Alternative Name specified
                            in a full URI format.

                            It MUST include both a scheme (e.g., "http" or "ftp")
                            and a scheme-specific-part.

                            Common values include SPIFFE IDs like "spiffe://mycluster.example.com/ns/myns/sa/svc1sa".

                            Required when Type is set to URI, ignored otherwise.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^(([^:/?#]+):)(//([^/?#]*))([^?#]*)(\?([^#]*))?(#(.*))?
                          type: string
                      required:
                      - type
                      type: object
                      x-kubernetes-validations:
                      - message: SubjectAltName element must contain Hostname, if
                          Type is set to Hostname
                        rule: '!(self.type == "Hostname" && (!has(self.hostname) ||
                          self.hostname == ""))'
                      - message: SubjectAltName element must not contain Hostname,
                          if Type is not set to Hostname
                        rule: '!(self.type != "Hostname" && has(self.hostname) &&
                          self.hostname != "")'
                      - message: SubjectAltName element must contain URI, if Type
                          is set to URI
                        rule: '!(self.type == "URI" && (!has(self.uri) || self.uri
                          == ""))'
                      - message: SubjectAltName element must not contain URI, if Type
                          is not set to URI
                        rule: '!(self.type != "URI" && has(self.uri) && self.uri !=
                          "")'
                    maxItems: 5
                    type: array
                    x-kubernetes-list-type: atomic
                  wellKnownCACertificates:
                    description: 'WellKnownCACertificates specifies whether system
                      CA certificates may be used in

                      the TLS handshake between the gateway and backend pod.


                      If WellKnownCACertificates is unspecified or empty (""), then
                      CACertificateRefs

                      must be specified with at least one entry for a valid configuration.
                      Only one of

                      CACertificateRefs or WellKnownCACertificates may be specified,
                      not both.

                      If an implementation does not support the WellKnownCACertificates
                      field, or

                      the supplied value is not recognized, the implementation MUST
                      ensure the

                      `Accepted` Condition on the BackendTLSPolicy is set to `status:
                      False`, with

                      a Reason `Invalid`.


                      Support: Implementation-specific'
                    enum:
                    - System
                    type: string
                required:
                - hostname
                type: object
                x-kubernetes-validations:
                - message: must not contain both CACertificateRefs and WellKnownCACertificates
                  rule: '!(has(self.caCertificateRefs) && size(self.caCertificateRefs)
                    > 0 && has(self.wellKnownCACertificates) && self.wellKnownCACertificates
                    != "")'
                - message: must specify either CACertificateRefs or WellKnownCACertificates
                  rule: (has(self.caCertificateRefs) && size(self.caCertificateRefs)
                    > 0 || has(self.wellKnownCACertificates) && self.wellKnownCACertificates
                    != "")
            required:
            - targetRefs
            - validation
            type: object
          status:
            description: Status defines the current state of BackendTLSPolicy.
            properties:
              ancestors:
                description: 'Ancestors is a list of ancestor resources (usually Gateways)
                  that are

                  associated with the policy, and the status of the policy with respect
                  to

                  each ancestor. When this policy attaches to a parent, the controller
                  that

                  manages the parent and the ancestors MUST add an entry to this list
                  when

                  the controller first sees the policy and SHOULD update the entry
                  as

                  appropriate when the relevant ancestor is modified.


                  Note that choosing the relevant ancestor is left to the Policy designers;

                  an important part of Policy design is designing the right object
                  level at

                  which to namespace this status.


                  Note also that implementations MUST ONLY populate ancestor status
                  for

                  the Ancestor resources they are responsible for. Implementations
                  MUST

                  use the ControllerName field to uniquely identify the entries in
                  this list

                  that they are responsible for.


                  Note that to achieve this, the list of PolicyAncestorStatus structs

                  MUST be treated as a map with a composite key, made up of the AncestorRef

                  and ControllerName fields combined.


                  A maximum of 16 ancestors will be represented in this list. An empty
                  list

                  means the Policy is not relevant for any ancestors.


                  If this slice is full, implementations MUST NOT add further entries.

                  Instead they MUST consider the policy unimplementable and signal
                  that

                  on any related resources such as the ancestor that would be referenced

                  here. For example, if this list was full on BackendTLSPolicy, no

                  additional Gateways would be able to reference the Service targeted
                  by

                  the BackendTLSPolicy.'
                items:
                  description: 'PolicyAncestorStatus describes the status of a route
                    with respect to an

                    associated Ancestor.


                    Ancestors refer to objects that are either the Target of a policy
                    or above it

                    in terms of object hierarchy. For example, if a policy targets
                    a Service, the

                    Policy''s Ancestors are, in order, the Service, the HTTPRoute,
                    the Gateway, and

                    the GatewayClass. Almost always, in this hierarchy, the Gateway
                    will be the most

                    useful object to place Policy status on, so we recommend that
                    implementations

                    SHOULD use Gateway as the PolicyAncestorStatus object unless the
                    designers

                    have a _very_ good reason otherwise.


                    In the context of policy attachment, the Ancestor is used to distinguish
                    which

                    resource results in a distinct application of this policy. For
                    example, if a policy

                    targets a Service, it may have a distinct result per attached
                    Gateway.


                    Policies targeting the same resource may have different effects
                    depending on the

                    ancestors of those resources. For example, different Gateways
                    targeting the same

                    Service may have different capabilities, especially if they have
                    different underlying

                    implementations.


                    For example, in BackendTLSPolicy, the Policy attaches to a Service
                    that is

                    used as a backend in a HTTPRoute that is itself attached to a
                    Gateway.

                    In this case, the relevant object for status is the Gateway, and
                    that is the

                    ancestor object referred to in this status.


                    Note that a parent is also an ancestor, so for objects where the
                    parent is the

                    relevant object for status, this struct SHOULD still be used.


                    This struct is intended to be used in a slice that''s effectively
                    a map,

                    with a composite key made up of the AncestorRef and the ControllerName.'
                  properties:
                    ancestorRef:
                      description: 'AncestorRef corresponds with a ParentRef in the
                        spec that this

                        PolicyAncestorStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      description: Conditions describes the status of the Policy with
                        respect to the given Ancestor.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - conditions
                  - controllerName
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
            required:
            - ancestors
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - deprecated: true
    deprecationWarning: The v1alpha3 version of BackendTLSPolicy has been deprecated
      and will be removed in a future release of the API. Please upgrade to v1.
    name: v1alpha3
    schema:
      openAPIV3Schema:
        description: 'BackendTLSPolicy provides a way to configure how a Gateway

          connects to a Backend via TLS.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of BackendTLSPolicy.
            properties:
              options:
                additionalProperties:
                  description: 'AnnotationValue is the value of an annotation in Gateway
                    API. This is used

                    for validation of maps such as TLS options. This roughly matches
                    Kubernetes

                    annotation validation, although the length validation in that
                    case is based

                    on the entire size of the annotations struct.'
                  maxLength: 4096
                  minLength: 0
                  type: string
                description: 'Options are a list of key/value pairs to enable extended
                  TLS

                  configuration for each implementation. For example, configuring
                  the

                  minimum TLS version or supported cipher suites.


                  A set of common keys MAY be defined by the API in the future. To
                  avoid

                  any ambiguity, implementation-specific definitions MUST use

                  domain-prefixed names, such as `example.com/my-custom-option`.

                  Un-prefixed names are reserved for key names defined by Gateway
                  API.


                  Support: Implementation-specific'
                maxProperties: 16
                type: object
              targetRefs:
                description: "TargetRefs identifies an API object to apply the policy\
                  \ to.\nOnly Services have Extended support. Implementations MAY\
                  \ support\nadditional objects, with Implementation Specific support.\n\
                  Note that this config applies to the entire referenced resource\n\
                  by default, but this default may change in the future to provide\n\
                  a more granular application of the policy.\n\nTargetRefs must be\
                  \ _distinct_. This means either that:\n\n* They select different\
                  \ targets. If this is the case, then targetRef\n  entries are distinct.\
                  \ In terms of fields, this means that the\n  multi-part key defined\
                  \ by `group`, `kind`, and `name` must\n  be unique across all targetRef\
                  \ entries in the BackendTLSPolicy.\n* They select different sectionNames\
                  \ in the same target.\n\nWhen more than one BackendTLSPolicy selects\
                  \ the same target and\nsectionName, implementations MUST determine\
                  \ precedence using the\nfollowing criteria, continuing on ties:\n\
                  \n* The older policy by creation timestamp takes precedence. For\n\
                  \  example, a policy with a creation timestamp of \"2021-07-15\n\
                  \  01:02:03\" MUST be given precedence over a policy with a\n  creation\
                  \ timestamp of \"2021-07-15 01:02:04\".\n* The policy appearing\
                  \ first in alphabetical order by {name}.\n  For example, a policy\
                  \ named `bar` is given precedence over a\n  policy named `baz`.\n\
                  \nFor any BackendTLSPolicy that does not take precedence, the\n\
                  implementation MUST ensure the `Accepted` Condition is set to\n\
                  `status: False`, with Reason `Conflicted`.\n\nSupport: Extended\
                  \ for Kubernetes Service\n\nSupport: Implementation-specific for\
                  \ any other resource"
                items:
                  description: 'LocalPolicyTargetReferenceWithSectionName identifies
                    an API object to apply a

                    direct policy to. This should be used as part of Policy resources
                    that can

                    target single resources. For more information on how this policy
                    attachment

                    mode works, and a sample Policy resource, refer to the policy
                    attachment

                    documentation for Gateway API.


                    Note: This should only be used for direct policy attachment when
                    references

                    to SectionName are actually needed. In all other cases,

                    LocalPolicyTargetReference should be used.'
                  properties:
                    group:
                      description: Group is the group of the target resource.
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: Kind is kind of the target resource.
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: Name is the name of the target resource.
                      maxLength: 253
                      minLength: 1
                      type: string
                    sectionName:
                      description: 'SectionName is the name of a section within the
                        target resource. When

                        unspecified, this targetRef targets the entire resource. In
                        the following

                        resources, SectionName is interpreted as the following:


                        * Gateway: Listener name

                        * HTTPRoute: HTTPRouteRule name

                        * Service: Port name


                        If a SectionName is specified, but does not exist on the targeted
                        object,

                        the Policy must fail to attach, and the policy implementation
                        should record

                        a `ResolvedRefs` or similar Condition in the Policy''s status.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: sectionName must be specified when targetRefs includes
                    2 or more references to the same target
                  rule: 'self.all(p1, self.all(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name ? ((!has(p1.sectionName) || p1.sectionName
                    == '''') == (!has(p2.sectionName) || p2.sectionName == ''''))
                    : true))'
                - message: sectionName must be unique when targetRefs includes 2 or
                    more references to the same target
                  rule: self.all(p1, self.exists_one(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.sectionName) ||
                    p1.sectionName == '') && (!has(p2.sectionName) || p2.sectionName
                    == '')) || (has(p1.sectionName) && has(p2.sectionName) && p1.sectionName
                    == p2.sectionName))))
              validation:
                description: Validation contains backend TLS validation configuration.
                properties:
                  caCertificateRefs:
                    description: "CACertificateRefs contains one or more references\
                      \ to Kubernetes objects that\ncontain a PEM-encoded TLS CA certificate\
                      \ bundle, which is used to\nvalidate a TLS handshake between\
                      \ the Gateway and backend Pod.\n\nIf CACertificateRefs is empty\
                      \ or unspecified, then WellKnownCACertificates must be\nspecified.\
                      \ Only one of CACertificateRefs or WellKnownCACertificates may\
                      \ be specified,\nnot both. If CACertificateRefs is empty or\
                      \ unspecified, the configuration for\nWellKnownCACertificates\
                      \ MUST be honored instead if supported by the implementation.\n\
                      \nA CACertificateRef is invalid if:\n\n* It refers to a resource\
                      \ that cannot be resolved (e.g., the referenced resource\n \
                      \ does not exist) or is misconfigured (e.g., a ConfigMap does\
                      \ not contain a key\n  named `ca.crt`). In this case, the Reason\
                      \ must be set to `InvalidCACertificateRef`\n  and the Message\
                      \ of the Condition must indicate which reference is invalid\
                      \ and why.\n\n* It refers to an unknown or unsupported kind\
                      \ of resource. In this case, the Reason\n  must be set to `InvalidKind`\
                      \ and the Message of the Condition must explain which\n  kind\
                      \ of resource is unknown or unsupported.\n\n* It refers to a\
                      \ resource in another namespace. This may change in future\n\
                      \  spec updates.\n\nImplementations MAY choose to perform further\
                      \ validation of the certificate\ncontent (e.g., checking expiry\
                      \ or enforcing specific formats). In such cases,\nan implementation-specific\
                      \ Reason and Message must be set for the invalid reference.\n\
                      \nIn all cases, the implementation MUST ensure the `ResolvedRefs`\
                      \ Condition on\nthe BackendTLSPolicy is set to `status: False`,\
                      \ with a Reason and Message\nthat indicate the cause of the\
                      \ error. Connections using an invalid\nCACertificateRef MUST\
                      \ fail, and the client MUST receive an HTTP 5xx error\nresponse.\
                      \ If ALL CACertificateRefs are invalid, the implementation MUST\
                      \ also\nensure the `Accepted` Condition on the BackendTLSPolicy\
                      \ is set to\n`status: False`, with a Reason `NoValidCACertificate`.\n\
                      \nA single CACertificateRef to a Kubernetes ConfigMap kind has\
                      \ \"Core\" support.\nImplementations MAY choose to support attaching\
                      \ multiple certificates to\na backend, but this behavior is\
                      \ implementation-specific.\n\nSupport: Core - An optional single\
                      \ reference to a Kubernetes ConfigMap,\nwith the CA certificate\
                      \ in a key named `ca.crt`.\n\nSupport: Implementation-specific\
                      \ - More than one reference, other kinds\nof resources, or a\
                      \ single reference that includes multiple certificates."
                    items:
                      description: 'LocalObjectReference identifies an API object
                        within the namespace of the

                        referrer.

                        The API object must be valid in the cluster; the Group and
                        Kind must

                        be registered in the cluster for this reference to be valid.


                        References to objects with invalid Group and Kind are not
                        valid, and must

                        be rejected by the implementation, with appropriate Conditions
                        set

                        on the containing object.'
                      properties:
                        group:
                          description: 'Group is the group of the referent. For example,
                            "gateway.networking.k8s.io".

                            When unspecified or empty string, core API group is inferred.'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          description: Kind is kind of the referent. For example "HTTPRoute"
                            or "Service".
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: Name is the name of the referent.
                          maxLength: 253
                          minLength: 1
                          type: string
                      required:
                      - group
                      - kind
                      - name
                      type: object
                    maxItems: 8
                    type: array
                    x-kubernetes-list-type: atomic
                  hostname:
                    description: "Hostname is used for two purposes in the connection\
                      \ between Gateways and\nbackends:\n\n1. Hostname MUST be used\
                      \ as the SNI to connect to the backend (RFC 6066).\n2. Hostname\
                      \ MUST be used for authentication and MUST match the certificate\n\
                      \   served by the matching backend, unless SubjectAltNames is\
                      \ specified.\n3. If SubjectAltNames are specified, Hostname\
                      \ can be used for certificate selection\n   but MUST NOT be\
                      \ used for authentication. If you want to use the value\n  \
                      \ of the Hostname field for authentication, you MUST add it\
                      \ to the SubjectAltNames list.\n\nSupport: Core"
                    maxLength: 253
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  subjectAltNames:
                    description: 'SubjectAltNames contains one or more Subject Alternative
                      Names.

                      When specified the certificate served from the backend MUST

                      have at least one Subject Alternate Name matching one of the
                      specified SubjectAltNames.


                      Support: Extended'
                    items:
                      description: SubjectAltName represents Subject Alternative Name.
                      properties:
                        hostname:
                          description: 'Hostname contains Subject Alternative Name
                            specified in DNS name format.

                            Required when Type is set to Hostname, ignored otherwise.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        type:
                          description: 'Type determines the format of the Subject
                            Alternative Name. Always required.


                            Support: Core'
                          enum:
                          - Hostname
                          - URI
                          type: string
                        uri:
                          description: 'URI contains Subject Alternative Name specified
                            in a full URI format.

                            It MUST include both a scheme (e.g., "http" or "ftp")
                            and a scheme-specific-part.

                            Common values include SPIFFE IDs like "spiffe://mycluster.example.com/ns/myns/sa/svc1sa".

                            Required when Type is set to URI, ignored otherwise.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^(([^:/?#]+):)(//([^/?#]*))([^?#]*)(\?([^#]*))?(#(.*))?
                          type: string
                      required:
                      - type
                      type: object
                      x-kubernetes-validations:
                      - message: SubjectAltName element must contain Hostname, if
                          Type is set to Hostname
                        rule: '!(self.type == "Hostname" && (!has(self.hostname) ||
                          self.hostname == ""))'
                      - message: SubjectAltName element must not contain Hostname,
                          if Type is not set to Hostname
                        rule: '!(self.type != "Hostname" && has(self.hostname) &&
                          self.hostname != "")'
                      - message: SubjectAltName element must contain URI, if Type
                          is set to URI
                        rule: '!(self.type == "URI" && (!has(self.uri) || self.uri
                          == ""))'
                      - message: SubjectAltName element must not contain URI, if Type
                          is not set to URI
                        rule: '!(self.type != "URI" && has(self.uri) && self.uri !=
                          "")'
                    maxItems: 5
                    type: array
                    x-kubernetes-list-type: atomic
                  wellKnownCACertificates:
                    description: 'WellKnownCACertificates specifies whether system
                      CA certificates may be used in

                      the TLS handshake between the gateway and backend pod.


                      If WellKnownCACertificates is unspecified or empty (""), then
                      CACertificateRefs

                      must be specified with at least one entry for a valid configuration.
                      Only one of

                      CACertificateRefs or WellKnownCACertificates may be specified,
                      not both.

                      If an implementation does not support the WellKnownCACertificates
                      field, or

                      the supplied value is not recognized, the implementation MUST
                      ensure the

                      `Accepted` Condition on the BackendTLSPolicy is set to `status:
                      False`, with

                      a Reason `Invalid`.


                      Support: Implementation-specific'
                    enum:
                    - System
                    type: string
                required:
                - hostname
                type: object
                x-kubernetes-validations:
                - message: must not contain both CACertificateRefs and WellKnownCACertificates
                  rule: '!(has(self.caCertificateRefs) && size(self.caCertificateRefs)
                    > 0 && has(self.wellKnownCACertificates) && self.wellKnownCACertificates
                    != "")'
                - message: must specify either CACertificateRefs or WellKnownCACertificates
                  rule: (has(self.caCertificateRefs) && size(self.caCertificateRefs)
                    > 0 || has(self.wellKnownCACertificates) && self.wellKnownCACertificates
                    != "")
            required:
            - targetRefs
            - validation
            type: object
          status:
            description: Status defines the current state of BackendTLSPolicy.
            properties:
              ancestors:
                description: 'Ancestors is a list of ancestor resources (usually Gateways)
                  that are

                  associated with the policy, and the status of the policy with respect
                  to

                  each ancestor. When this policy attaches to a parent, the controller
                  that

                  manages the parent and the ancestors MUST add an entry to this list
                  when

                  the controller first sees the policy and SHOULD update the entry
                  as

                  appropriate when the relevant ancestor is modified.


                  Note that choosing the relevant ancestor is left to the Policy designers;

                  an important part of Policy design is designing the right object
                  level at

                  which to namespace this status.


                  Note also that implementations MUST ONLY populate ancestor status
                  for

                  the Ancestor resources they are responsible for. Implementations
                  MUST

                  use the ControllerName field to uniquely identify the entries in
                  this list

                  that they are responsible for.


                  Note that to achieve this, the list of PolicyAncestorStatus structs

                  MUST be treated as a map with a composite key, made up of the AncestorRef

                  and ControllerName fields combined.


                  A maximum of 16 ancestors will be represented in this list. An empty
                  list

                  means the Policy is not relevant for any ancestors.


                  If this slice is full, implementations MUST NOT add further entries.

                  Instead they MUST consider the policy unimplementable and signal
                  that

                  on any related resources such as the ancestor that would be referenced

                  here. For example, if this list was full on BackendTLSPolicy, no

                  additional Gateways would be able to reference the Service targeted
                  by

                  the BackendTLSPolicy.'
                items:
                  description: 'PolicyAncestorStatus describes the status of a route
                    with respect to an

                    associated Ancestor.


                    Ancestors refer to objects that are either the Target of a policy
                    or above it

                    in terms of object hierarchy. For example, if a policy targets
                    a Service, the

                    Policy''s Ancestors are, in order, the Service, the HTTPRoute,
                    the Gateway, and

                    the GatewayClass. Almost always, in this hierarchy, the Gateway
                    will be the most

                    useful object to place Policy status on, so we recommend that
                    implementations

                    SHOULD use Gateway as the PolicyAncestorStatus object unless the
                    designers

                    have a _very_ good reason otherwise.


                    In the context of policy attachment, the Ancestor is used to distinguish
                    which

                    resource results in a distinct application of this policy. For
                    example, if a policy

                    targets a Service, it may have a distinct result per attached
                    Gateway.


                    Policies targeting the same resource may have different effects
                    depending on the

                    ancestors of those resources. For example, different Gateways
                    targeting the same

                    Service may have different capabilities, especially if they have
                    different underlying

                    implementations.


                    For example, in BackendTLSPolicy, the Policy attaches to a Service
                    that is

                    used as a backend in a HTTPRoute that is itself attached to a
                    Gateway.

                    In this case, the relevant object for status is the Gateway, and
                    that is the

                    ancestor object referred to in this status.


                    Note that a parent is also an ancestor, so for objects where the
                    parent is the

                    relevant object for status, this struct SHOULD still be used.


                    This struct is intended to be used in a slice that''s effectively
                    a map,

                    with a composite key made up of the AncestorRef and the ControllerName.'
                  properties:
                    ancestorRef:
                      description: 'AncestorRef corresponds with a ParentRef in the
                        spec that this

                        PolicyAncestorStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      description: Conditions describes the status of the Policy with
                        respect to the given Ancestor.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - conditions
                  - controllerName
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
            required:
            - ancestors
            type: object
        required:
        - spec
        type: object
    served: false
    storage: false

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.1-0.20251023132335-bf7d6b742e6a
  name: enterpriseagentgatewayparameters.enterpriseagentgateway.solo.io
spec:
  conversion:
    strategy: None
  group: enterpriseagentgateway.solo.io
  names:
    categories:
    - enterpriseagentgateway
    - eagw
    kind: EnterpriseAgentgatewayParameters
    listKind: EnterpriseAgentgatewayParametersList
    plural: enterpriseagentgatewayparameters
    shortNames:
    - eagpar
    singular: enterpriseagentgatewayparameters
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              ca:
                properties:
                  address:
                    type: string
                  trustDomain:
                    type: string
                type: object
              deployment:
                properties:
                  metadata:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              env:
                items:
                  properties:
                    name:
                      type: string
                    value:
                      type: string
                    valueFrom:
                      properties:
                        configMapKeyRef:
                          properties:
                            key:
                              type: string
                            name:
                              default: ''
                              type: string
                            optional:
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                        fieldRef:
                          properties:
                            apiVersion:
                              type: string
                            fieldPath:
                              type: string
                          required:
                          - fieldPath
                          type: object
                          x-kubernetes-map-type: atomic
                        fileKeyRef:
                          properties:
                            key:
                              type: string
                            optional:
                              default: false
                              type: boolean
                            path:
                              type: string
                            volumeName:
                              type: string
                          required:
                          - key
                          - path
                          - volumeName
                          type: object
                          x-kubernetes-map-type: atomic
                        resourceFieldRef:
                          properties:
                            containerName:
                              type: string
                            divisor:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            resource:
                              type: string
                          required:
                          - resource
                          type: object
                          x-kubernetes-map-type: atomic
                        secretKeyRef:
                          properties:
                            key:
                              type: string
                            name:
                              default: ''
                              type: string
                            optional:
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                      type: object
                  required:
                  - name
                  type: object
                type: array
              horizontalPodAutoscaler:
                properties:
                  metadata:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              image:
                properties:
                  digest:
                    type: string
                  pullPolicy:
                    type: string
                  registry:
                    type: string
                  repository:
                    type: string
                  tag:
                    type: string
                type: object
              istio:
                properties:
                  caAddress:
                    type: string
                  trustDomain:
                    type: string
                type: object
              istioClusterId:
                type: string
              logging:
                properties:
                  format:
                    enum:
                    - json
                    - text
                    type: string
                  level:
                    type: string
                type: object
              podDisruptionBudget:
                properties:
                  metadata:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              rawConfig:
                type: object
                x-kubernetes-preserve-unknown-fields: true
              resources:
                properties:
                  claims:
                    items:
                      properties:
                        name:
                          type: string
                        request:
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    type: object
                type: object
              service:
                properties:
                  metadata:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              serviceAccount:
                properties:
                  metadata:
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              sharedExtensions:
                properties:
                  extCache:
                    properties:
                      deployment:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      enabled:
                        type: boolean
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fileKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    optional:
                                      default: false
                                      type: boolean
                                    path:
                                      type: string
                                    volumeName:
                                      type: string
                                  required:
                                  - key
                                  - path
                                  - volumeName
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      horizontalPodAutoscaler:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      podDisruptionBudget:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      service:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      serviceAccount:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                    type: object
                  extauth:
                    properties:
                      deployment:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      enabled:
                        type: boolean
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fileKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    optional:
                                      default: false
                                      type: boolean
                                    path:
                                      type: string
                                    volumeName:
                                      type: string
                                  required:
                                  - key
                                  - path
                                  - volumeName
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      horizontalPodAutoscaler:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      podDisruptionBudget:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      service:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      serviceAccount:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                    type: object
                  ratelimiter:
                    properties:
                      deployment:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      enabled:
                        type: boolean
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fileKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    optional:
                                      default: false
                                      type: boolean
                                    path:
                                      type: string
                                    volumeName:
                                      type: string
                                  required:
                                  - key
                                  - path
                                  - volumeName
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ''
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      horizontalPodAutoscaler:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      podDisruptionBudget:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      service:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      serviceAccount:
                        properties:
                          metadata:
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          spec:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                    type: object
                type: object
              shutdown:
                properties:
                  max:
                    format: int64
                    maximum: 31536000
                    minimum: 0
                    type: integer
                  min:
                    format: int64
                    maximum: 31536000
                    minimum: 0
                    type: integer
                required:
                - max
                - min
                type: object
                x-kubernetes-validations:
                - message: The 'min' value must be less than or equal to the 'max'
                    value.
                  rule: self.min <= self.max
            type: object
          status:
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.1-0.20251023132335-bf7d6b742e6a
  labels:
    app: gloo
    app.kubernetes.io/name: enterpriseagentgatewaypolicy
  name: enterpriseagentgatewaypolicies.enterpriseagentgateway.solo.io
spec:
  conversion:
    strategy: None
  group: enterpriseagentgateway.solo.io
  names:
    categories:
    - enterpriseagentgateway
    - eagw
    kind: EnterpriseAgentgatewayPolicy
    listKind: EnterpriseAgentgatewayPolicyList
    plural: enterpriseagentgatewaypolicies
    shortNames:
    - eagpol
    singular: enterpriseagentgatewaypolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Solo Enterprise for agentgateway policy acceptance status
      jsonPath: .status.ancestors[*].conditions[?(@.type=='Accepted')].status
      name: Accepted
      type: string
    - description: Solo Enterprise for agentgateway policy attachment status
      jsonPath: .status.ancestors[*].conditions[?(@.type=='Attached')].status
      name: Attached
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              backend:
                properties:
                  ai:
                    properties:
                      defaults:
                        items:
                          properties:
                            field:
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      modelAliases:
                        additionalProperties:
                          type: string
                        maxProperties: 64
                        type: object
                      overrides:
                        items:
                          properties:
                            field:
                              maxLength: 256
                              minLength: 1
                              type: string
                            value:
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - field
                          - value
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                      prompt:
                        properties:
                          append:
                            items:
                              properties:
                                content:
                                  type: string
                                role:
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                          prepend:
                            items:
                              properties:
                                content:
                                  type: string
                                role:
                                  type: string
                              required:
                              - content
                              - role
                              type: object
                            type: array
                        type: object
                      promptCaching:
                        properties:
                          cacheMessages:
                            default: true
                            type: boolean
                          cacheSystem:
                            default: true
                            type: boolean
                          cacheTools:
                            default: false
                            type: boolean
                          minTokens:
                            default: 1024
                            minimum: 0
                            type: integer
                        type: object
                      promptGuard:
                        properties:
                          request:
                            items:
                              properties:
                                openAIModeration:
                                  properties:
                                    model:
                                      type: string
                                    policies:
                                      properties:
                                        auth:
                                          properties:
                                            aws:
                                              properties:
                                                secretRef:
                                                  properties:
                                                    name:
                                                      default: ''
                                                      type: string
                                                  type: object
                                                  x-kubernetes-map-type: atomic
                                              required:
                                              - secretRef
                                              type: object
                                            key:
                                              maxLength: 2048
                                              type: string
                                            passthrough:
                                              type: object
                                            secretRef:
                                              properties:
                                                name:
                                                  default: ''
                                                  type: string
                                              type: object
                                              x-kubernetes-map-type: atomic
                                          type: object
                                          x-kubernetes-validations:
                                          - message: exactly one of the fields in
                                              [key secretRef passthrough aws] must
                                              be set
                                            rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                                              == 1'
                                        http:
                                          properties:
                                            requestTimeout:
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: requestTimeout must be at
                                                  least 1ms
                                                rule: duration(self) >= duration('1ms')
                                            version:
                                              enum:
                                              - HTTP1
                                              - HTTP2
                                              type: string
                                          type: object
                                        tcp:
                                          properties:
                                            connectTimeout:
                                              type: string
                                              x-kubernetes-validations:
                                              - message: invalid duration value
                                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                              - message: connectTimeout must be at
                                                  least 100ms
                                                rule: duration(self) >= duration('100ms')
                                            keepalive:
                                              properties:
                                                interval:
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: interval must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                                retries:
                                                  format: int32
                                                  maximum: 64
                                                  minimum: 1
                                                  type: integer
                                                time:
                                                  type: string
                                                  x-kubernetes-validations:
                                                  - message: invalid duration value
                                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                                  - message: time must be at least
                                                      1 second
                                                    rule: duration(self) >= duration('1s')
                                              type: object
                                          type: object
                                        tls:
                                          properties:
                                            alpnProtocols:
                                              items:
                                                maxLength: 64
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                            caCertificateRefs:
                                              items:
                                                properties:
                                                  name:
                                                    default: ''
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            insecureSkipVerify:
                                              enum:
                                              - All
                                              - Hostname
                                              type: string
                                            mtlsCertificateRef:
                                              items:
                                                properties:
                                                  name:
                                                    default: ''
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              maxItems: 1
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            sni:
                                              maxLength: 253
                                              minLength: 1
                                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                              type: string
                                            verifySubjectAltNames:
                                              items:
                                                maxLength: 256
                                                minLength: 1
                                                type: string
                                              maxItems: 16
                                              minItems: 1
                                              type: array
                                          type: object
                                          x-kubernetes-validations:
                                          - message: insecureSkipVerify All and caCertificateRefs
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) &&
                                              self.insecureSkipVerify == ''All'' ?
                                              !has(self.caCertificateRefs) : true'
                                          - message: insecureSkipVerify and verifySubjectAltNames
                                              may not be set together
                                            rule: 'has(self.insecureSkipVerify) ?
                                              !has(self.verifySubjectAltNames) : true'
                                          - message: at most one of the fields in
                                              [verifySubjectAltNames insecureSkipVerify]
                                              may be set
                                            rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                                              <= 1'
                                      type: object
                                  type: object
                                regex:
                                  properties:
                                    action:
                                      default: Mask
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      items:
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      type: string
                                    statusCode:
                                      default: 403
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  properties:
                                    backendRef:
                                      properties:
                                        group:
                                          default: ''
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      items:
                                        properties:
                                          name:
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook
                                  openAIModeration] must be set
                                rule: '[has(self.regex),has(self.webhook),has(self.openAIModeration)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                          response:
                            items:
                              properties:
                                regex:
                                  properties:
                                    action:
                                      default: Mask
                                      enum:
                                      - Mask
                                      - Reject
                                      type: string
                                    builtins:
                                      items:
                                        enum:
                                        - Ssn
                                        - CreditCard
                                        - PhoneNumber
                                        - Email
                                        - CaSin
                                        type: string
                                      type: array
                                    matches:
                                      items:
                                        maxLength: 1024
                                        minLength: 1
                                        type: string
                                      type: array
                                  type: object
                                response:
                                  properties:
                                    message:
                                      default: The request was rejected due to inappropriate
                                        content
                                      type: string
                                    statusCode:
                                      default: 403
                                      format: int32
                                      maximum: 599
                                      minimum: 200
                                      type: integer
                                  type: object
                                  x-kubernetes-validations:
                                  - message: at least one of the fields in [message
                                      statusCode] must be set
                                    rule: '[has(self.message),has(self.statusCode)].filter(x,x==true).size()
                                      >= 1'
                                webhook:
                                  properties:
                                    backendRef:
                                      properties:
                                        group:
                                          default: ''
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    forwardHeaderMatches:
                                      items:
                                        properties:
                                          name:
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          type:
                                            default: Exact
                                            enum:
                                            - Exact
                                            - RegularExpression
                                            type: string
                                          value:
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                  required:
                                  - backendRef
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [regex webhook]
                                  must be set
                                rule: '[has(self.regex),has(self.webhook)].filter(x,x==true).size()
                                  == 1'
                            maxItems: 8
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [request response]
                            must be set
                          rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                            >= 1'
                      routes:
                        additionalProperties:
                          enum:
                          - Completions
                          - Messages
                          - Models
                          - Passthrough
                          - Responses
                          - AnthropicTokenCount
                          - Embeddings
                          type: string
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [prompt promptGuard defaults
                        overrides modelAliases promptCaching routes] must be set
                      rule: '[has(self.prompt),has(self.promptGuard),has(self.defaults),has(self.overrides),has(self.modelAliases),has(self.promptCaching),has(self.routes)].filter(x,x==true).size()
                        >= 1'
                  auth:
                    properties:
                      aws:
                        properties:
                          secretRef:
                            properties:
                              name:
                                default: ''
                                type: string
                            type: object
                            x-kubernetes-map-type: atomic
                        required:
                        - secretRef
                        type: object
                      key:
                        maxLength: 2048
                        type: string
                      passthrough:
                        type: object
                      secretRef:
                        properties:
                          name:
                            default: ''
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [key secretRef passthrough
                        aws] must be set
                      rule: '[has(self.key),has(self.secretRef),has(self.passthrough),has(self.aws)].filter(x,x==true).size()
                        == 1'
                  http:
                    properties:
                      requestTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: requestTimeout must be at least 1ms
                          rule: duration(self) >= duration('1ms')
                      version:
                        enum:
                        - HTTP1
                        - HTTP2
                        type: string
                    type: object
                  mcp:
                    properties:
                      authentication:
                        properties:
                          audiences:
                            items:
                              type: string
                            maxItems: 64
                            minItems: 1
                            type: array
                          issuer:
                            maxLength: 256
                            minLength: 1
                            type: string
                          jwks:
                            properties:
                              backendRef:
                                properties:
                                  group:
                                    default: ''
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              cacheDuration:
                                default: 5m
                                type: string
                                x-kubernetes-validations:
                                - message: invalid duration value
                                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                - message: cacheDuration must be at least 5m.
                                  rule: duration(self) >= duration('5m')
                              jwksPath:
                                maxLength: 2000
                                minLength: 1
                                type: string
                            required:
                            - backendRef
                            - jwksPath
                            type: object
                          mode:
                            enum:
                            - Strict
                            - Optional
                            - Permissive
                            type: string
                          provider:
                            enum:
                            - Auth0
                            - Keycloak
                            type: string
                          resourceMetadata:
                            additionalProperties:
                              x-kubernetes-preserve-unknown-fields: true
                            type: object
                        required:
                        - jwks
                        type: object
                      authorization:
                        properties:
                          action:
                            default: Allow
                            enum:
                            - Allow
                            - Deny
                            type: string
                          policy:
                            properties:
                              matchExpressions:
                                items:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                maxItems: 256
                                minItems: 1
                                type: array
                            required:
                            - matchExpressions
                            type: object
                        required:
                        - policy
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [authorization authentication]
                        must be set
                      rule: '[has(self.authorization),has(self.authentication)].filter(x,x==true).size()
                        >= 1'
                  tcp:
                    properties:
                      connectTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: connectTimeout must be at least 100ms
                          rule: duration(self) >= duration('100ms')
                      keepalive:
                        properties:
                          interval:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: interval must be at least 1 second
                              rule: duration(self) >= duration('1s')
                          retries:
                            format: int32
                            maximum: 64
                            minimum: 1
                            type: integer
                          time:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: time must be at least 1 second
                              rule: duration(self) >= duration('1s')
                        type: object
                    type: object
                  tls:
                    properties:
                      alpnProtocols:
                        items:
                          maxLength: 64
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                      caCertificateRefs:
                        items:
                          properties:
                            name:
                              default: ''
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      insecureSkipVerify:
                        enum:
                        - All
                        - Hostname
                        type: string
                      mtlsCertificateRef:
                        items:
                          properties:
                            name:
                              default: ''
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        maxItems: 1
                        type: array
                        x-kubernetes-list-type: atomic
                      sni:
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      verifySubjectAltNames:
                        items:
                          maxLength: 256
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: insecureSkipVerify All and caCertificateRefs may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) && self.insecureSkipVerify
                        == ''All'' ? !has(self.caCertificateRefs) : true'
                    - message: insecureSkipVerify and verifySubjectAltNames may not
                        be set together
                      rule: 'has(self.insecureSkipVerify) ? !has(self.verifySubjectAltNames)
                        : true'
                    - message: at most one of the fields in [verifySubjectAltNames
                        insecureSkipVerify] may be set
                      rule: '[has(self.verifySubjectAltNames),has(self.insecureSkipVerify)].filter(x,x==true).size()
                        <= 1'
                  tokenExchange:
                    properties:
                      mode:
                        enum:
                        - ElicitationOnly
                        - ExchangeOnly
                        type: string
                    type: object
                type: object
                x-kubernetes-validations:
                - message: at least one of the fields in [tcp tls http auth mcp ai
                    tokenExchange] must be set
                  rule: '[has(self.tcp),has(self.tls),has(self.http),has(self.auth),has(self.mcp),has(self.ai),has(self.tokenExchange)].filter(x,x==true).size()
                    >= 1'
              frontend:
                properties:
                  accessLog:
                    properties:
                      attributes:
                        properties:
                          add:
                            items:
                              properties:
                                expression:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  type: string
                              required:
                              - expression
                              - name
                              type: object
                            minItems: 1
                            type: array
                          remove:
                            items:
                              maxLength: 64
                              minLength: 1
                              type: string
                            maxItems: 32
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [remove add] must
                            be set
                          rule: '[has(self.remove),has(self.add)].filter(x,x==true).size()
                            >= 1'
                      filter:
                        maxLength: 16384
                        minLength: 1
                        type: string
                    type: object
                  http:
                    properties:
                      http1IdleTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http1IdleTimeout must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http1MaxHeaders:
                        format: int32
                        maximum: 4096
                        minimum: 1
                        type: integer
                      http2ConnectionWindowSize:
                        format: int32
                        minimum: 1
                        type: integer
                      http2FrameSize:
                        format: int32
                        maximum: 1677215
                        minimum: 16384
                        type: integer
                      http2KeepaliveInterval:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http2KeepaliveInterval must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http2KeepaliveTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: http2KeepaliveTimeout must be at least 1 second
                          rule: duration(self) >= duration('1s')
                      http2WindowSize:
                        format: int32
                        minimum: 1
                        type: integer
                      maxBufferSize:
                        format: int32
                        minimum: 1
                        type: integer
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [maxBufferSize http1MaxHeaders
                        http1IdleTimeout http2WindowSize http2ConnectionWindowSize
                        http2FrameSize http2KeepaliveInterval http2KeepaliveTimeout]
                        must be set
                      rule: '[has(self.maxBufferSize),has(self.http1MaxHeaders),has(self.http1IdleTimeout),has(self.http2WindowSize),has(self.http2ConnectionWindowSize),has(self.http2FrameSize),has(self.http2KeepaliveInterval),has(self.http2KeepaliveTimeout)].filter(x,x==true).size()
                        >= 1'
                  tcp:
                    properties:
                      keepalive:
                        properties:
                          interval:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: interval must be at least 1 second
                              rule: duration(self) >= duration('1s')
                          retries:
                            format: int32
                            maximum: 64
                            minimum: 1
                            type: integer
                          time:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            - message: time must be at least 1 second
                              rule: duration(self) >= duration('1s')
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [keepalive] must be set
                      rule: '[has(self.keepalive)].filter(x,x==true).size() >= 1'
                  tls:
                    properties:
                      alpnProtocols:
                        items:
                          maxLength: 64
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                      cipherSuites:
                        items:
                          enum:
                          - TLS13_AES_256_GCM_SHA384
                          - TLS13_AES_128_GCM_SHA256
                          - TLS13_CHACHA20_POLY1305_SHA256
                          - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
                          - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
                          - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
                          - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
                          - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
                          - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
                          type: string
                        type: array
                      handshakeTimeout:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: handshakeTimeout must be at least 100ms
                          rule: duration(self) >= duration('100ms')
                      maxProtocolVersion:
                        enum:
                        - '1.2'
                        - '1.3'
                        type: string
                      minProtocolVersion:
                        enum:
                        - '1.2'
                        - '1.3'
                        type: string
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [handshakeTimeout] must
                        be set
                      rule: '[has(self.handshakeTimeout)].filter(x,x==true).size()
                        >= 1'
                  tracing:
                    properties:
                      attributes:
                        properties:
                          add:
                            items:
                              properties:
                                expression:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  type: string
                              required:
                              - expression
                              - name
                              type: object
                            minItems: 1
                            type: array
                          remove:
                            items:
                              maxLength: 64
                              minLength: 1
                              type: string
                            maxItems: 32
                            minItems: 1
                            type: array
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [remove add] must
                            be set
                          rule: '[has(self.remove),has(self.add)].filter(x,x==true).size()
                            >= 1'
                      backendRef:
                        properties:
                          group:
                            default: ''
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      clientSampling:
                        maxLength: 16384
                        minLength: 1
                        type: string
                      protocol:
                        default: HTTP
                        enum:
                        - HTTP
                        - GRPC
                        type: string
                      randomSampling:
                        maxLength: 16384
                        minLength: 1
                        type: string
                      resources:
                        items:
                          properties:
                            expression:
                              maxLength: 16384
                              minLength: 1
                              type: string
                            name:
                              maxLength: 256
                              minLength: 1
                              type: string
                          required:
                          - expression
                          - name
                          type: object
                        type: array
                    required:
                    - backendRef
                    type: object
                type: object
              targetRefs:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      maxLength: 253
                      minLength: 1
                      type: string
                    sectionName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway, HTTPRoute, XListenerSet,
                    Service, or AgentgatewayBackend resources
                  rule: self.all(r, (r.kind == 'Service' && r.group == '') || (r.kind
                    == 'AgentgatewayBackend' && r.group == 'agentgateway.dev') ||
                    (r.kind in ['Gateway', 'HTTPRoute'] && r.group == 'gateway.networking.k8s.io')
                    || (r.kind == 'XListenerSet' && r.group == 'gateway.networking.x-k8s.io'))
                - message: Only one Kind of targetRef can be set on one policy
                  rule: self.all(l1, !self.exists(l2, l1.kind != l2.kind))
              targetSelectors:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    matchLabels:
                      additionalProperties:
                        type: string
                      type: object
                    sectionName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - matchLabels
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway, HTTPRoute, XListenerSet,
                    Service, or AgentgatewayBackend resources
                  rule: self.all(r, (r.kind == 'Service' && r.group == '') || (r.kind
                    == 'AgentgatewayBackend' && r.group == 'agentgateway.dev') ||
                    (r.kind in ['Gateway', 'HTTPRoute'] && r.group == 'gateway.networking.k8s.io')
                    || (r.kind == 'XListenerSet' && r.group == 'gateway.networking.x-k8s.io'))
                - message: Only one Kind of targetRef can be set on one policy
                  rule: self.all(l1, !self.exists(l2, l1.kind != l2.kind))
              traffic:
                properties:
                  apiKeyAuthentication:
                    properties:
                      mode:
                        default: Strict
                        enum:
                        - Strict
                        - Optional
                        type: string
                      secretRef:
                        properties:
                          name:
                            default: ''
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      secretSelector:
                        properties:
                          matchLabels:
                            additionalProperties:
                              type: string
                            type: object
                        required:
                        - matchLabels
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [secretRef secretSelector]
                        must be set
                      rule: '[has(self.secretRef),has(self.secretSelector)].filter(x,x==true).size()
                        == 1'
                  authorization:
                    properties:
                      action:
                        default: Allow
                        enum:
                        - Allow
                        - Deny
                        type: string
                      policy:
                        properties:
                          matchExpressions:
                            items:
                              maxLength: 16384
                              minLength: 1
                              type: string
                            maxItems: 256
                            minItems: 1
                            type: array
                        required:
                        - matchExpressions
                        type: object
                    required:
                    - policy
                    type: object
                  basicAuthentication:
                    properties:
                      mode:
                        default: Strict
                        enum:
                        - Strict
                        - Optional
                        type: string
                      realm:
                        type: string
                      secretRef:
                        properties:
                          name:
                            default: ''
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      users:
                        items:
                          type: string
                        maxItems: 256
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [users secretRef] must
                        be set
                      rule: '[has(self.users),has(self.secretRef)].filter(x,x==true).size()
                        == 1'
                  cors:
                    properties:
                      allowCredentials:
                        type: boolean
                      allowHeaders:
                        items:
                          maxLength: 256
                          minLength: 1
                          pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                      allowMethods:
                        items:
                          enum:
                          - GET
                          - HEAD
                          - POST
                          - PUT
                          - DELETE
                          - CONNECT
                          - OPTIONS
                          - TRACE
                          - PATCH
                          - '*'
                          type: string
                        maxItems: 9
                        type: array
                        x-kubernetes-list-type: set
                        x-kubernetes-validations:
                        - message: AllowMethods cannot contain '*' alongside other
                            methods
                          rule: '!(''*'' in self && self.size() > 1)'
                      allowOrigins:
                        items:
                          maxLength: 253
                          minLength: 1
                          pattern: (^\*$)|(^([a-zA-Z][a-zA-Z0-9+\-.]+):\/\/([^:/?#]+)(:([0-9]{1,5}))?$)
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                        x-kubernetes-validations:
                        - message: AllowOrigins cannot contain '*' alongside other
                            origins
                          rule: '!(''*'' in self && self.size() > 1)'
                      exposeHeaders:
                        items:
                          maxLength: 256
                          minLength: 1
                          pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                          type: string
                        maxItems: 64
                        type: array
                        x-kubernetes-list-type: set
                      maxAge:
                        default: 5
                        format: int32
                        minimum: 1
                        type: integer
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  csrf:
                    properties:
                      additionalOrigins:
                        items:
                          maxLength: 256
                          minLength: 1
                          type: string
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                  directResponse:
                    properties:
                      body:
                        maxLength: 4096
                        minLength: 1
                        type: string
                      status:
                        format: int32
                        maximum: 599
                        minimum: 200
                        type: integer
                    required:
                    - status
                    type: object
                  entExtAuth:
                    properties:
                      authConfigRef:
                        properties:
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                        required:
                        - name
                        type: object
                      backendRef:
                        properties:
                          group:
                            default: ''
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    type: object
                  entRateLimit:
                    properties:
                      global:
                        properties:
                          backendRef:
                            properties:
                              group:
                                default: ''
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Service
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                              port:
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                            required:
                            - name
                            type: object
                            x-kubernetes-validations:
                            - message: Must have port for Service reference
                              rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                ? has(self.port) : true'
                          domain:
                            maxLength: 256
                            type: string
                          rateLimitConfigRefs:
                            items:
                              properties:
                                name:
                                  maxLength: 253
                                  minLength: 1
                                  type: string
                                namespace:
                                  maxLength: 63
                                  minLength: 1
                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                  type: string
                              required:
                              - name
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                        required:
                        - rateLimitConfigRefs
                        type: object
                    required:
                    - global
                    type: object
                  extAuth:
                    properties:
                      backendRef:
                        properties:
                          group:
                            default: ''
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      forwardBody:
                        properties:
                          maxSize:
                            format: int32
                            minimum: 1
                            type: integer
                        required:
                        - maxSize
                        type: object
                      grpc:
                        properties:
                          contextExtensions:
                            additionalProperties:
                              type: string
                            maxProperties: 64
                            type: object
                          requestMetadata:
                            additionalProperties:
                              maxLength: 16384
                              minLength: 1
                              type: string
                            maxProperties: 64
                            type: object
                        type: object
                      http:
                        properties:
                          addRequestHeaders:
                            additionalProperties:
                              maxLength: 16384
                              minLength: 1
                              type: string
                            maxProperties: 64
                            type: object
                          allowedRequestHeaders:
                            items:
                              maxLength: 256
                              minLength: 1
                              type: string
                            maxItems: 64
                            type: array
                          allowedResponseHeaders:
                            items:
                              maxLength: 256
                              minLength: 1
                              type: string
                            maxItems: 64
                            type: array
                          path:
                            maxLength: 16384
                            minLength: 1
                            type: string
                          redirect:
                            maxLength: 16384
                            minLength: 1
                            type: string
                          responseMetadata:
                            additionalProperties:
                              maxLength: 16384
                              minLength: 1
                              type: string
                            maxProperties: 64
                            type: object
                        type: object
                    required:
                    - backendRef
                    type: object
                    x-kubernetes-validations:
                    - message: exactly one of the fields in [grpc http] must be set
                      rule: '[has(self.grpc),has(self.http)].filter(x,x==true).size()
                        == 1'
                  extProc:
                    properties:
                      backendRef:
                        properties:
                          group:
                            default: ''
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    required:
                    - backendRef
                    type: object
                  headerModifiers:
                    properties:
                      request:
                        properties:
                          add:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          remove:
                            items:
                              type: string
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                      response:
                        properties:
                          add:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          remove:
                            items:
                              type: string
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                value:
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [request response] must
                        be set
                      rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                        >= 1'
                  hostRewrite:
                    enum:
                    - Auto
                    - None
                    properties:
                      mode:
                        type: string
                    required:
                    - mode
                    type: object
                  jwtAuthentication:
                    properties:
                      mode:
                        default: Strict
                        enum:
                        - Strict
                        - Optional
                        - Permissive
                        type: string
                      providers:
                        items:
                          properties:
                            audiences:
                              items:
                                type: string
                              maxItems: 64
                              minItems: 1
                              type: array
                            issuer:
                              maxLength: 256
                              minLength: 1
                              type: string
                            jwks:
                              properties:
                                inline:
                                  maxLength: 65536
                                  minLength: 2
                                  type: string
                                remote:
                                  properties:
                                    backendRef:
                                      properties:
                                        group:
                                          default: ''
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    cacheDuration:
                                      default: 5m
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                      - message: cacheDuration must be at least 5m.
                                        rule: duration(self) >= duration('5m')
                                    jwksPath:
                                      maxLength: 2000
                                      minLength: 1
                                      type: string
                                  required:
                                  - backendRef
                                  - jwksPath
                                  type: object
                              type: object
                              x-kubernetes-validations:
                              - message: exactly one of the fields in [remote inline]
                                  must be set
                                rule: '[has(self.remote),has(self.inline)].filter(x,x==true).size()
                                  == 1'
                          required:
                          - issuer
                          - jwks
                          type: object
                        maxItems: 64
                        minItems: 1
                        type: array
                    required:
                    - providers
                    type: object
                  phase:
                    enum:
                    - PreRouting
                    - PostRouting
                    type: string
                  rateLimit:
                    properties:
                      global:
                        properties:
                          backendRef:
                            properties:
                              group:
                                default: ''
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Service
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                              port:
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                            required:
                            - name
                            type: object
                            x-kubernetes-validations:
                            - message: Must have port for Service reference
                              rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                ? has(self.port) : true'
                          descriptors:
                            items:
                              properties:
                                entries:
                                  items:
                                    properties:
                                      expression:
                                        maxLength: 16384
                                        minLength: 1
                                        type: string
                                      name:
                                        maxLength: 64
                                        minLength: 1
                                        type: string
                                    required:
                                    - expression
                                    - name
                                    type: object
                                  maxItems: 16
                                  minItems: 1
                                  type: array
                                unit:
                                  enum:
                                  - Requests
                                  - Tokens
                                  type: string
                              required:
                              - entries
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                          domain:
                            maxLength: 256
                            minLength: 1
                            type: string
                        required:
                        - backendRef
                        - descriptors
                        - domain
                        type: object
                      local:
                        items:
                          properties:
                            burst:
                              format: int32
                              type: integer
                            requests:
                              format: int32
                              minimum: 1
                              type: integer
                            tokens:
                              format: int32
                              minimum: 1
                              type: integer
                            unit:
                              enum:
                              - Seconds
                              - Minutes
                              - Hours
                              type: string
                          required:
                          - unit
                          type: object
                          x-kubernetes-validations:
                          - message: exactly one of the fields in [requests tokens]
                              must be set
                            rule: '[has(self.requests),has(self.tokens)].filter(x,x==true).size()
                              == 1'
                        maxItems: 16
                        minItems: 1
                        type: array
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [local global] must be
                        set
                      rule: '[has(self.local),has(self.global)].filter(x,x==true).size()
                        >= 1'
                  retry:
                    properties:
                      attempts:
                        type: integer
                      backoff:
                        pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                        type: string
                      codes:
                        items:
                          maximum: 599
                          minimum: 400
                          type: integer
                        type: array
                        x-kubernetes-list-type: atomic
                    type: object
                  timeouts:
                    properties:
                      request:
                        type: string
                        x-kubernetes-validations:
                        - message: invalid duration value
                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        - message: request must be at least 1ms
                          rule: duration(self) >= duration('100ms')
                    type: object
                  transformation:
                    properties:
                      request:
                        properties:
                          add:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          body:
                            maxLength: 16384
                            minLength: 1
                            type: string
                          remove:
                            items:
                              maxLength: 256
                              minLength: 1
                              pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                              x-kubernetes-validations:
                              - message: pseudo-headers must be one of :authority,
                                  :method, :path, :scheme, or :status
                                rule: '!self.startsWith('':'') || self in ['':authority'',
                                  '':method'', '':path'', '':scheme'', '':status'']'
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [set add remove body]
                            must be set
                          rule: '[has(self.set),has(self.add),has(self.remove),has(self.body)].filter(x,x==true).size()
                            >= 1'
                      response:
                        properties:
                          add:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          body:
                            maxLength: 16384
                            minLength: 1
                            type: string
                          remove:
                            items:
                              maxLength: 256
                              minLength: 1
                              pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                              x-kubernetes-validations:
                              - message: pseudo-headers must be one of :authority,
                                  :method, :path, :scheme, or :status
                                rule: '!self.startsWith('':'') || self in ['':authority'',
                                  '':method'', '':path'', '':scheme'', '':status'']'
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-type: set
                          set:
                            items:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^:?[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                  x-kubernetes-validations:
                                  - message: pseudo-headers must be one of :authority,
                                      :method, :path, :scheme, or :status
                                    rule: '!self.startsWith('':'') || self in ['':authority'',
                                      '':method'', '':path'', '':scheme'', '':status'']'
                                value:
                                  maxLength: 16384
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            minItems: 1
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                        x-kubernetes-validations:
                        - message: at least one of the fields in [set add remove body]
                            must be set
                          rule: '[has(self.set),has(self.add),has(self.remove),has(self.body)].filter(x,x==true).size()
                            >= 1'
                    type: object
                    x-kubernetes-validations:
                    - message: at least one of the fields in [request response] must
                        be set
                      rule: '[has(self.request),has(self.response)].filter(x,x==true).size()
                        >= 1'
                type: object
                x-kubernetes-validations:
                - message: phase PreRouting only supports extAuth, transformation,
                    and extProc
                  rule: 'has(self.phase) && self.phase == ''PreRouting'' ? !has(self.rateLimit)
                    && !has(self.cors) && !has(self.csrf) && !has(self.headerModifiers)
                    && !has(self.hostRewrite) && !has(self.timeouts) && !has(self.retry)
                    && !has(self.authorization): true'
                - message: at most one of the fields in [extAuth entExtAuth] may be
                    set
                  rule: '[has(self.extAuth),has(self.entExtAuth)].filter(x,x==true).size()
                    <= 1'
                - message: at most one of the fields in [rateLimit entRateLimit] may
                    be set
                  rule: '[has(self.rateLimit),has(self.entRateLimit)].filter(x,x==true).size()
                    <= 1'
                - message: at least one of the fields in [transformation extProc extAuth
                    rateLimit cors csrf headerModifiers hostRewrite timeouts retry
                    authorization jwtAuthentication basicAuthentication apiKeyAuthentication
                    entRateLimit entExtAuth] must be set
                  rule: '[has(self.transformation),has(self.extProc),has(self.extAuth),has(self.rateLimit),has(self.cors),has(self.csrf),has(self.headerModifiers),has(self.hostRewrite),has(self.timeouts),has(self.retry),has(self.authorization),has(self.jwtAuthentication),has(self.basicAuthentication),has(self.apiKeyAuthentication),has(self.entRateLimit),has(self.entExtAuth)].filter(x,x==true).size()
                    >= 1'
            type: object
            x-kubernetes-validations:
            - message: At least one of traffic, frontend, or backend must be provided.
              rule: has(self.traffic) || has(self.frontend) || has(self.backend)
            - message: backend.mcp may not be used with a Service target
              rule: '!has(self.backend) || !has(self.backend.mcp) || ((!has(self.targetRefs)
                || !self.targetRefs.exists(t, t.kind == ''Service'')) && (!has(self.targetSelectors)
                || !self.targetSelectors.exists(t, t.kind == ''Service'')))'
            - message: backend.ai may not be used with a Service target
              rule: '!has(self.backend) || !has(self.backend.ai) || ((!has(self.targetRefs)
                || !self.targetRefs.exists(t, t.kind == ''Service'')) && (!has(self.targetSelectors)
                || !self.targetSelectors.exists(t, t.kind == ''Service'')))'
            - message: the 'frontend' field can only target a Gateway
              rule: 'has(self.frontend) && has(self.targetRefs) ? self.targetRefs.all(t,
                t.kind == ''Gateway'' && !has(t.sectionName)) : true'
            - message: the 'frontend' field can only target a Gateway
              rule: 'has(self.frontend) && has(self.targetSelectors) ? self.targetSelectors.all(t,
                t.kind == ''Gateway'' && !has(t.sectionName)) : true'
            - message: the 'traffic' field can only target a Gateway, XListenerSet,
                or HTTPRoute
              rule: 'has(self.traffic) && has(self.targetRefs) ? self.targetRefs.all(t,
                t.kind in [''Gateway'', ''HTTPRoute'', ''XListenerSet'']) : true'
            - message: the 'traffic' field can only target a Gateway, XListenerSet,
                or HTTPRoute
              rule: 'has(self.traffic) && has(self.targetSelectors) ? self.targetSelectors.all(t,
                t.kind in [''Gateway'', ''HTTPRoute'', ''XListenerSet'']) : true'
            - message: the 'traffic.phase=PreRouting' field can only target a Gateway
                or XListenerSet
              rule: 'has(self.targetRefs) && has(self.traffic) && has(self.traffic.phase)
                && self.traffic.phase == ''PreRouting'' ? self.targetRefs.all(t, t.kind
                in [''Gateway'', ''XListenerSet'']) : true'
            - message: the 'traffic.phase=PreRouting' field can only target a Gateway
                or XListenerSet
              rule: 'has(self.targetSelectors) && has(self.traffic) && has(self.traffic.phase)
                && self.traffic.phase == ''PreRouting'' ? self.targetSelectors.all(t,
                t.kind in [''Gateway'', ''XListenerSet'']) : true'
            - message: exactly one of the fields in [targetRefs targetSelectors] must
                be set
              rule: '[has(self.targetRefs),has(self.targetSelectors)].filter(x,x==true).size()
                == 1'
          status:
            properties:
              ancestors:
                items:
                  properties:
                    ancestorRef:
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      items:
                        properties:
                          lastTransitionTime:
                            format: date-time
                            type: string
                          message:
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - conditions
                  - controllerName
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
            required:
            - ancestors
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  name: gatewayclasses.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: GatewayClass
    listKind: GatewayClassList
    plural: gatewayclasses
    shortNames:
    - gc
    singular: gatewayclass
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.controllerName
      name: Controller
      type: string
    - jsonPath: .status.conditions[?(@.type=="Accepted")].status
      name: Accepted
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - jsonPath: .spec.description
      name: Description
      priority: 1
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: 'GatewayClass describes a class of Gateways available to the
          user for creating

          Gateway resources.


          It is recommended that this resource be used as a template for Gateways.
          This

          means that a Gateway is based on the state of the GatewayClass at the time
          it

          was created and changes to the GatewayClass or associated parameters are
          not

          propagated down to existing Gateways. This recommendation is intended to

          limit the blast radius of changes to GatewayClass or associated parameters.

          If implementations choose to propagate GatewayClass changes to existing

          Gateways, that MUST be clearly documented by the implementation.


          Whenever one or more Gateways are using a GatewayClass, implementations
          SHOULD

          add the `gateway-exists-finalizer.gateway.networking.k8s.io` finalizer on
          the

          associated GatewayClass. This ensures that a GatewayClass associated with
          a

          Gateway is not deleted while in use.


          GatewayClass is a Cluster level resource.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of GatewayClass.
            properties:
              controllerName:
                description: 'ControllerName is the name of the controller that is
                  managing Gateways of

                  this class. The value of this field MUST be a domain prefixed path.


                  Example: "example.net/gateway-controller".


                  This field is not mutable and cannot be empty.


                  Support: Core'
                maxLength: 253
                minLength: 1
                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                type: string
                x-kubernetes-validations:
                - message: Value is immutable
                  rule: self == oldSelf
              description:
                description: Description helps describe a GatewayClass with more details.
                maxLength: 64
                type: string
              parametersRef:
                description: 'ParametersRef is a reference to a resource that contains
                  the configuration

                  parameters corresponding to the GatewayClass. This is optional if
                  the

                  controller does not require any additional configuration.


                  ParametersRef can reference a standard Kubernetes resource, i.e.
                  ConfigMap,

                  or an implementation-specific custom resource. The resource can
                  be

                  cluster-scoped or namespace-scoped.


                  If the referent cannot be found, refers to an unsupported kind,
                  or when

                  the data within that resource is malformed, the GatewayClass SHOULD
                  be

                  rejected with the "Accepted" status condition set to "False" and
                  an

                  "InvalidParameters" reason.


                  A Gateway for this GatewayClass may provide its own `parametersRef`.
                  When both are specified,

                  the merging behavior is implementation specific.

                  It is generally recommended that GatewayClass provides defaults
                  that can be overridden by a Gateway.


                  Support: Implementation-specific'
                properties:
                  group:
                    description: Group is the group of the referent.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the referent.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the referent.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: 'Namespace is the namespace of the referent.

                      This field is required when referring to a Namespace-scoped
                      resource and

                      MUST be unset when referring to a Cluster-scoped resource.'
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            required:
            - controllerName
            type: object
          status:
            default:
              conditions:
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Accepted
            description: 'Status defines the current state of GatewayClass.


              Implementations MUST populate status on all GatewayClass resources which

              specify their controller name.'
            properties:
              conditions:
                default:
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Accepted
                description: 'Conditions is the current status from the controller
                  for

                  this GatewayClass.


                  Controllers should prefer to publish conditions using values

                  of GatewayClassConditionType for the type of each Condition.'
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              supportedFeatures:
                description: 'SupportedFeatures is the set of features the GatewayClass
                  support.

                  It MUST be sorted in ascending alphabetical order by the Name key.'
                items:
                  properties:
                    name:
                      description: 'FeatureName is used to describe distinct features
                        that are covered by

                        conformance tests.'
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.controllerName
      name: Controller
      type: string
    - jsonPath: .status.conditions[?(@.type=="Accepted")].status
      name: Accepted
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - jsonPath: .spec.description
      name: Description
      priority: 1
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: 'GatewayClass describes a class of Gateways available to the
          user for creating

          Gateway resources.


          It is recommended that this resource be used as a template for Gateways.
          This

          means that a Gateway is based on the state of the GatewayClass at the time
          it

          was created and changes to the GatewayClass or associated parameters are
          not

          propagated down to existing Gateways. This recommendation is intended to

          limit the blast radius of changes to GatewayClass or associated parameters.

          If implementations choose to propagate GatewayClass changes to existing

          Gateways, that MUST be clearly documented by the implementation.


          Whenever one or more Gateways are using a GatewayClass, implementations
          SHOULD

          add the `gateway-exists-finalizer.gateway.networking.k8s.io` finalizer on
          the

          associated GatewayClass. This ensures that a GatewayClass associated with
          a

          Gateway is not deleted while in use.


          GatewayClass is a Cluster level resource.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of GatewayClass.
            properties:
              controllerName:
                description: 'ControllerName is the name of the controller that is
                  managing Gateways of

                  this class. The value of this field MUST be a domain prefixed path.


                  Example: "example.net/gateway-controller".


                  This field is not mutable and cannot be empty.


                  Support: Core'
                maxLength: 253
                minLength: 1
                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                type: string
                x-kubernetes-validations:
                - message: Value is immutable
                  rule: self == oldSelf
              description:
                description: Description helps describe a GatewayClass with more details.
                maxLength: 64
                type: string
              parametersRef:
                description: 'ParametersRef is a reference to a resource that contains
                  the configuration

                  parameters corresponding to the GatewayClass. This is optional if
                  the

                  controller does not require any additional configuration.


                  ParametersRef can reference a standard Kubernetes resource, i.e.
                  ConfigMap,

                  or an implementation-specific custom resource. The resource can
                  be

                  cluster-scoped or namespace-scoped.


                  If the referent cannot be found, refers to an unsupported kind,
                  or when

                  the data within that resource is malformed, the GatewayClass SHOULD
                  be

                  rejected with the "Accepted" status condition set to "False" and
                  an

                  "InvalidParameters" reason.


                  A Gateway for this GatewayClass may provide its own `parametersRef`.
                  When both are specified,

                  the merging behavior is implementation specific.

                  It is generally recommended that GatewayClass provides defaults
                  that can be overridden by a Gateway.


                  Support: Implementation-specific'
                properties:
                  group:
                    description: Group is the group of the referent.
                    maxLength: 253
                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: Kind is kind of the referent.
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: Name is the name of the referent.
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: 'Namespace is the namespace of the referent.

                      This field is required when referring to a Namespace-scoped
                      resource and

                      MUST be unset when referring to a Cluster-scoped resource.'
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - group
                - kind
                - name
                type: object
            required:
            - controllerName
            type: object
          status:
            default:
              conditions:
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Accepted
            description: 'Status defines the current state of GatewayClass.


              Implementations MUST populate status on all GatewayClass resources which

              specify their controller name.'
            properties:
              conditions:
                default:
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Accepted
                description: 'Conditions is the current status from the controller
                  for

                  this GatewayClass.


                  Controllers should prefer to publish conditions using values

                  of GatewayClassConditionType for the type of each Condition.'
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              supportedFeatures:
                description: 'SupportedFeatures is the set of features the GatewayClass
                  support.

                  It MUST be sorted in ascending alphabetical order by the Name key.'
                items:
                  properties:
                    name:
                      description: 'FeatureName is used to describe distinct features
                        that are covered by

                        conformance tests.'
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  name: gateways.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: Gateway
    listKind: GatewayList
    plural: gateways
    shortNames:
    - gtw
    singular: gateway
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.gatewayClassName
      name: Class
      type: string
    - jsonPath: .status.addresses[*].value
      name: Address
      type: string
    - jsonPath: .status.conditions[?(@.type=="Programmed")].status
      name: Programmed
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: 'Gateway represents an instance of a service-traffic handling
          infrastructure

          by binding Listeners to a set of IP addresses.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of Gateway.
            properties:
              addresses:
                description: 'Addresses requested for this Gateway. This is optional
                  and behavior can

                  depend on the implementation. If a value is set in the spec and
                  the

                  requested address is invalid or unavailable, the implementation
                  MUST

                  indicate this in an associated entry in GatewayStatus.Conditions.


                  The Addresses field represents a request for the address(es) on
                  the

                  "outside of the Gateway", that traffic bound for this Gateway will
                  use.

                  This could be the IP address or hostname of an external load balancer
                  or

                  other networking infrastructure, or some other address that traffic
                  will

                  be sent to.


                  If no Addresses are specified, the implementation MAY schedule the

                  Gateway in an implementation-specific manner, assigning an appropriate

                  set of Addresses.


                  The implementation MUST bind all Listeners to every GatewayAddress
                  that

                  it assigns to the Gateway and add a corresponding entry in

                  GatewayStatus.Addresses.


                  Support: Extended'
                items:
                  description: GatewaySpecAddress describes an address that can be
                    bound to a Gateway.
                  oneOf:
                  - properties:
                      type:
                        enum:
                        - IPAddress
                      value:
                        anyOf:
                        - format: ipv4
                        - format: ipv6
                  - properties:
                      type:
                        not:
                          enum:
                          - IPAddress
                  properties:
                    type:
                      default: IPAddress
                      description: Type of the address.
                      maxLength: 253
                      minLength: 1
                      pattern: ^Hostname|IPAddress|NamedAddress|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    value:
                      description: 'When a value is unspecified, an implementation
                        SHOULD automatically

                        assign an address matching the requested type if possible.


                        If an implementation does not support an empty value, they
                        MUST set the

                        "Programmed" condition in status to False with a reason of
                        "AddressNotAssigned".


                        Examples: `1.2.3.4`, `128::1`, `my-ip-address`.'
                      maxLength: 253
                      type: string
                  type: object
                  x-kubernetes-validations:
                  - message: Hostname value must be empty or contain only valid characters
                      (matching ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$)
                    rule: 'self.type == ''Hostname'' ? (!has(self.value) || self.value.matches(r"""^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$""")):
                      true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: IPAddress values must be unique
                  rule: 'self.all(a1, a1.type == ''IPAddress'' && has(a1.value) ?
                    self.exists_one(a2, a2.type == a1.type && has(a2.value) && a2.value
                    == a1.value) : true )'
                - message: Hostname values must be unique
                  rule: 'self.all(a1, a1.type == ''Hostname''  && has(a1.value) ?
                    self.exists_one(a2, a2.type == a1.type && has(a2.value) && a2.value
                    == a1.value) : true )'
              gatewayClassName:
                description: 'GatewayClassName used for this Gateway. This is the
                  name of a

                  GatewayClass resource.'
                maxLength: 253
                minLength: 1
                type: string
              infrastructure:
                description: 'Infrastructure defines infrastructure level attributes
                  about this Gateway instance.


                  Support: Extended'
                properties:
                  annotations:
                    additionalProperties:
                      description: 'AnnotationValue is the value of an annotation
                        in Gateway API. This is used

                        for validation of maps such as TLS options. This roughly matches
                        Kubernetes

                        annotation validation, although the length validation in that
                        case is based

                        on the entire size of the annotations struct.'
                      maxLength: 4096
                      minLength: 0
                      type: string
                    description: 'Annotations that SHOULD be applied to any resources
                      created in response to this Gateway.


                      For implementations creating other Kubernetes objects, this
                      should be the `metadata.annotations` field on resources.

                      For other implementations, this refers to any relevant (implementation
                      specific) "annotations" concepts.


                      An implementation may chose to add additional implementation-specific
                      annotations as they see fit.


                      Support: Extended'
                    maxProperties: 8
                    type: object
                    x-kubernetes-validations:
                    - message: Annotation keys must be in the form of an optional
                        DNS subdomain prefix followed by a required name segment of
                        up to 63 characters.
                      rule: self.all(key, key.matches(r"""^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?([A-Za-z0-9][-A-Za-z0-9_.]{0,61})?[A-Za-z0-9]$"""))
                    - message: If specified, the annotation key's prefix must be a
                        DNS subdomain not longer than 253 characters in total.
                      rule: self.all(key, key.split("/")[0].size() < 253)
                  labels:
                    additionalProperties:
                      description: 'LabelValue is the value of a label in the Gateway
                        API. This is used for validation

                        of maps such as Gateway infrastructure labels. This matches
                        the Kubernetes

                        label validation rules:

                        * must be 63 characters or less (can be empty),

                        * unless empty, must begin and end with an alphanumeric character
                        ([a-z0-9A-Z]),

                        * could contain dashes (-), underscores (_), dots (.), and
                        alphanumerics between.


                        Valid values include:


                        * MyValue

                        * my.name

                        * 123-my-value'
                      maxLength: 63
                      minLength: 0
                      pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                      type: string
                    description: 'Labels that SHOULD be applied to any resources created
                      in response to this Gateway.


                      For implementations creating other Kubernetes objects, this
                      should be the `metadata.labels` field on resources.

                      For other implementations, this refers to any relevant (implementation
                      specific) "labels" concepts.


                      An implementation may chose to add additional implementation-specific
                      labels as they see fit.


                      If an implementation maps these labels to Pods, or any other
                      resource that would need to be recreated when labels

                      change, it SHOULD clearly warn about this behavior in documentation.


                      Support: Extended'
                    maxProperties: 8
                    type: object
                    x-kubernetes-validations:
                    - message: Label keys must be in the form of an optional DNS subdomain
                        prefix followed by a required name segment of up to 63 characters.
                      rule: self.all(key, key.matches(r"""^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?([A-Za-z0-9][-A-Za-z0-9_.]{0,61})?[A-Za-z0-9]$"""))
                    - message: If specified, the label key's prefix must be a DNS
                        subdomain not longer than 253 characters in total.
                      rule: self.all(key, key.split("/")[0].size() < 253)
                  parametersRef:
                    description: 'ParametersRef is a reference to a resource that
                      contains the configuration

                      parameters corresponding to the Gateway. This is optional if
                      the

                      controller does not require any additional configuration.


                      This follows the same semantics as GatewayClass''s `parametersRef`,
                      but on a per-Gateway basis


                      The Gateway''s GatewayClass may provide its own `parametersRef`.
                      When both are specified,

                      the merging behavior is implementation specific.

                      It is generally recommended that GatewayClass provides defaults
                      that can be overridden by a Gateway.


                      If the referent cannot be found, refers to an unsupported kind,
                      or when

                      the data within that resource is malformed, the Gateway SHOULD
                      be

                      rejected with the "Accepted" status condition set to "False"
                      and an

                      "InvalidParameters" reason.


                      Support: Implementation-specific'
                    properties:
                      group:
                        description: Group is the group of the referent.
                        maxLength: 253
                        pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      kind:
                        description: Kind is kind of the referent.
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                        type: string
                      name:
                        description: Name is the name of the referent.
                        maxLength: 253
                        minLength: 1
                        type: string
                    required:
                    - group
                    - kind
                    - name
                    type: object
                type: object
              listeners:
                description: "Listeners associated with this Gateway. Listeners define\n\
                  logical endpoints that are bound on this Gateway's addresses.\n\
                  At least one Listener MUST be specified.\n\n## Distinct Listeners\n\
                  \nEach Listener in a set of Listeners (for example, in a single\
                  \ Gateway)\nMUST be _distinct_, in that a traffic flow MUST be able\
                  \ to be assigned to\nexactly one listener. (This section uses \"\
                  set of Listeners\" rather than\n\"Listeners in a single Gateway\"\
                  \ because implementations MAY merge configuration\nfrom multiple\
                  \ Gateways onto a single data plane, and these rules _also_\napply\
                  \ in that case).\n\nPractically, this means that each listener in\
                  \ a set MUST have a unique\ncombination of Port, Protocol, and,\
                  \ if supported by the protocol, Hostname.\n\nSome combinations of\
                  \ port, protocol, and TLS settings are considered\nCore support\
                  \ and MUST be supported by implementations based on the objects\n\
                  they support:\n\nHTTPRoute\n\n1. HTTPRoute, Port: 80, Protocol:\
                  \ HTTP\n2. HTTPRoute, Port: 443, Protocol: HTTPS, TLS Mode: Terminate,\
                  \ TLS keypair provided\n\nTLSRoute\n\n1. TLSRoute, Port: 443, Protocol:\
                  \ TLS, TLS Mode: Passthrough\n\n\"Distinct\" Listeners have the\
                  \ following property:\n\n**The implementation can match inbound\
                  \ requests to a single distinct\nListener**.\n\nWhen multiple Listeners\
                  \ share values for fields (for\nexample, two Listeners with the\
                  \ same Port value), the implementation\ncan match requests to only\
                  \ one of the Listeners using other\nListener fields.\n\nWhen multiple\
                  \ listeners have the same value for the Protocol field, then\neach\
                  \ of the Listeners with matching Protocol values MUST have different\n\
                  values for other fields.\n\nThe set of fields that MUST be different\
                  \ for a Listener differs per protocol.\nThe following rules define\
                  \ the rules for what fields MUST be considered for\nListeners to\
                  \ be distinct with each protocol currently defined in the\nGateway\
                  \ API spec.\n\nThe set of listeners that all share a protocol value\
                  \ MUST have _different_\nvalues for _at least one_ of these fields\
                  \ to be distinct:\n\n* **HTTP, HTTPS, TLS**: Port, Hostname\n* **TCP,\
                  \ UDP**: Port\n\nOne **very** important rule to call out involves\
                  \ what happens when an\nimplementation:\n\n* Supports TCP protocol\
                  \ Listeners, as well as HTTP, HTTPS, or TLS protocol\n  Listeners,\
                  \ and\n* sees HTTP, HTTPS, or TLS protocols with the same `port`\
                  \ as one with TCP\n  Protocol.\n\nIn this case all the Listeners\
                  \ that share a port with the\nTCP Listener are not distinct and\
                  \ so MUST NOT be accepted.\n\nIf an implementation does not support\
                  \ TCP Protocol Listeners, then the\nprevious rule does not apply,\
                  \ and the TCP Listeners SHOULD NOT be\naccepted.\n\nNote that the\
                  \ `tls` field is not used for determining if a listener is distinct,\
                  \ because\nListeners that _only_ differ on TLS config will still\
                  \ conflict in all cases.\n\n### Listeners that are distinct only\
                  \ by Hostname\n\nWhen the Listeners are distinct based only on Hostname,\
                  \ inbound request\nhostnames MUST match from the most specific to\
                  \ least specific Hostname\nvalues to choose the correct Listener\
                  \ and its associated set of Routes.\n\nExact matches MUST be processed\
                  \ before wildcard matches, and wildcard\nmatches MUST be processed\
                  \ before fallback (empty Hostname value)\nmatches. For example,\
                  \ `\"foo.example.com\"` takes precedence over\n`\"*.example.com\"\
                  `, and `\"*.example.com\"` takes precedence over `\"\"`.\n\nAdditionally,\
                  \ if there are multiple wildcard entries, more specific\nwildcard\
                  \ entries must be processed before less specific wildcard entries.\n\
                  For example, `\"*.foo.example.com\"` takes precedence over `\"*.example.com\"\
                  `.\n\nThe precise definition here is that the higher the number\
                  \ of dots in the\nhostname to the right of the wildcard character,\
                  \ the higher the precedence.\n\nThe wildcard character will match\
                  \ any number of characters _and dots_ to\nthe left, however, so\
                  \ `\"*.example.com\"` will match both\n`\"foo.bar.example.com\"\
                  ` _and_ `\"bar.example.com\"`.\n\n## Handling indistinct Listeners\n\
                  \nIf a set of Listeners contains Listeners that are not distinct,\
                  \ then those\nListeners are _Conflicted_, and the implementation\
                  \ MUST set the \"Conflicted\"\ncondition in the Listener Status\
                  \ to \"True\".\n\nThe words \"indistinct\" and \"conflicted\" are\
                  \ considered equivalent for the\npurpose of this documentation.\n\
                  \nImplementations MAY choose to accept a Gateway with some Conflicted\n\
                  Listeners only if they only accept the partial Listener set that\
                  \ contains\nno Conflicted Listeners.\n\nSpecifically, an implementation\
                  \ MAY accept a partial Listener set subject to\nthe following rules:\n\
                  \n* The implementation MUST NOT pick one conflicting Listener as\
                  \ the winner.\n  ALL indistinct Listeners must not be accepted for\
                  \ processing.\n* At least one distinct Listener MUST be present,\
                  \ or else the Gateway effectively\n  contains _no_ Listeners, and\
                  \ must be rejected from processing as a whole.\n\nThe implementation\
                  \ MUST set a \"ListenersNotValid\" condition on the\nGateway Status\
                  \ when the Gateway contains Conflicted Listeners whether or\nnot\
                  \ they accept the Gateway. That Condition SHOULD clearly\nindicate\
                  \ in the Message which Listeners are conflicted, and which are\n\
                  Accepted. Additionally, the Listener status for those listeners\
                  \ SHOULD\nindicate which Listeners are conflicted and not Accepted.\n\
                  \n## General Listener behavior\n\nNote that, for all distinct Listeners,\
                  \ requests SHOULD match at most one Listener.\nFor example, if Listeners\
                  \ are defined for \"foo.example.com\" and \"*.example.com\", a\n\
                  request to \"foo.example.com\" SHOULD only be routed using routes\
                  \ attached\nto the \"foo.example.com\" Listener (and not the \"\
                  *.example.com\" Listener).\n\nThis concept is known as \"Listener\
                  \ Isolation\", and it is an Extended feature\nof Gateway API. Implementations\
                  \ that do not support Listener Isolation MUST\nclearly document\
                  \ this, and MUST NOT claim support for the\n`GatewayHTTPListenerIsolation`\
                  \ feature.\n\nImplementations that _do_ support Listener Isolation\
                  \ SHOULD claim support\nfor the Extended `GatewayHTTPListenerIsolation`\
                  \ feature and pass the associated\nconformance tests.\n\n## Compatible\
                  \ Listeners\n\nA Gateway's Listeners are considered _compatible_\
                  \ if:\n\n1. They are distinct.\n2. The implementation can serve\
                  \ them in compliance with the Addresses\n   requirement that all\
                  \ Listeners are available on all assigned\n   addresses.\n\nCompatible\
                  \ combinations in Extended support are expected to vary across\n\
                  implementations. A combination that is compatible for one implementation\n\
                  may not be compatible for another.\n\nFor example, an implementation\
                  \ that cannot serve both TCP and UDP listeners\non the same address,\
                  \ or cannot mix HTTPS and generic TLS listens on the same port\n\
                  would not consider those cases compatible, even though they are\
                  \ distinct.\n\nImplementations MAY merge separate Gateways onto\
                  \ a single set of\nAddresses if all Listeners across all Gateways\
                  \ are compatible.\n\nIn a future release the MinItems=1 requirement\
                  \ MAY be dropped.\n\nSupport: Core"
                items:
                  description: 'Listener embodies the concept of a logical endpoint
                    where a Gateway accepts

                    network connections.'
                  properties:
                    allowedRoutes:
                      default:
                        namespaces:
                          from: Same
                      description: "AllowedRoutes defines the types of routes that\
                        \ MAY be attached to a\nListener and the trusted namespaces\
                        \ where those Route resources MAY be\npresent.\n\nAlthough\
                        \ a client request may match multiple route rules, only one\
                        \ rule\nmay ultimately receive the request. Matching precedence\
                        \ MUST be\ndetermined in order of the following criteria:\n\
                        \n* The most specific match as defined by the Route type.\n\
                        * The oldest Route based on creation timestamp. For example,\
                        \ a Route with\n  a creation timestamp of \"2020-09-08 01:02:03\"\
                        \ is given precedence over\n  a Route with a creation timestamp\
                        \ of \"2020-09-08 01:02:04\".\n* If everything else is equivalent,\
                        \ the Route appearing first in\n  alphabetical order (namespace/name)\
                        \ should be given precedence. For\n  example, foo/bar is given\
                        \ precedence over foo/baz.\n\nAll valid rules within a Route\
                        \ attached to this Listener should be\nimplemented. Invalid\
                        \ Route rules can be ignored (sometimes that will mean\nthe\
                        \ full Route). If a Route rule transitions from valid to invalid,\n\
                        support for that Route rule should be dropped to ensure consistency.\
                        \ For\nexample, even if a filter specified by a Route rule\
                        \ is invalid, the rest\nof the rules within that Route should\
                        \ still be supported.\n\nSupport: Core"
                      properties:
                        kinds:
                          description: 'Kinds specifies the groups and kinds of Routes
                            that are allowed to bind

                            to this Gateway Listener. When unspecified or empty, the
                            kinds of Routes

                            selected are determined using the Listener protocol.


                            A RouteGroupKind MUST correspond to kinds of Routes that
                            are compatible

                            with the application protocol specified in the Listener''s
                            Protocol field.

                            If an implementation does not support or recognize this
                            resource type, it

                            MUST set the "ResolvedRefs" condition to False for this
                            Listener with the

                            "InvalidRouteKinds" reason.


                            Support: Core'
                          items:
                            description: RouteGroupKind indicates the group and kind
                              of a Route resource.
                            properties:
                              group:
                                default: gateway.networking.k8s.io
                                description: Group is the group of the Route.
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                description: Kind is the kind of the Route.
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                            required:
                            - kind
                            type: object
                          maxItems: 8
                          type: array
                          x-kubernetes-list-type: atomic
                        namespaces:
                          default:
                            from: Same
                          description: 'Namespaces indicates namespaces from which
                            Routes may be attached to this

                            Listener. This is restricted to the namespace of this
                            Gateway by default.


                            Support: Core'
                          properties:
                            from:
                              default: Same
                              description: "From indicates where Routes will be selected\
                                \ for this Gateway. Possible\nvalues are:\n\n* All:\
                                \ Routes in all namespaces may be used by this Gateway.\n\
                                * Selector: Routes in namespaces selected by the selector\
                                \ may be used by\n  this Gateway.\n* Same: Only Routes\
                                \ in the same namespace may be used by this Gateway.\n\
                                \nSupport: Core"
                              enum:
                              - All
                              - Selector
                              - Same
                              type: string
                            selector:
                              description: 'Selector must be specified when From is
                                set to "Selector". In that case,

                                only Routes in Namespaces matching this Selector will
                                be selected by this

                                Gateway. This field is ignored for other values of
                                "From".


                                Support: Core'
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: 'A label selector requirement is
                                      a selector that contains values, a key, and
                                      an operator that

                                      relates the key and values.'
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: 'operator represents a key''s
                                          relationship to a set of values.

                                          Valid operators are In, NotIn, Exists and
                                          DoesNotExist.'
                                        type: string
                                      values:
                                        description: 'values is an array of string
                                          values. If the operator is In or NotIn,

                                          the values array must be non-empty. If the
                                          operator is Exists or DoesNotExist,

                                          the values array must be empty. This array
                                          is replaced during a strategic

                                          merge patch.'
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: 'matchLabels is a map of {key,value}
                                    pairs. A single {key,value} in the matchLabels

                                    map is equivalent to an element of matchExpressions,
                                    whose key field is "key", the

                                    operator is "In", and the values array contains
                                    only "value". The requirements are ANDed.'
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                          type: object
                      type: object
                    hostname:
                      description: "Hostname specifies the virtual hostname to match\
                        \ for protocol types that\ndefine this concept. When unspecified,\
                        \ all hostnames are matched. This\nfield is ignored for protocols\
                        \ that don't require hostname based\nmatching.\n\nImplementations\
                        \ MUST apply Hostname matching appropriately for each of\n\
                        the following protocols:\n\n* TLS: The Listener Hostname MUST\
                        \ match the SNI.\n* HTTP: The Listener Hostname MUST match\
                        \ the Host header of the request.\n* HTTPS: The Listener Hostname\
                        \ SHOULD match both the SNI and Host header.\n  Note that\
                        \ this does not require the SNI and Host header to be the\
                        \ same.\n  The semantics of this are described in more detail\
                        \ below.\n\nTo ensure security, Section 11.1 of RFC-6066 emphasizes\
                        \ that server\nimplementations that rely on SNI hostname matching\
                        \ MUST also verify\nhostnames within the application protocol.\n\
                        \nSection 9.1.2 of RFC-7540 provides a mechanism for servers\
                        \ to reject the\nreuse of a connection by responding with\
                        \ the HTTP 421 Misdirected Request\nstatus code. This indicates\
                        \ that the origin server has rejected the\nrequest because\
                        \ it appears to have been misdirected.\n\nTo detect misdirected\
                        \ requests, Gateways SHOULD match the authority of\nthe requests\
                        \ with all the SNI hostname(s) configured across all the\n\
                        Gateway Listeners on the same port and protocol:\n\n* If another\
                        \ Listener has an exact match or more specific wildcard entry,\n\
                        \  the Gateway SHOULD return a 421.\n* If the current Listener\
                        \ (selected by SNI matching during ClientHello)\n  does not\
                        \ match the Host:\n    * If another Listener does match the\
                        \ Host the Gateway SHOULD return a\n      421.\n    * If no\
                        \ other Listener matches the Host, the Gateway MUST return\
                        \ a\n      404.\n\nFor HTTPRoute and TLSRoute resources, there\
                        \ is an interaction with the\n`spec.hostnames` array. When\
                        \ both listener and route specify hostnames,\nthere MUST be\
                        \ an intersection between the values for a Route to be\naccepted.\
                        \ For more information, refer to the Route specific Hostnames\n\
                        documentation.\n\nHostnames that are prefixed with a wildcard\
                        \ label (`*.`) are interpreted\nas a suffix match. That means\
                        \ that a match for `*.example.com` would match\nboth `test.example.com`,\
                        \ and `foo.test.example.com`, but not `example.com`.\n\nSupport:\
                        \ Core"
                      maxLength: 253
                      minLength: 1
                      pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    name:
                      description: 'Name is the name of the Listener. This name MUST
                        be unique within a

                        Gateway.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    port:
                      description: 'Port is the network port. Multiple listeners may
                        use the

                        same port, subject to the Listener compatibility rules.


                        Support: Core'
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    protocol:
                      description: 'Protocol specifies the network protocol this listener
                        expects to receive.


                        Support: Core'
                      maxLength: 255
                      minLength: 1
                      pattern: ^[a-zA-Z0-9]([-a-zA-Z0-9]*[a-zA-Z0-9])?$|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9]+$
                      type: string
                    tls:
                      description: 'TLS is the TLS configuration for the Listener.
                        This field is required if

                        the Protocol field is "HTTPS" or "TLS". It is invalid to set
                        this field

                        if the Protocol field is "HTTP", "TCP", or "UDP".


                        The association of SNIs to Certificate defined in ListenerTLSConfig
                        is

                        defined based on the Hostname field for this listener.


                        The GatewayClass MUST use the longest matching SNI out of
                        all

                        available certificates for any TLS handshake.


                        Support: Core'
                      properties:
                        certificateRefs:
                          description: 'CertificateRefs contains a series of references
                            to Kubernetes objects that

                            contains TLS certificates and private keys. These certificates
                            are used to

                            establish a TLS handshake for requests that match the
                            hostname of the

                            associated listener.


                            A single CertificateRef to a Kubernetes Secret has "Core"
                            support.

                            Implementations MAY choose to support attaching multiple
                            certificates to

                            a Listener, but this behavior is implementation-specific.


                            References to a resource in different namespace are invalid
                            UNLESS there

                            is a ReferenceGrant in the target namespace that allows
                            the certificate

                            to be attached. If a ReferenceGrant does not allow this
                            reference, the

                            "ResolvedRefs" condition MUST be set to False for this
                            listener with the

                            "RefNotPermitted" reason.


                            This field is required to have at least one element when
                            the mode is set

                            to "Terminate" (default) and is optional otherwise.


                            CertificateRefs can reference to standard Kubernetes resources,
                            i.e.

                            Secret, or implementation-specific custom resources.


                            Support: Core - A single reference to a Kubernetes Secret
                            of type kubernetes.io/tls


                            Support: Implementation-specific (More than one reference
                            or other resource types)'
                          items:
                            description: 'SecretObjectReference identifies an API
                              object including its namespace,

                              defaulting to Secret.


                              The API object must be valid in the cluster; the Group
                              and Kind must

                              be registered in the cluster for this reference to be
                              valid.


                              References to objects with invalid Group and Kind are
                              not valid, and must

                              be rejected by the implementation, with appropriate
                              Conditions set

                              on the containing object.'
                            properties:
                              group:
                                default: ''
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Secret
                                description: Kind is kind of the referent. For example
                                  "Secret".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                description: 'Namespace is the namespace of the referenced
                                  object. When unspecified, the local

                                  namespace is inferred.


                                  Note that when a namespace different than the local
                                  namespace is specified,

                                  a ReferenceGrant object is required in the referent
                                  namespace to allow that

                                  namespace''s owner to accept the reference. See
                                  the ReferenceGrant

                                  documentation for details.


                                  Support: Core'
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                            required:
                            - name
                            type: object
                          maxItems: 64
                          type: array
                          x-kubernetes-list-type: atomic
                        mode:
                          default: Terminate
                          description: "Mode defines the TLS behavior for the TLS\
                            \ session initiated by the client.\nThere are two possible\
                            \ modes:\n\n- Terminate: The TLS session between the downstream\
                            \ client and the\n  Gateway is terminated at the Gateway.\
                            \ This mode requires certificates\n  to be specified in\
                            \ some way, such as populating the certificateRefs\n \
                            \ field.\n- Passthrough: The TLS session is NOT terminated\
                            \ by the Gateway. This\n  implies that the Gateway can't\
                            \ decipher the TLS stream except for\n  the ClientHello\
                            \ message of the TLS protocol. The certificateRefs field\n\
                            \  is ignored in this mode.\n\nSupport: Core"
                          enum:
                          - Terminate
                          - Passthrough
                          type: string
                        options:
                          additionalProperties:
                            description: 'AnnotationValue is the value of an annotation
                              in Gateway API. This is used

                              for validation of maps such as TLS options. This roughly
                              matches Kubernetes

                              annotation validation, although the length validation
                              in that case is based

                              on the entire size of the annotations struct.'
                            maxLength: 4096
                            minLength: 0
                            type: string
                          description: 'Options are a list of key/value pairs to enable
                            extended TLS

                            configuration for each implementation. For example, configuring
                            the

                            minimum TLS version or supported cipher suites.


                            A set of common keys MAY be defined by the API in the
                            future. To avoid

                            any ambiguity, implementation-specific definitions MUST
                            use

                            domain-prefixed names, such as `example.com/my-custom-option`.

                            Un-prefixed names are reserved for key names defined by
                            Gateway API.


                            Support: Implementation-specific'
                          maxProperties: 16
                          type: object
                      type: object
                      x-kubernetes-validations:
                      - message: certificateRefs or options must be specified when
                          mode is Terminate
                        rule: 'self.mode == ''Terminate'' ? size(self.certificateRefs)
                          > 0 || size(self.options) > 0 : true'
                  required:
                  - name
                  - port
                  - protocol
                  type: object
                maxItems: 64
                minItems: 1
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
                x-kubernetes-validations:
                - message: tls must not be specified for protocols ['HTTP', 'TCP',
                    'UDP']
                  rule: 'self.all(l, l.protocol in [''HTTP'', ''TCP'', ''UDP''] ?
                    !has(l.tls) : true)'
                - message: tls mode must be Terminate for protocol HTTPS
                  rule: 'self.all(l, (l.protocol == ''HTTPS'' && has(l.tls)) ? (l.tls.mode
                    == '''' || l.tls.mode == ''Terminate'') : true)'
                - message: hostname must not be specified for protocols ['TCP', 'UDP']
                  rule: 'self.all(l, l.protocol in [''TCP'', ''UDP'']  ? (!has(l.hostname)
                    || l.hostname == '''') : true)'
                - message: Listener name must be unique within the Gateway
                  rule: self.all(l1, self.exists_one(l2, l1.name == l2.name))
                - message: Combination of port, protocol and hostname must be unique
                    for each listener
                  rule: 'self.all(l1, self.exists_one(l2, l1.port == l2.port && l1.protocol
                    == l2.protocol && (has(l1.hostname) && has(l2.hostname) ? l1.hostname
                    == l2.hostname : !has(l1.hostname) && !has(l2.hostname))))'
            required:
            - gatewayClassName
            - listeners
            type: object
          status:
            default:
              conditions:
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Accepted
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Programmed
            description: Status defines the current state of Gateway.
            properties:
              addresses:
                description: "Addresses lists the network addresses that have been\
                  \ bound to the\nGateway.\n\nThis list may differ from the addresses\
                  \ provided in the spec under some\nconditions:\n\n  * no addresses\
                  \ are specified, all addresses are dynamically assigned\n  * a combination\
                  \ of specified and dynamic addresses are assigned\n  * a specified\
                  \ address was unusable (e.g. already in use)"
                items:
                  description: GatewayStatusAddress describes a network address that
                    is bound to a Gateway.
                  oneOf:
                  - properties:
                      type:
                        enum:
                        - IPAddress
                      value:
                        anyOf:
                        - format: ipv4
                        - format: ipv6
                  - properties:
                      type:
                        not:
                          enum:
                          - IPAddress
                  properties:
                    type:
                      default: IPAddress
                      description: Type of the address.
                      maxLength: 253
                      minLength: 1
                      pattern: ^Hostname|IPAddress|NamedAddress|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    value:
                      description: 'Value of the address. The validity of the values
                        will depend

                        on the type and support by the controller.


                        Examples: `1.2.3.4`, `128::1`, `my-ip-address`.'
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - value
                  type: object
                  x-kubernetes-validations:
                  - message: Hostname value must only contain valid characters (matching
                      ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$)
                    rule: 'self.type == ''Hostname'' ? self.value.matches(r"""^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"""):
                      true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
              conditions:
                default:
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Accepted
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Programmed
                description: 'Conditions describe the current conditions of the Gateway.


                  Implementations should prefer to express Gateway conditions

                  using the `GatewayConditionType` and `GatewayConditionReason`

                  constants so that operators and tools can converge on a common

                  vocabulary to describe Gateway state.


                  Known condition types are:


                  * "Accepted"

                  * "Programmed"

                  * "Ready"'
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              listeners:
                description: Listeners provide status for each unique listener port
                  defined in the Spec.
                items:
                  description: ListenerStatus is the status associated with a Listener.
                  properties:
                    attachedRoutes:
                      description: 'AttachedRoutes represents the total number of
                        Routes that have been

                        successfully attached to this Listener.


                        Successful attachment of a Route to a Listener is based solely
                        on the

                        combination of the AllowedRoutes field on the corresponding
                        Listener

                        and the Route''s ParentRefs field. A Route is successfully
                        attached to

                        a Listener when it is selected by the Listener''s AllowedRoutes
                        field

                        AND the Route has a valid ParentRef selecting the whole Gateway

                        resource or a specific Listener as a parent resource (more
                        detail on

                        attachment semantics can be found in the documentation on
                        the various

                        Route kinds ParentRefs fields). Listener or Route status does
                        not impact

                        successful attachment, i.e. the AttachedRoutes field count
                        MUST be set

                        for Listeners with condition Accepted: false and MUST count
                        successfully

                        attached Routes that may themselves have Accepted: false conditions.


                        Uses for this field include troubleshooting Route attachment
                        and

                        measuring blast radius/impact of changes to a Listener.'
                      format: int32
                      type: integer
                    conditions:
                      description: Conditions describe the current condition of this
                        listener.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    name:
                      description: Name is the name of the Listener that this status
                        corresponds to.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    supportedKinds:
                      description: 'SupportedKinds is the list indicating the Kinds
                        supported by this

                        listener. This MUST represent the kinds an implementation
                        supports for

                        that Listener configuration.


                        If kinds are specified in Spec that are not supported, they
                        MUST NOT

                        appear in this list and an implementation MUST set the "ResolvedRefs"

                        condition to "False" with the "InvalidRouteKinds" reason.
                        If both valid

                        and invalid Route kinds are specified, the implementation
                        MUST

                        reference the valid Route kinds that have been specified.'
                      items:
                        description: RouteGroupKind indicates the group and kind of
                          a Route resource.
                        properties:
                          group:
                            default: gateway.networking.k8s.io
                            description: Group is the group of the Route.
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            description: Kind is the kind of the Route.
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                        required:
                        - kind
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-type: atomic
                  required:
                  - attachedRoutes
                  - conditions
                  - name
                  - supportedKinds
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.gatewayClassName
      name: Class
      type: string
    - jsonPath: .status.addresses[*].value
      name: Address
      type: string
    - jsonPath: .status.conditions[?(@.type=="Programmed")].status
      name: Programmed
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: 'Gateway represents an instance of a service-traffic handling
          infrastructure

          by binding Listeners to a set of IP addresses.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of Gateway.
            properties:
              addresses:
                description: 'Addresses requested for this Gateway. This is optional
                  and behavior can

                  depend on the implementation. If a value is set in the spec and
                  the

                  requested address is invalid or unavailable, the implementation
                  MUST

                  indicate this in an associated entry in GatewayStatus.Conditions.


                  The Addresses field represents a request for the address(es) on
                  the

                  "outside of the Gateway", that traffic bound for this Gateway will
                  use.

                  This could be the IP address or hostname of an external load balancer
                  or

                  other networking infrastructure, or some other address that traffic
                  will

                  be sent to.


                  If no Addresses are specified, the implementation MAY schedule the

                  Gateway in an implementation-specific manner, assigning an appropriate

                  set of Addresses.


                  The implementation MUST bind all Listeners to every GatewayAddress
                  that

                  it assigns to the Gateway and add a corresponding entry in

                  GatewayStatus.Addresses.


                  Support: Extended'
                items:
                  description: GatewaySpecAddress describes an address that can be
                    bound to a Gateway.
                  oneOf:
                  - properties:
                      type:
                        enum:
                        - IPAddress
                      value:
                        anyOf:
                        - format: ipv4
                        - format: ipv6
                  - properties:
                      type:
                        not:
                          enum:
                          - IPAddress
                  properties:
                    type:
                      default: IPAddress
                      description: Type of the address.
                      maxLength: 253
                      minLength: 1
                      pattern: ^Hostname|IPAddress|NamedAddress|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    value:
                      description: 'When a value is unspecified, an implementation
                        SHOULD automatically

                        assign an address matching the requested type if possible.


                        If an implementation does not support an empty value, they
                        MUST set the

                        "Programmed" condition in status to False with a reason of
                        "AddressNotAssigned".


                        Examples: `1.2.3.4`, `128::1`, `my-ip-address`.'
                      maxLength: 253
                      type: string
                  type: object
                  x-kubernetes-validations:
                  - message: Hostname value must be empty or contain only valid characters
                      (matching ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$)
                    rule: 'self.type == ''Hostname'' ? (!has(self.value) || self.value.matches(r"""^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$""")):
                      true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: IPAddress values must be unique
                  rule: 'self.all(a1, a1.type == ''IPAddress'' && has(a1.value) ?
                    self.exists_one(a2, a2.type == a1.type && has(a2.value) && a2.value
                    == a1.value) : true )'
                - message: Hostname values must be unique
                  rule: 'self.all(a1, a1.type == ''Hostname''  && has(a1.value) ?
                    self.exists_one(a2, a2.type == a1.type && has(a2.value) && a2.value
                    == a1.value) : true )'
              gatewayClassName:
                description: 'GatewayClassName used for this Gateway. This is the
                  name of a

                  GatewayClass resource.'
                maxLength: 253
                minLength: 1
                type: string
              infrastructure:
                description: 'Infrastructure defines infrastructure level attributes
                  about this Gateway instance.


                  Support: Extended'
                properties:
                  annotations:
                    additionalProperties:
                      description: 'AnnotationValue is the value of an annotation
                        in Gateway API. This is used

                        for validation of maps such as TLS options. This roughly matches
                        Kubernetes

                        annotation validation, although the length validation in that
                        case is based

                        on the entire size of the annotations struct.'
                      maxLength: 4096
                      minLength: 0
                      type: string
                    description: 'Annotations that SHOULD be applied to any resources
                      created in response to this Gateway.


                      For implementations creating other Kubernetes objects, this
                      should be the `metadata.annotations` field on resources.

                      For other implementations, this refers to any relevant (implementation
                      specific) "annotations" concepts.


                      An implementation may chose to add additional implementation-specific
                      annotations as they see fit.


                      Support: Extended'
                    maxProperties: 8
                    type: object
                    x-kubernetes-validations:
                    - message: Annotation keys must be in the form of an optional
                        DNS subdomain prefix followed by a required name segment of
                        up to 63 characters.
                      rule: self.all(key, key.matches(r"""^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?([A-Za-z0-9][-A-Za-z0-9_.]{0,61})?[A-Za-z0-9]$"""))
                    - message: If specified, the annotation key's prefix must be a
                        DNS subdomain not longer than 253 characters in total.
                      rule: self.all(key, key.split("/")[0].size() < 253)
                  labels:
                    additionalProperties:
                      description: 'LabelValue is the value of a label in the Gateway
                        API. This is used for validation

                        of maps such as Gateway infrastructure labels. This matches
                        the Kubernetes

                        label validation rules:

                        * must be 63 characters or less (can be empty),

                        * unless empty, must begin and end with an alphanumeric character
                        ([a-z0-9A-Z]),

                        * could contain dashes (-), underscores (_), dots (.), and
                        alphanumerics between.


                        Valid values include:


                        * MyValue

                        * my.name

                        * 123-my-value'
                      maxLength: 63
                      minLength: 0
                      pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                      type: string
                    description: 'Labels that SHOULD be applied to any resources created
                      in response to this Gateway.


                      For implementations creating other Kubernetes objects, this
                      should be the `metadata.labels` field on resources.

                      For other implementations, this refers to any relevant (implementation
                      specific) "labels" concepts.


                      An implementation may chose to add additional implementation-specific
                      labels as they see fit.


                      If an implementation maps these labels to Pods, or any other
                      resource that would need to be recreated when labels

                      change, it SHOULD clearly warn about this behavior in documentation.


                      Support: Extended'
                    maxProperties: 8
                    type: object
                    x-kubernetes-validations:
                    - message: Label keys must be in the form of an optional DNS subdomain
                        prefix followed by a required name segment of up to 63 characters.
                      rule: self.all(key, key.matches(r"""^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?([A-Za-z0-9][-A-Za-z0-9_.]{0,61})?[A-Za-z0-9]$"""))
                    - message: If specified, the label key's prefix must be a DNS
                        subdomain not longer than 253 characters in total.
                      rule: self.all(key, key.split("/")[0].size() < 253)
                  parametersRef:
                    description: 'ParametersRef is a reference to a resource that
                      contains the configuration

                      parameters corresponding to the Gateway. This is optional if
                      the

                      controller does not require any additional configuration.


                      This follows the same semantics as GatewayClass''s `parametersRef`,
                      but on a per-Gateway basis


                      The Gateway''s GatewayClass may provide its own `parametersRef`.
                      When both are specified,

                      the merging behavior is implementation specific.

                      It is generally recommended that GatewayClass provides defaults
                      that can be overridden by a Gateway.


                      If the referent cannot be found, refers to an unsupported kind,
                      or when

                      the data within that resource is malformed, the Gateway SHOULD
                      be

                      rejected with the "Accepted" status condition set to "False"
                      and an

                      "InvalidParameters" reason.


                      Support: Implementation-specific'
                    properties:
                      group:
                        description: Group is the group of the referent.
                        maxLength: 253
                        pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      kind:
                        description: Kind is kind of the referent.
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                        type: string
                      name:
                        description: Name is the name of the referent.
                        maxLength: 253
                        minLength: 1
                        type: string
                    required:
                    - group
                    - kind
                    - name
                    type: object
                type: object
              listeners:
                description: "Listeners associated with this Gateway. Listeners define\n\
                  logical endpoints that are bound on this Gateway's addresses.\n\
                  At least one Listener MUST be specified.\n\n## Distinct Listeners\n\
                  \nEach Listener in a set of Listeners (for example, in a single\
                  \ Gateway)\nMUST be _distinct_, in that a traffic flow MUST be able\
                  \ to be assigned to\nexactly one listener. (This section uses \"\
                  set of Listeners\" rather than\n\"Listeners in a single Gateway\"\
                  \ because implementations MAY merge configuration\nfrom multiple\
                  \ Gateways onto a single data plane, and these rules _also_\napply\
                  \ in that case).\n\nPractically, this means that each listener in\
                  \ a set MUST have a unique\ncombination of Port, Protocol, and,\
                  \ if supported by the protocol, Hostname.\n\nSome combinations of\
                  \ port, protocol, and TLS settings are considered\nCore support\
                  \ and MUST be supported by implementations based on the objects\n\
                  they support:\n\nHTTPRoute\n\n1. HTTPRoute, Port: 80, Protocol:\
                  \ HTTP\n2. HTTPRoute, Port: 443, Protocol: HTTPS, TLS Mode: Terminate,\
                  \ TLS keypair provided\n\nTLSRoute\n\n1. TLSRoute, Port: 443, Protocol:\
                  \ TLS, TLS Mode: Passthrough\n\n\"Distinct\" Listeners have the\
                  \ following property:\n\n**The implementation can match inbound\
                  \ requests to a single distinct\nListener**.\n\nWhen multiple Listeners\
                  \ share values for fields (for\nexample, two Listeners with the\
                  \ same Port value), the implementation\ncan match requests to only\
                  \ one of the Listeners using other\nListener fields.\n\nWhen multiple\
                  \ listeners have the same value for the Protocol field, then\neach\
                  \ of the Listeners with matching Protocol values MUST have different\n\
                  values for other fields.\n\nThe set of fields that MUST be different\
                  \ for a Listener differs per protocol.\nThe following rules define\
                  \ the rules for what fields MUST be considered for\nListeners to\
                  \ be distinct with each protocol currently defined in the\nGateway\
                  \ API spec.\n\nThe set of listeners that all share a protocol value\
                  \ MUST have _different_\nvalues for _at least one_ of these fields\
                  \ to be distinct:\n\n* **HTTP, HTTPS, TLS**: Port, Hostname\n* **TCP,\
                  \ UDP**: Port\n\nOne **very** important rule to call out involves\
                  \ what happens when an\nimplementation:\n\n* Supports TCP protocol\
                  \ Listeners, as well as HTTP, HTTPS, or TLS protocol\n  Listeners,\
                  \ and\n* sees HTTP, HTTPS, or TLS protocols with the same `port`\
                  \ as one with TCP\n  Protocol.\n\nIn this case all the Listeners\
                  \ that share a port with the\nTCP Listener are not distinct and\
                  \ so MUST NOT be accepted.\n\nIf an implementation does not support\
                  \ TCP Protocol Listeners, then the\nprevious rule does not apply,\
                  \ and the TCP Listeners SHOULD NOT be\naccepted.\n\nNote that the\
                  \ `tls` field is not used for determining if a listener is distinct,\
                  \ because\nListeners that _only_ differ on TLS config will still\
                  \ conflict in all cases.\n\n### Listeners that are distinct only\
                  \ by Hostname\n\nWhen the Listeners are distinct based only on Hostname,\
                  \ inbound request\nhostnames MUST match from the most specific to\
                  \ least specific Hostname\nvalues to choose the correct Listener\
                  \ and its associated set of Routes.\n\nExact matches MUST be processed\
                  \ before wildcard matches, and wildcard\nmatches MUST be processed\
                  \ before fallback (empty Hostname value)\nmatches. For example,\
                  \ `\"foo.example.com\"` takes precedence over\n`\"*.example.com\"\
                  `, and `\"*.example.com\"` takes precedence over `\"\"`.\n\nAdditionally,\
                  \ if there are multiple wildcard entries, more specific\nwildcard\
                  \ entries must be processed before less specific wildcard entries.\n\
                  For example, `\"*.foo.example.com\"` takes precedence over `\"*.example.com\"\
                  `.\n\nThe precise definition here is that the higher the number\
                  \ of dots in the\nhostname to the right of the wildcard character,\
                  \ the higher the precedence.\n\nThe wildcard character will match\
                  \ any number of characters _and dots_ to\nthe left, however, so\
                  \ `\"*.example.com\"` will match both\n`\"foo.bar.example.com\"\
                  ` _and_ `\"bar.example.com\"`.\n\n## Handling indistinct Listeners\n\
                  \nIf a set of Listeners contains Listeners that are not distinct,\
                  \ then those\nListeners are _Conflicted_, and the implementation\
                  \ MUST set the \"Conflicted\"\ncondition in the Listener Status\
                  \ to \"True\".\n\nThe words \"indistinct\" and \"conflicted\" are\
                  \ considered equivalent for the\npurpose of this documentation.\n\
                  \nImplementations MAY choose to accept a Gateway with some Conflicted\n\
                  Listeners only if they only accept the partial Listener set that\
                  \ contains\nno Conflicted Listeners.\n\nSpecifically, an implementation\
                  \ MAY accept a partial Listener set subject to\nthe following rules:\n\
                  \n* The implementation MUST NOT pick one conflicting Listener as\
                  \ the winner.\n  ALL indistinct Listeners must not be accepted for\
                  \ processing.\n* At least one distinct Listener MUST be present,\
                  \ or else the Gateway effectively\n  contains _no_ Listeners, and\
                  \ must be rejected from processing as a whole.\n\nThe implementation\
                  \ MUST set a \"ListenersNotValid\" condition on the\nGateway Status\
                  \ when the Gateway contains Conflicted Listeners whether or\nnot\
                  \ they accept the Gateway. That Condition SHOULD clearly\nindicate\
                  \ in the Message which Listeners are conflicted, and which are\n\
                  Accepted. Additionally, the Listener status for those listeners\
                  \ SHOULD\nindicate which Listeners are conflicted and not Accepted.\n\
                  \n## General Listener behavior\n\nNote that, for all distinct Listeners,\
                  \ requests SHOULD match at most one Listener.\nFor example, if Listeners\
                  \ are defined for \"foo.example.com\" and \"*.example.com\", a\n\
                  request to \"foo.example.com\" SHOULD only be routed using routes\
                  \ attached\nto the \"foo.example.com\" Listener (and not the \"\
                  *.example.com\" Listener).\n\nThis concept is known as \"Listener\
                  \ Isolation\", and it is an Extended feature\nof Gateway API. Implementations\
                  \ that do not support Listener Isolation MUST\nclearly document\
                  \ this, and MUST NOT claim support for the\n`GatewayHTTPListenerIsolation`\
                  \ feature.\n\nImplementations that _do_ support Listener Isolation\
                  \ SHOULD claim support\nfor the Extended `GatewayHTTPListenerIsolation`\
                  \ feature and pass the associated\nconformance tests.\n\n## Compatible\
                  \ Listeners\n\nA Gateway's Listeners are considered _compatible_\
                  \ if:\n\n1. They are distinct.\n2. The implementation can serve\
                  \ them in compliance with the Addresses\n   requirement that all\
                  \ Listeners are available on all assigned\n   addresses.\n\nCompatible\
                  \ combinations in Extended support are expected to vary across\n\
                  implementations. A combination that is compatible for one implementation\n\
                  may not be compatible for another.\n\nFor example, an implementation\
                  \ that cannot serve both TCP and UDP listeners\non the same address,\
                  \ or cannot mix HTTPS and generic TLS listens on the same port\n\
                  would not consider those cases compatible, even though they are\
                  \ distinct.\n\nImplementations MAY merge separate Gateways onto\
                  \ a single set of\nAddresses if all Listeners across all Gateways\
                  \ are compatible.\n\nIn a future release the MinItems=1 requirement\
                  \ MAY be dropped.\n\nSupport: Core"
                items:
                  description: 'Listener embodies the concept of a logical endpoint
                    where a Gateway accepts

                    network connections.'
                  properties:
                    allowedRoutes:
                      default:
                        namespaces:
                          from: Same
                      description: "AllowedRoutes defines the types of routes that\
                        \ MAY be attached to a\nListener and the trusted namespaces\
                        \ where those Route resources MAY be\npresent.\n\nAlthough\
                        \ a client request may match multiple route rules, only one\
                        \ rule\nmay ultimately receive the request. Matching precedence\
                        \ MUST be\ndetermined in order of the following criteria:\n\
                        \n* The most specific match as defined by the Route type.\n\
                        * The oldest Route based on creation timestamp. For example,\
                        \ a Route with\n  a creation timestamp of \"2020-09-08 01:02:03\"\
                        \ is given precedence over\n  a Route with a creation timestamp\
                        \ of \"2020-09-08 01:02:04\".\n* If everything else is equivalent,\
                        \ the Route appearing first in\n  alphabetical order (namespace/name)\
                        \ should be given precedence. For\n  example, foo/bar is given\
                        \ precedence over foo/baz.\n\nAll valid rules within a Route\
                        \ attached to this Listener should be\nimplemented. Invalid\
                        \ Route rules can be ignored (sometimes that will mean\nthe\
                        \ full Route). If a Route rule transitions from valid to invalid,\n\
                        support for that Route rule should be dropped to ensure consistency.\
                        \ For\nexample, even if a filter specified by a Route rule\
                        \ is invalid, the rest\nof the rules within that Route should\
                        \ still be supported.\n\nSupport: Core"
                      properties:
                        kinds:
                          description: 'Kinds specifies the groups and kinds of Routes
                            that are allowed to bind

                            to this Gateway Listener. When unspecified or empty, the
                            kinds of Routes

                            selected are determined using the Listener protocol.


                            A RouteGroupKind MUST correspond to kinds of Routes that
                            are compatible

                            with the application protocol specified in the Listener''s
                            Protocol field.

                            If an implementation does not support or recognize this
                            resource type, it

                            MUST set the "ResolvedRefs" condition to False for this
                            Listener with the

                            "InvalidRouteKinds" reason.


                            Support: Core'
                          items:
                            description: RouteGroupKind indicates the group and kind
                              of a Route resource.
                            properties:
                              group:
                                default: gateway.networking.k8s.io
                                description: Group is the group of the Route.
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                description: Kind is the kind of the Route.
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                            required:
                            - kind
                            type: object
                          maxItems: 8
                          type: array
                          x-kubernetes-list-type: atomic
                        namespaces:
                          default:
                            from: Same
                          description: 'Namespaces indicates namespaces from which
                            Routes may be attached to this

                            Listener. This is restricted to the namespace of this
                            Gateway by default.


                            Support: Core'
                          properties:
                            from:
                              default: Same
                              description: "From indicates where Routes will be selected\
                                \ for this Gateway. Possible\nvalues are:\n\n* All:\
                                \ Routes in all namespaces may be used by this Gateway.\n\
                                * Selector: Routes in namespaces selected by the selector\
                                \ may be used by\n  this Gateway.\n* Same: Only Routes\
                                \ in the same namespace may be used by this Gateway.\n\
                                \nSupport: Core"
                              enum:
                              - All
                              - Selector
                              - Same
                              type: string
                            selector:
                              description: 'Selector must be specified when From is
                                set to "Selector". In that case,

                                only Routes in Namespaces matching this Selector will
                                be selected by this

                                Gateway. This field is ignored for other values of
                                "From".


                                Support: Core'
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: 'A label selector requirement is
                                      a selector that contains values, a key, and
                                      an operator that

                                      relates the key and values.'
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: 'operator represents a key''s
                                          relationship to a set of values.

                                          Valid operators are In, NotIn, Exists and
                                          DoesNotExist.'
                                        type: string
                                      values:
                                        description: 'values is an array of string
                                          values. If the operator is In or NotIn,

                                          the values array must be non-empty. If the
                                          operator is Exists or DoesNotExist,

                                          the values array must be empty. This array
                                          is replaced during a strategic

                                          merge patch.'
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: 'matchLabels is a map of {key,value}
                                    pairs. A single {key,value} in the matchLabels

                                    map is equivalent to an element of matchExpressions,
                                    whose key field is "key", the

                                    operator is "In", and the values array contains
                                    only "value". The requirements are ANDed.'
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                          type: object
                      type: object
                    hostname:
                      description: "Hostname specifies the virtual hostname to match\
                        \ for protocol types that\ndefine this concept. When unspecified,\
                        \ all hostnames are matched. This\nfield is ignored for protocols\
                        \ that don't require hostname based\nmatching.\n\nImplementations\
                        \ MUST apply Hostname matching appropriately for each of\n\
                        the following protocols:\n\n* TLS: The Listener Hostname MUST\
                        \ match the SNI.\n* HTTP: The Listener Hostname MUST match\
                        \ the Host header of the request.\n* HTTPS: The Listener Hostname\
                        \ SHOULD match both the SNI and Host header.\n  Note that\
                        \ this does not require the SNI and Host header to be the\
                        \ same.\n  The semantics of this are described in more detail\
                        \ below.\n\nTo ensure security, Section 11.1 of RFC-6066 emphasizes\
                        \ that server\nimplementations that rely on SNI hostname matching\
                        \ MUST also verify\nhostnames within the application protocol.\n\
                        \nSection 9.1.2 of RFC-7540 provides a mechanism for servers\
                        \ to reject the\nreuse of a connection by responding with\
                        \ the HTTP 421 Misdirected Request\nstatus code. This indicates\
                        \ that the origin server has rejected the\nrequest because\
                        \ it appears to have been misdirected.\n\nTo detect misdirected\
                        \ requests, Gateways SHOULD match the authority of\nthe requests\
                        \ with all the SNI hostname(s) configured across all the\n\
                        Gateway Listeners on the same port and protocol:\n\n* If another\
                        \ Listener has an exact match or more specific wildcard entry,\n\
                        \  the Gateway SHOULD return a 421.\n* If the current Listener\
                        \ (selected by SNI matching during ClientHello)\n  does not\
                        \ match the Host:\n    * If another Listener does match the\
                        \ Host the Gateway SHOULD return a\n      421.\n    * If no\
                        \ other Listener matches the Host, the Gateway MUST return\
                        \ a\n      404.\n\nFor HTTPRoute and TLSRoute resources, there\
                        \ is an interaction with the\n`spec.hostnames` array. When\
                        \ both listener and route specify hostnames,\nthere MUST be\
                        \ an intersection between the values for a Route to be\naccepted.\
                        \ For more information, refer to the Route specific Hostnames\n\
                        documentation.\n\nHostnames that are prefixed with a wildcard\
                        \ label (`*.`) are interpreted\nas a suffix match. That means\
                        \ that a match for `*.example.com` would match\nboth `test.example.com`,\
                        \ and `foo.test.example.com`, but not `example.com`.\n\nSupport:\
                        \ Core"
                      maxLength: 253
                      minLength: 1
                      pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    name:
                      description: 'Name is the name of the Listener. This name MUST
                        be unique within a

                        Gateway.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    port:
                      description: 'Port is the network port. Multiple listeners may
                        use the

                        same port, subject to the Listener compatibility rules.


                        Support: Core'
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    protocol:
                      description: 'Protocol specifies the network protocol this listener
                        expects to receive.


                        Support: Core'
                      maxLength: 255
                      minLength: 1
                      pattern: ^[a-zA-Z0-9]([-a-zA-Z0-9]*[a-zA-Z0-9])?$|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9]+$
                      type: string
                    tls:
                      description: 'TLS is the TLS configuration for the Listener.
                        This field is required if

                        the Protocol field is "HTTPS" or "TLS". It is invalid to set
                        this field

                        if the Protocol field is "HTTP", "TCP", or "UDP".


                        The association of SNIs to Certificate defined in ListenerTLSConfig
                        is

                        defined based on the Hostname field for this listener.


                        The GatewayClass MUST use the longest matching SNI out of
                        all

                        available certificates for any TLS handshake.


                        Support: Core'
                      properties:
                        certificateRefs:
                          description: 'CertificateRefs contains a series of references
                            to Kubernetes objects that

                            contains TLS certificates and private keys. These certificates
                            are used to

                            establish a TLS handshake for requests that match the
                            hostname of the

                            associated listener.


                            A single CertificateRef to a Kubernetes Secret has "Core"
                            support.

                            Implementations MAY choose to support attaching multiple
                            certificates to

                            a Listener, but this behavior is implementation-specific.


                            References to a resource in different namespace are invalid
                            UNLESS there

                            is a ReferenceGrant in the target namespace that allows
                            the certificate

                            to be attached. If a ReferenceGrant does not allow this
                            reference, the

                            "ResolvedRefs" condition MUST be set to False for this
                            listener with the

                            "RefNotPermitted" reason.


                            This field is required to have at least one element when
                            the mode is set

                            to "Terminate" (default) and is optional otherwise.


                            CertificateRefs can reference to standard Kubernetes resources,
                            i.e.

                            Secret, or implementation-specific custom resources.


                            Support: Core - A single reference to a Kubernetes Secret
                            of type kubernetes.io/tls


                            Support: Implementation-specific (More than one reference
                            or other resource types)'
                          items:
                            description: 'SecretObjectReference identifies an API
                              object including its namespace,

                              defaulting to Secret.


                              The API object must be valid in the cluster; the Group
                              and Kind must

                              be registered in the cluster for this reference to be
                              valid.


                              References to objects with invalid Group and Kind are
                              not valid, and must

                              be rejected by the implementation, with appropriate
                              Conditions set

                              on the containing object.'
                            properties:
                              group:
                                default: ''
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Secret
                                description: Kind is kind of the referent. For example
                                  "Secret".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                description: 'Namespace is the namespace of the referenced
                                  object. When unspecified, the local

                                  namespace is inferred.


                                  Note that when a namespace different than the local
                                  namespace is specified,

                                  a ReferenceGrant object is required in the referent
                                  namespace to allow that

                                  namespace''s owner to accept the reference. See
                                  the ReferenceGrant

                                  documentation for details.


                                  Support: Core'
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                            required:
                            - name
                            type: object
                          maxItems: 64
                          type: array
                          x-kubernetes-list-type: atomic
                        mode:
                          default: Terminate
                          description: "Mode defines the TLS behavior for the TLS\
                            \ session initiated by the client.\nThere are two possible\
                            \ modes:\n\n- Terminate: The TLS session between the downstream\
                            \ client and the\n  Gateway is terminated at the Gateway.\
                            \ This mode requires certificates\n  to be specified in\
                            \ some way, such as populating the certificateRefs\n \
                            \ field.\n- Passthrough: The TLS session is NOT terminated\
                            \ by the Gateway. This\n  implies that the Gateway can't\
                            \ decipher the TLS stream except for\n  the ClientHello\
                            \ message of the TLS protocol. The certificateRefs field\n\
                            \  is ignored in this mode.\n\nSupport: Core"
                          enum:
                          - Terminate
                          - Passthrough
                          type: string
                        options:
                          additionalProperties:
                            description: 'AnnotationValue is the value of an annotation
                              in Gateway API. This is used

                              for validation of maps such as TLS options. This roughly
                              matches Kubernetes

                              annotation validation, although the length validation
                              in that case is based

                              on the entire size of the annotations struct.'
                            maxLength: 4096
                            minLength: 0
                            type: string
                          description: 'Options are a list of key/value pairs to enable
                            extended TLS

                            configuration for each implementation. For example, configuring
                            the

                            minimum TLS version or supported cipher suites.


                            A set of common keys MAY be defined by the API in the
                            future. To avoid

                            any ambiguity, implementation-specific definitions MUST
                            use

                            domain-prefixed names, such as `example.com/my-custom-option`.

                            Un-prefixed names are reserved for key names defined by
                            Gateway API.


                            Support: Implementation-specific'
                          maxProperties: 16
                          type: object
                      type: object
                      x-kubernetes-validations:
                      - message: certificateRefs or options must be specified when
                          mode is Terminate
                        rule: 'self.mode == ''Terminate'' ? size(self.certificateRefs)
                          > 0 || size(self.options) > 0 : true'
                  required:
                  - name
                  - port
                  - protocol
                  type: object
                maxItems: 64
                minItems: 1
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
                x-kubernetes-validations:
                - message: tls must not be specified for protocols ['HTTP', 'TCP',
                    'UDP']
                  rule: 'self.all(l, l.protocol in [''HTTP'', ''TCP'', ''UDP''] ?
                    !has(l.tls) : true)'
                - message: tls mode must be Terminate for protocol HTTPS
                  rule: 'self.all(l, (l.protocol == ''HTTPS'' && has(l.tls)) ? (l.tls.mode
                    == '''' || l.tls.mode == ''Terminate'') : true)'
                - message: hostname must not be specified for protocols ['TCP', 'UDP']
                  rule: 'self.all(l, l.protocol in [''TCP'', ''UDP'']  ? (!has(l.hostname)
                    || l.hostname == '''') : true)'
                - message: Listener name must be unique within the Gateway
                  rule: self.all(l1, self.exists_one(l2, l1.name == l2.name))
                - message: Combination of port, protocol and hostname must be unique
                    for each listener
                  rule: 'self.all(l1, self.exists_one(l2, l1.port == l2.port && l1.protocol
                    == l2.protocol && (has(l1.hostname) && has(l2.hostname) ? l1.hostname
                    == l2.hostname : !has(l1.hostname) && !has(l2.hostname))))'
            required:
            - gatewayClassName
            - listeners
            type: object
          status:
            default:
              conditions:
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Accepted
              - lastTransitionTime: '1970-01-01T00:00:00Z'
                message: Waiting for controller
                reason: Pending
                status: Unknown
                type: Programmed
            description: Status defines the current state of Gateway.
            properties:
              addresses:
                description: "Addresses lists the network addresses that have been\
                  \ bound to the\nGateway.\n\nThis list may differ from the addresses\
                  \ provided in the spec under some\nconditions:\n\n  * no addresses\
                  \ are specified, all addresses are dynamically assigned\n  * a combination\
                  \ of specified and dynamic addresses are assigned\n  * a specified\
                  \ address was unusable (e.g. already in use)"
                items:
                  description: GatewayStatusAddress describes a network address that
                    is bound to a Gateway.
                  oneOf:
                  - properties:
                      type:
                        enum:
                        - IPAddress
                      value:
                        anyOf:
                        - format: ipv4
                        - format: ipv6
                  - properties:
                      type:
                        not:
                          enum:
                          - IPAddress
                  properties:
                    type:
                      default: IPAddress
                      description: Type of the address.
                      maxLength: 253
                      minLength: 1
                      pattern: ^Hostname|IPAddress|NamedAddress|[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    value:
                      description: 'Value of the address. The validity of the values
                        will depend

                        on the type and support by the controller.


                        Examples: `1.2.3.4`, `128::1`, `my-ip-address`.'
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - value
                  type: object
                  x-kubernetes-validations:
                  - message: Hostname value must only contain valid characters (matching
                      ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$)
                    rule: 'self.type == ''Hostname'' ? self.value.matches(r"""^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"""):
                      true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
              conditions:
                default:
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Accepted
                - lastTransitionTime: '1970-01-01T00:00:00Z'
                  message: Waiting for controller
                  reason: Pending
                  status: Unknown
                  type: Programmed
                description: 'Conditions describe the current conditions of the Gateway.


                  Implementations should prefer to express Gateway conditions

                  using the `GatewayConditionType` and `GatewayConditionReason`

                  constants so that operators and tools can converge on a common

                  vocabulary to describe Gateway state.


                  Known condition types are:


                  * "Accepted"

                  * "Programmed"

                  * "Ready"'
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              listeners:
                description: Listeners provide status for each unique listener port
                  defined in the Spec.
                items:
                  description: ListenerStatus is the status associated with a Listener.
                  properties:
                    attachedRoutes:
                      description: 'AttachedRoutes represents the total number of
                        Routes that have been

                        successfully attached to this Listener.


                        Successful attachment of a Route to a Listener is based solely
                        on the

                        combination of the AllowedRoutes field on the corresponding
                        Listener

                        and the Route''s ParentRefs field. A Route is successfully
                        attached to

                        a Listener when it is selected by the Listener''s AllowedRoutes
                        field

                        AND the Route has a valid ParentRef selecting the whole Gateway

                        resource or a specific Listener as a parent resource (more
                        detail on

                        attachment semantics can be found in the documentation on
                        the various

                        Route kinds ParentRefs fields). Listener or Route status does
                        not impact

                        successful attachment, i.e. the AttachedRoutes field count
                        MUST be set

                        for Listeners with condition Accepted: false and MUST count
                        successfully

                        attached Routes that may themselves have Accepted: false conditions.


                        Uses for this field include troubleshooting Route attachment
                        and

                        measuring blast radius/impact of changes to a Listener.'
                      format: int32
                      type: integer
                    conditions:
                      description: Conditions describe the current condition of this
                        listener.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    name:
                      description: Name is the name of the Listener that this status
                        corresponds to.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    supportedKinds:
                      description: 'SupportedKinds is the list indicating the Kinds
                        supported by this

                        listener. This MUST represent the kinds an implementation
                        supports for

                        that Listener configuration.


                        If kinds are specified in Spec that are not supported, they
                        MUST NOT

                        appear in this list and an implementation MUST set the "ResolvedRefs"

                        condition to "False" with the "InvalidRouteKinds" reason.
                        If both valid

                        and invalid Route kinds are specified, the implementation
                        MUST

                        reference the valid Route kinds that have been specified.'
                      items:
                        description: RouteGroupKind indicates the group and kind of
                          a Route resource.
                        properties:
                          group:
                            default: gateway.networking.k8s.io
                            description: Group is the group of the Route.
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            description: Kind is the kind of the Route.
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                        required:
                        - kind
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-type: atomic
                  required:
                  - attachedRoutes
                  - conditions
                  - name
                  - supportedKinds
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  name: grpcroutes.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: GRPCRoute
    listKind: GRPCRouteList
    plural: grpcroutes
    singular: grpcroute
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.hostnames
      name: Hostnames
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: 'GRPCRoute provides a way to route gRPC requests. This includes
          the capability

          to match requests by hostname, gRPC service, gRPC method, or HTTP/2 header.

          Filters can be used to specify additional processing steps. Backends specify

          where matching requests will be routed.


          GRPCRoute falls under extended support within the Gateway API. Within the

          following specification, the word "MUST" indicates that an implementation

          supporting GRPCRoute must conform to the indicated requirement, but an

          implementation not supporting this route type need not follow the requirement

          unless explicitly indicated.


          Implementations supporting `GRPCRoute` with the `HTTPS` `ProtocolType` MUST

          accept HTTP/2 connections without an initial upgrade from HTTP/1.1, i.e.
          via

          ALPN. If the implementation does not support this, then it MUST set the

          "Accepted" condition to "False" for the affected listener with a reason
          of

          "UnsupportedProtocol".  Implementations MAY also accept HTTP/2 connections

          with an upgrade from HTTP/1.


          Implementations supporting `GRPCRoute` with the `HTTP` `ProtocolType` MUST

          support HTTP/2 over cleartext TCP (h2c,

          https://www.rfc-editor.org/rfc/rfc7540#section-3.1) without an initial

          upgrade from HTTP/1.1, i.e. with prior knowledge

          (https://www.rfc-editor.org/rfc/rfc7540#section-3.4). If the implementation

          does not support this, then it MUST set the "Accepted" condition to "False"

          for the affected listener with a reason of "UnsupportedProtocol".

          Implementations MAY also accept HTTP/2 connections with an upgrade from

          HTTP/1, i.e. without prior knowledge.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of GRPCRoute.
            properties:
              hostnames:
                description: "Hostnames defines a set of hostnames to match against\
                  \ the GRPC\nHost header to select a GRPCRoute to process the request.\
                  \ This matches\nthe RFC 1123 definition of a hostname with 2 notable\
                  \ exceptions:\n\n1. IPs are not allowed.\n2. A hostname may be prefixed\
                  \ with a wildcard label (`*.`). The wildcard\n   label MUST appear\
                  \ by itself as the first label.\n\nIf a hostname is specified by\
                  \ both the Listener and GRPCRoute, there\nMUST be at least one intersecting\
                  \ hostname for the GRPCRoute to be\nattached to the Listener. For\
                  \ example:\n\n* A Listener with `test.example.com` as the hostname\
                  \ matches GRPCRoutes\n  that have either not specified any hostnames,\
                  \ or have specified at\n  least one of `test.example.com` or `*.example.com`.\n\
                  * A Listener with `*.example.com` as the hostname matches GRPCRoutes\n\
                  \  that have either not specified any hostnames or have specified\
                  \ at least\n  one hostname that matches the Listener hostname. For\
                  \ example,\n  `test.example.com` and `*.example.com` would both\
                  \ match. On the other\n  hand, `example.com` and `test.example.net`\
                  \ would not match.\n\nHostnames that are prefixed with a wildcard\
                  \ label (`*.`) are interpreted\nas a suffix match. That means that\
                  \ a match for `*.example.com` would match\nboth `test.example.com`,\
                  \ and `foo.test.example.com`, but not `example.com`.\n\nIf both\
                  \ the Listener and GRPCRoute have specified hostnames, any\nGRPCRoute\
                  \ hostnames that do not match the Listener hostname MUST be\nignored.\
                  \ For example, if a Listener specified `*.example.com`, and the\n\
                  GRPCRoute specified `test.example.com` and `test.example.net`,\n\
                  `test.example.net` MUST NOT be considered for a match.\n\nIf both\
                  \ the Listener and GRPCRoute have specified hostnames, and none\n\
                  match with the criteria above, then the GRPCRoute MUST NOT be accepted\
                  \ by\nthe implementation. The implementation MUST raise an 'Accepted'\
                  \ Condition\nwith a status of `False` in the corresponding RouteParentStatus.\n\
                  \nIf a Route (A) of type HTTPRoute or GRPCRoute is attached to a\n\
                  Listener and that listener already has another Route (B) of the\
                  \ other\ntype attached and the intersection of the hostnames of\
                  \ A and B is\nnon-empty, then the implementation MUST accept exactly\
                  \ one of these two\nroutes, determined by the following criteria,\
                  \ in order:\n\n* The oldest Route based on creation timestamp.\n\
                  * The Route appearing first in alphabetical order by\n  \"{namespace}/{name}\"\
                  .\n\nThe rejected Route MUST raise an 'Accepted' condition with\
                  \ a status of\n'False' in the corresponding RouteParentStatus.\n\
                  \nSupport: Core"
                items:
                  description: "Hostname is the fully qualified domain name of a network\
                    \ host. This matches\nthe RFC 1123 definition of a hostname with\
                    \ 2 notable exceptions:\n\n 1. IPs are not allowed.\n 2. A hostname\
                    \ may be prefixed with a wildcard label (`*.`). The wildcard\n\
                    \    label must appear by itself as the first label.\n\nHostname\
                    \ can be \"precise\" which is a domain name without the terminating\n\
                    dot of a network host (e.g. \"foo.example.com\") or \"wildcard\"\
                    , which is a\ndomain name prefixed with a single wildcard label\
                    \ (e.g. `*.example.com`).\n\nNote that as per RFC1035 and RFC1123,\
                    \ a *label* must consist of lower case\nalphanumeric characters\
                    \ or '-', and must start and end with an alphanumeric\ncharacter.\
                    \ No other punctuation is allowed."
                  maxLength: 253
                  minLength: 1
                  pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                  type: string
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
              parentRefs:
                description: "ParentRefs references the resources (usually Gateways)\
                  \ that a Route wants\nto be attached to. Note that the referenced\
                  \ parent resource needs to\nallow this for the attachment to be\
                  \ complete. For Gateways, that means\nthe Gateway needs to allow\
                  \ attachment from Routes of this kind and\nnamespace. For Services,\
                  \ that means the Service must either be in the same\nnamespace for\
                  \ a \"producer\" route, or the mesh implementation must support\n\
                  and allow \"consumer\" routes for the referenced Service. ReferenceGrant\
                  \ is\nnot applicable for governing ParentRefs to Services - it is\
                  \ not possible to\ncreate a \"producer\" route for a Service in\
                  \ a different namespace from the\nRoute.\n\nThere are two kinds\
                  \ of parent resources with \"Core\" support:\n\n* Gateway (Gateway\
                  \ conformance profile)\n* Service (Mesh conformance profile, ClusterIP\
                  \ Services only)\n\nThis API may be extended in the future to support\
                  \ additional kinds of parent\nresources.\n\nParentRefs must be _distinct_.\
                  \ This means either that:\n\n* They select different objects.  If\
                  \ this is the case, then parentRef\n  entries are distinct. In terms\
                  \ of fields, this means that the\n  multi-part key defined by `group`,\
                  \ `kind`, `namespace`, and `name` must\n  be unique across all parentRef\
                  \ entries in the Route.\n* They do not select different objects,\
                  \ but for each optional field used,\n  each ParentRef that selects\
                  \ the same object must set the same set of\n  optional fields to\
                  \ different values. If one ParentRef sets a\n  combination of optional\
                  \ fields, all must set the same combination.\n\nSome examples:\n\
                  \n* If one ParentRef sets `sectionName`, all ParentRefs referencing\
                  \ the\n  same object must also set `sectionName`.\n* If one ParentRef\
                  \ sets `port`, all ParentRefs referencing the same\n  object must\
                  \ also set `port`.\n* If one ParentRef sets `sectionName` and `port`,\
                  \ all ParentRefs\n  referencing the same object must also set `sectionName`\
                  \ and `port`.\n\nIt is possible to separately reference multiple\
                  \ distinct objects that may\nbe collapsed by an implementation.\
                  \ For example, some implementations may\nchoose to merge compatible\
                  \ Gateway Listeners together. If that is the\ncase, the list of\
                  \ routes attached to those resources should also be\nmerged.\n\n\
                  Note that for ParentRefs that cross namespace boundaries, there\
                  \ are specific\nrules. Cross-namespace references are only valid\
                  \ if they are explicitly\nallowed by something in the namespace\
                  \ they are referring to. For example,\nGateway has the AllowedRoutes\
                  \ field, and ReferenceGrant provides a\ngeneric way to enable other\
                  \ kinds of cross-namespace reference."
                items:
                  description: 'ParentReference identifies an API object (usually
                    a Gateway) that can be considered

                    a parent of this resource (usually a route). There are two kinds
                    of parent resources

                    with "Core" support:


                    * Gateway (Gateway conformance profile)

                    * Service (Mesh conformance profile, ClusterIP Services only)


                    This API may be extended in the future to support additional kinds
                    of parent

                    resources.


                    The API object must be valid in the cluster; the Group and Kind
                    must

                    be registered in the cluster for this reference to be valid.'
                  properties:
                    group:
                      default: gateway.networking.k8s.io
                      description: 'Group is the group of the referent.

                        When unspecified, "gateway.networking.k8s.io" is inferred.

                        To set the core API group (such as for a "Service" kind referent),

                        Group must be explicitly set to "" (empty string).


                        Support: Core'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      default: Gateway
                      description: 'Kind is kind of the referent.


                        There are two kinds of parent resources with "Core" support:


                        * Gateway (Gateway conformance profile)

                        * Service (Mesh conformance profile, ClusterIP Services only)


                        Support for other resources is Implementation-Specific.'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: 'Name is the name of the referent.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      type: string
                    namespace:
                      description: 'Namespace is the namespace of the referent. When
                        unspecified, this refers

                        to the local namespace of the Route.


                        Note that there are specific rules for ParentRefs which cross
                        namespace

                        boundaries. Cross-namespace references are only valid if they
                        are explicitly

                        allowed by something in the namespace they are referring to.
                        For example:

                        Gateway has the AllowedRoutes field, and ReferenceGrant provides
                        a

                        generic way to enable any other kind of cross-namespace reference.


                        Support: Core'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                    port:
                      description: 'Port is the network port this Route targets. It
                        can be interpreted

                        differently based on the type of parent resource.


                        When the parent resource is a Gateway, this targets all listeners

                        listening on the specified port that also support this kind
                        of Route(and

                        select this Route). It''s not recommended to set `Port` unless
                        the

                        networking behaviors specified in a Route must apply to a
                        specific port

                        as opposed to a listener(s) whose port(s) may be changed.
                        When both Port

                        and SectionName are specified, the name and port of the selected
                        listener

                        must match both specified values.


                        Implementations MAY choose to support other parent resources.

                        Implementations supporting other types of parent resources
                        MUST clearly

                        document how/if Port is interpreted.


                        For the purpose of status, an attachment is considered successful
                        as

                        long as the parent resource accepts it partially. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment

                        from the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route,

                        the Route MUST be considered detached from the Gateway.


                        Support: Extended'
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    sectionName:
                      description: 'SectionName is the name of a section within the
                        target resource. In the

                        following resources, SectionName is interpreted as the following:


                        * Gateway: Listener name. When both Port (experimental) and
                        SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.

                        * Service: Port name. When both Port (experimental) and SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.


                        Implementations MAY choose to support attaching Routes to
                        other resources.

                        If that is the case, they MUST clearly document how SectionName
                        is

                        interpreted.


                        When unspecified (empty string), this will reference the entire
                        resource.

                        For the purpose of status, an attachment is considered successful
                        if at

                        least one section in the parent resource accepts it. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment from

                        the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route, the

                        Route MUST be considered detached from the Gateway.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: sectionName must be specified when parentRefs includes
                    2 or more references to the same parent
                  rule: 'self.all(p1, self.all(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '''') && (!has(p2.__namespace__) || p2.__namespace__
                    == '''')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) ? ((!has(p1.sectionName)
                    || p1.sectionName == '''') == (!has(p2.sectionName) || p2.sectionName
                    == '''')) : true))'
                - message: sectionName must be unique when parentRefs includes 2 or
                    more references to the same parent
                  rule: self.all(p1, self.exists_one(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '') && (!has(p2.__namespace__) || p2.__namespace__
                    == '')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) && (((!has(p1.sectionName)
                    || p1.sectionName == '') && (!has(p2.sectionName) || p2.sectionName
                    == '')) || (has(p1.sectionName) && has(p2.sectionName) && p1.sectionName
                    == p2.sectionName))))
              rules:
                description: Rules are a list of GRPC matchers, filters and actions.
                items:
                  description: 'GRPCRouteRule defines the semantics for matching a
                    gRPC request based on

                    conditions (matches), processing it (filters), and forwarding
                    the request to

                    an API object (backendRefs).'
                  properties:
                    backendRefs:
                      description: 'BackendRefs defines the backend(s) where matching
                        requests should be

                        sent.


                        Failure behavior here depends on how many BackendRefs are
                        specified and

                        how many are invalid.


                        If *all* entries in BackendRefs are invalid, and there are
                        also no filters

                        specified in this route rule, *all* traffic which matches
                        this rule MUST

                        receive an `UNAVAILABLE` status.


                        See the GRPCBackendRef definition for the rules about what
                        makes a single

                        GRPCBackendRef invalid.


                        When a GRPCBackendRef is invalid, `UNAVAILABLE` statuses MUST
                        be returned for

                        requests that would have otherwise been routed to an invalid
                        backend. If

                        multiple backends are specified, and some are invalid, the
                        proportion of

                        requests that would otherwise have been routed to an invalid
                        backend

                        MUST receive an `UNAVAILABLE` status.


                        For example, if two backends are specified with equal weights,
                        and one is

                        invalid, 50 percent of traffic MUST receive an `UNAVAILABLE`
                        status.

                        Implementations may choose how that 50 percent is determined.


                        Support: Core for Kubernetes Service


                        Support: Implementation-specific for any other resource


                        Support for weight: Core'
                      items:
                        description: 'GRPCBackendRef defines how a GRPCRoute forwards
                          a gRPC request.


                          Note that when a namespace different than the local namespace
                          is specified, a

                          ReferenceGrant object is required in the referent namespace
                          to allow that

                          namespace''s owner to accept the reference. See the ReferenceGrant

                          documentation for details.'
                        properties:
                          filters:
                            description: 'Filters defined at this level MUST be executed
                              if and only if the

                              request is being forwarded to the backend defined here.


                              Support: Implementation-specific (For broader support
                              of filters, use the

                              Filters field in GRPCRouteRule.)'
                            items:
                              description: 'GRPCRouteFilter defines processing steps
                                that must be completed during the

                                request or response lifecycle. GRPCRouteFilters are
                                meant as an extension

                                point to express processing that may be done in Gateway
                                implementations. Some

                                examples include request or response modification,
                                implementing

                                authentication strategies, rate-limiting, and traffic
                                shaping. API

                                guarantee/conformance is defined based on the type
                                of the filter.'
                              properties:
                                extensionRef:
                                  description: 'ExtensionRef is an optional, implementation-specific
                                    extension to the

                                    "filter" behavior.  For example, resource "myroutefilter"
                                    in group

                                    "networking.example.net"). ExtensionRef MUST NOT
                                    be used for core and

                                    extended filters.


                                    Support: Implementation-specific


                                    This filter can be used multiple times within
                                    the same rule.'
                                  properties:
                                    group:
                                      description: 'Group is the group of the referent.
                                        For example, "gateway.networking.k8s.io".

                                        When unspecified or empty string, core API
                                        group is inferred.'
                                      maxLength: 253
                                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    kind:
                                      description: Kind is kind of the referent. For
                                        example "HTTPRoute" or "Service".
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                      type: string
                                    name:
                                      description: Name is the name of the referent.
                                      maxLength: 253
                                      minLength: 1
                                      type: string
                                  required:
                                  - group
                                  - kind
                                  - name
                                  type: object
                                requestHeaderModifier:
                                  description: 'RequestHeaderModifier defines a schema
                                    for a filter that modifies request

                                    headers.


                                    Support: Core'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                requestMirror:
                                  description: 'RequestMirror defines a schema for
                                    a filter that mirrors requests.

                                    Requests are sent to the specified destination,
                                    but responses from

                                    that destination are ignored.


                                    This filter can be used multiple times within
                                    the same rule. Note that

                                    not all implementations will be able to support
                                    mirroring to multiple

                                    backends.


                                    Support: Extended'
                                  properties:
                                    backendRef:
                                      description: 'BackendRef references a resource
                                        where mirrored requests are sent.


                                        Mirrored requests must be sent only to a single
                                        destination endpoint

                                        within this BackendRef, irrespective of how
                                        many endpoints are present

                                        within this BackendRef.


                                        If the referent cannot be found, this BackendRef
                                        is invalid and must be

                                        dropped from the Gateway. The controller must
                                        ensure the "ResolvedRefs"

                                        condition on the Route status is set to `status:
                                        False` and not configure

                                        this backend in the underlying implementation.


                                        If there is a cross-namespace reference to
                                        an *existing* object

                                        that is not allowed by a ReferenceGrant, the
                                        controller must ensure the

                                        "ResolvedRefs"  condition on the Route is
                                        set to `status: False`,

                                        with the "RefNotPermitted" reason and not
                                        configure this backend in the

                                        underlying implementation.


                                        In either error case, the Message of the `ResolvedRefs`
                                        Condition

                                        should be used to provide more detail about
                                        the problem.


                                        Support: Extended for Kubernetes Service


                                        Support: Implementation-specific for any other
                                        resource'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    fraction:
                                      description: 'Fraction represents the fraction
                                        of requests that should be

                                        mirrored to BackendRef.


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      properties:
                                        denominator:
                                          default: 100
                                          format: int32
                                          minimum: 1
                                          type: integer
                                        numerator:
                                          format: int32
                                          minimum: 0
                                          type: integer
                                      required:
                                      - numerator
                                      type: object
                                      x-kubernetes-validations:
                                      - message: numerator must be less than or equal
                                          to denominator
                                        rule: self.numerator <= self.denominator
                                    percent:
                                      description: 'Percent represents the percentage
                                        of requests that should be

                                        mirrored to BackendRef. Its minimum value
                                        is 0 (indicating 0% of

                                        requests) and its maximum value is 100 (indicating
                                        100% of requests).


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      format: int32
                                      maximum: 100
                                      minimum: 0
                                      type: integer
                                  required:
                                  - backendRef
                                  type: object
                                  x-kubernetes-validations:
                                  - message: Only one of percent or fraction may be
                                      specified in HTTPRequestMirrorFilter
                                    rule: '!(has(self.percent) && has(self.fraction))'
                                responseHeaderModifier:
                                  description: 'ResponseHeaderModifier defines a schema
                                    for a filter that modifies response

                                    headers.


                                    Support: Extended'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                type:
                                  description: "Type identifies the type of filter\
                                    \ to apply. As with other API fields,\ntypes are\
                                    \ classified into three conformance levels:\n\n\
                                    - Core: Filter types and their corresponding configuration\
                                    \ defined by\n  \"Support: Core\" in this package,\
                                    \ e.g. \"RequestHeaderModifier\". All\n  implementations\
                                    \ supporting GRPCRoute MUST support core filters.\n\
                                    \n- Extended: Filter types and their corresponding\
                                    \ configuration defined by\n  \"Support: Extended\"\
                                    \ in this package, e.g. \"RequestMirror\". Implementers\n\
                                    \  are encouraged to support extended filters.\n\
                                    \n- Implementation-specific: Filters that are\
                                    \ defined and supported by specific vendors.\n\
                                    \  In the future, filters showing convergence\
                                    \ in behavior across multiple\n  implementations\
                                    \ will be considered for inclusion in extended\
                                    \ or core\n  conformance levels. Filter-specific\
                                    \ configuration for such filters\n  is specified\
                                    \ using the ExtensionRef field. `Type` MUST be\
                                    \ set to\n  \"ExtensionRef\" for custom filters.\n\
                                    \nImplementers are encouraged to define custom\
                                    \ implementation types to\nextend the core API\
                                    \ with implementation-specific behavior.\n\nIf\
                                    \ a reference to a custom filter type cannot be\
                                    \ resolved, the filter\nMUST NOT be skipped. Instead,\
                                    \ requests that would have been processed by\n\
                                    that filter MUST receive a HTTP error response."
                                  enum:
                                  - ResponseHeaderModifier
                                  - RequestHeaderModifier
                                  - RequestMirror
                                  - ExtensionRef
                                  type: string
                              required:
                              - type
                              type: object
                              x-kubernetes-validations:
                              - message: filter.requestHeaderModifier must be nil
                                  if the filter.type is not RequestHeaderModifier
                                rule: '!(has(self.requestHeaderModifier) && self.type
                                  != ''RequestHeaderModifier'')'
                              - message: filter.requestHeaderModifier must be specified
                                  for RequestHeaderModifier filter.type
                                rule: '!(!has(self.requestHeaderModifier) && self.type
                                  == ''RequestHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be nil
                                  if the filter.type is not ResponseHeaderModifier
                                rule: '!(has(self.responseHeaderModifier) && self.type
                                  != ''ResponseHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be specified
                                  for ResponseHeaderModifier filter.type
                                rule: '!(!has(self.responseHeaderModifier) && self.type
                                  == ''ResponseHeaderModifier'')'
                              - message: filter.requestMirror must be nil if the filter.type
                                  is not RequestMirror
                                rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                              - message: filter.requestMirror must be specified for
                                  RequestMirror filter.type
                                rule: '!(!has(self.requestMirror) && self.type ==
                                  ''RequestMirror'')'
                              - message: filter.extensionRef must be nil if the filter.type
                                  is not ExtensionRef
                                rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                              - message: filter.extensionRef must be specified for
                                  ExtensionRef filter.type
                                rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: atomic
                            x-kubernetes-validations:
                            - message: RequestHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                                <= 1
                            - message: ResponseHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                                <= 1
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            description: 'Weight specifies the proportion of requests
                              forwarded to the referenced

                              backend. This is computed as weight/(sum of all weights
                              in this

                              BackendRefs list). For non-zero values, there may be
                              some epsilon from

                              the exact proportion defined here depending on the precision
                              an

                              implementation supports. Weight is not a percentage
                              and the sum of

                              weights does not need to equal 100.


                              If only one backend is specified and it has a weight
                              greater than 0, 100%

                              of the traffic is forwarded to that backend. If weight
                              is set to 0, no

                              traffic should be forwarded for this entry. If unspecified,
                              weight

                              defaults to 1.


                              Support for this field varies based on the context where
                              used.'
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                    filters:
                      description: "Filters define the filters that are applied to\
                        \ requests that match\nthis rule.\n\nThe effects of ordering\
                        \ of multiple behaviors are currently unspecified.\nThis can\
                        \ change in the future based on feedback during the alpha\
                        \ stage.\n\nConformance-levels at this level are defined based\
                        \ on the type of filter:\n\n- ALL core filters MUST be supported\
                        \ by all implementations that support\n  GRPCRoute.\n- Implementers\
                        \ are encouraged to support extended filters.\n- Implementation-specific\
                        \ custom filters have no API guarantees across\n  implementations.\n\
                        \nSpecifying the same filter multiple times is not supported\
                        \ unless explicitly\nindicated in the filter.\n\nIf an implementation\
                        \ cannot support a combination of filters, it must clearly\n\
                        document that limitation. In cases where incompatible or unsupported\n\
                        filters are specified and cause the `Accepted` condition to\
                        \ be set to status\n`False`, implementations may use the `IncompatibleFilters`\
                        \ reason to specify\nthis configuration error.\n\nSupport:\
                        \ Core"
                      items:
                        description: 'GRPCRouteFilter defines processing steps that
                          must be completed during the

                          request or response lifecycle. GRPCRouteFilters are meant
                          as an extension

                          point to express processing that may be done in Gateway
                          implementations. Some

                          examples include request or response modification, implementing

                          authentication strategies, rate-limiting, and traffic shaping.
                          API

                          guarantee/conformance is defined based on the type of the
                          filter.'
                        properties:
                          extensionRef:
                            description: 'ExtensionRef is an optional, implementation-specific
                              extension to the

                              "filter" behavior.  For example, resource "myroutefilter"
                              in group

                              "networking.example.net"). ExtensionRef MUST NOT be
                              used for core and

                              extended filters.


                              Support: Implementation-specific


                              This filter can be used multiple times within the same
                              rule.'
                            properties:
                              group:
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                description: Kind is kind of the referent. For example
                                  "HTTPRoute" or "Service".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                            required:
                            - group
                            - kind
                            - name
                            type: object
                          requestHeaderModifier:
                            description: 'RequestHeaderModifier defines a schema for
                              a filter that modifies request

                              headers.


                              Support: Core'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          requestMirror:
                            description: 'RequestMirror defines a schema for a filter
                              that mirrors requests.

                              Requests are sent to the specified destination, but
                              responses from

                              that destination are ignored.


                              This filter can be used multiple times within the same
                              rule. Note that

                              not all implementations will be able to support mirroring
                              to multiple

                              backends.


                              Support: Extended'
                            properties:
                              backendRef:
                                description: 'BackendRef references a resource where
                                  mirrored requests are sent.


                                  Mirrored requests must be sent only to a single
                                  destination endpoint

                                  within this BackendRef, irrespective of how many
                                  endpoints are present

                                  within this BackendRef.


                                  If the referent cannot be found, this BackendRef
                                  is invalid and must be

                                  dropped from the Gateway. The controller must ensure
                                  the "ResolvedRefs"

                                  condition on the Route status is set to `status:
                                  False` and not configure

                                  this backend in the underlying implementation.


                                  If there is a cross-namespace reference to an *existing*
                                  object

                                  that is not allowed by a ReferenceGrant, the controller
                                  must ensure the

                                  "ResolvedRefs"  condition on the Route is set to
                                  `status: False`,

                                  with the "RefNotPermitted" reason and not configure
                                  this backend in the

                                  underlying implementation.


                                  In either error case, the Message of the `ResolvedRefs`
                                  Condition

                                  should be used to provide more detail about the
                                  problem.


                                  Support: Extended for Kubernetes Service


                                  Support: Implementation-specific for any other resource'
                                properties:
                                  group:
                                    default: ''
                                    description: 'Group is the group of the referent.
                                      For example, "gateway.networking.k8s.io".

                                      When unspecified or empty string, core API group
                                      is inferred.'
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    description: 'Kind is the Kubernetes resource
                                      kind of the referent. For example

                                      "Service".


                                      Defaults to "Service" when not specified.


                                      ExternalName services can refer to CNAME DNS
                                      records that may live

                                      outside of the cluster and as such are difficult
                                      to reason about in

                                      terms of conformance. They also may not be safe
                                      to forward to (see

                                      CVE-2021-25740 for more information). Implementations
                                      SHOULD NOT

                                      support ExternalName Services.


                                      Support: Core (Services with a type other than
                                      ExternalName)


                                      Support: Implementation-specific (Services with
                                      type ExternalName)'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    description: Name is the name of the referent.
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: 'Namespace is the namespace of the
                                      backend. When unspecified, the local

                                      namespace is inferred.


                                      Note that when a namespace different than the
                                      local namespace is specified,

                                      a ReferenceGrant object is required in the referent
                                      namespace to allow that

                                      namespace''s owner to accept the reference.
                                      See the ReferenceGrant

                                      documentation for details.


                                      Support: Core'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    description: 'Port specifies the destination port
                                      number to use for this resource.

                                      Port is required when the referent is a Kubernetes
                                      Service. In this

                                      case, the port number is the service port number,
                                      not the target port.

                                      For other resources, destination port might
                                      be derived from the referent

                                      resource or this field.'
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              fraction:
                                description: 'Fraction represents the fraction of
                                  requests that should be

                                  mirrored to BackendRef.


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                properties:
                                  denominator:
                                    default: 100
                                    format: int32
                                    minimum: 1
                                    type: integer
                                  numerator:
                                    format: int32
                                    minimum: 0
                                    type: integer
                                required:
                                - numerator
                                type: object
                                x-kubernetes-validations:
                                - message: numerator must be less than or equal to
                                    denominator
                                  rule: self.numerator <= self.denominator
                              percent:
                                description: 'Percent represents the percentage of
                                  requests that should be

                                  mirrored to BackendRef. Its minimum value is 0 (indicating
                                  0% of

                                  requests) and its maximum value is 100 (indicating
                                  100% of requests).


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                format: int32
                                maximum: 100
                                minimum: 0
                                type: integer
                            required:
                            - backendRef
                            type: object
                            x-kubernetes-validations:
                            - message: Only one of percent or fraction may be specified
                                in HTTPRequestMirrorFilter
                              rule: '!(has(self.percent) && has(self.fraction))'
                          responseHeaderModifier:
                            description: 'ResponseHeaderModifier defines a schema
                              for a filter that modifies response

                              headers.


                              Support: Extended'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          type:
                            description: "Type identifies the type of filter to apply.\
                              \ As with other API fields,\ntypes are classified into\
                              \ three conformance levels:\n\n- Core: Filter types\
                              \ and their corresponding configuration defined by\n\
                              \  \"Support: Core\" in this package, e.g. \"RequestHeaderModifier\"\
                              . All\n  implementations supporting GRPCRoute MUST support\
                              \ core filters.\n\n- Extended: Filter types and their\
                              \ corresponding configuration defined by\n  \"Support:\
                              \ Extended\" in this package, e.g. \"RequestMirror\"\
                              . Implementers\n  are encouraged to support extended\
                              \ filters.\n\n- Implementation-specific: Filters that\
                              \ are defined and supported by specific vendors.\n \
                              \ In the future, filters showing convergence in behavior\
                              \ across multiple\n  implementations will be considered\
                              \ for inclusion in extended or core\n  conformance levels.\
                              \ Filter-specific configuration for such filters\n \
                              \ is specified using the ExtensionRef field. `Type`\
                              \ MUST be set to\n  \"ExtensionRef\" for custom filters.\n\
                              \nImplementers are encouraged to define custom implementation\
                              \ types to\nextend the core API with implementation-specific\
                              \ behavior.\n\nIf a reference to a custom filter type\
                              \ cannot be resolved, the filter\nMUST NOT be skipped.\
                              \ Instead, requests that would have been processed by\n\
                              that filter MUST receive a HTTP error response."
                            enum:
                            - ResponseHeaderModifier
                            - RequestHeaderModifier
                            - RequestMirror
                            - ExtensionRef
                            type: string
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: filter.requestHeaderModifier must be nil if the
                            filter.type is not RequestHeaderModifier
                          rule: '!(has(self.requestHeaderModifier) && self.type !=
                            ''RequestHeaderModifier'')'
                        - message: filter.requestHeaderModifier must be specified
                            for RequestHeaderModifier filter.type
                          rule: '!(!has(self.requestHeaderModifier) && self.type ==
                            ''RequestHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be nil if the
                            filter.type is not ResponseHeaderModifier
                          rule: '!(has(self.responseHeaderModifier) && self.type !=
                            ''ResponseHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be specified
                            for ResponseHeaderModifier filter.type
                          rule: '!(!has(self.responseHeaderModifier) && self.type
                            == ''ResponseHeaderModifier'')'
                        - message: filter.requestMirror must be nil if the filter.type
                            is not RequestMirror
                          rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                        - message: filter.requestMirror must be specified for RequestMirror
                            filter.type
                          rule: '!(!has(self.requestMirror) && self.type == ''RequestMirror'')'
                        - message: filter.extensionRef must be nil if the filter.type
                            is not ExtensionRef
                          rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                        - message: filter.extensionRef must be specified for ExtensionRef
                            filter.type
                          rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                      x-kubernetes-validations:
                      - message: RequestHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                          <= 1
                      - message: ResponseHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                          <= 1
                    matches:
                      description: "Matches define conditions used for matching the\
                        \ rule against incoming\ngRPC requests. Each match is independent,\
                        \ i.e. this rule will be matched\nif **any** one of the matches\
                        \ is satisfied.\n\nFor example, take the following matches\
                        \ configuration:\n\n```\nmatches:\n- method:\n    service:\
                        \ foo.bar\n  headers:\n    values:\n      version: 2\n- method:\n\
                        \    service: foo.bar.v2\n```\n\nFor a request to match against\
                        \ this rule, it MUST satisfy\nEITHER of the two conditions:\n\
                        \n- service of foo.bar AND contains the header `version: 2`\n\
                        - service of foo.bar.v2\n\nSee the documentation for GRPCRouteMatch\
                        \ on how to specify multiple\nmatch conditions to be ANDed\
                        \ together.\n\nIf no matches are specified, the implementation\
                        \ MUST match every gRPC request.\n\nProxy or Load Balancer\
                        \ routing configuration generated from GRPCRoutes\nMUST prioritize\
                        \ rules based on the following criteria, continuing on\nties.\
                        \ Merging MUST not be done between GRPCRoutes and HTTPRoutes.\n\
                        Precedence MUST be given to the rule with the largest number\
                        \ of:\n\n* Characters in a matching non-wildcard hostname.\n\
                        * Characters in a matching hostname.\n* Characters in a matching\
                        \ service.\n* Characters in a matching method.\n* Header matches.\n\
                        \nIf ties still exist across multiple Routes, matching precedence\
                        \ MUST be\ndetermined in order of the following criteria,\
                        \ continuing on ties:\n\n* The oldest Route based on creation\
                        \ timestamp.\n* The Route appearing first in alphabetical\
                        \ order by\n  \"{namespace}/{name}\".\n\nIf ties still exist\
                        \ within the Route that has been given precedence,\nmatching\
                        \ precedence MUST be granted to the first matching rule meeting\n\
                        the above criteria."
                      items:
                        description: "GRPCRouteMatch defines the predicate used to\
                          \ match requests to a given\naction. Multiple match types\
                          \ are ANDed together, i.e. the match will\nevaluate to true\
                          \ only if all conditions are satisfied.\n\nFor example,\
                          \ the match below will match a gRPC request only if its\
                          \ service\nis `foo` AND it contains the `version: v1` header:\n\
                          \n```\nmatches:\n  - method:\n    type: Exact\n    service:\
                          \ \"foo\"\n    headers:\n  - name: \"version\"\n    value\
                          \ \"v1\"\n\n```"
                        properties:
                          headers:
                            description: 'Headers specifies gRPC request header matchers.
                              Multiple match values are

                              ANDed together, meaning, a request MUST match all the
                              specified headers

                              to select the route.'
                            items:
                              description: 'GRPCHeaderMatch describes how to select
                                a gRPC route by matching gRPC request

                                headers.'
                              properties:
                                name:
                                  description: 'Name is the name of the gRPC Header
                                    to be matched.


                                    If multiple entries specify equivalent header
                                    names, only the first

                                    entry with an equivalent name MUST be considered
                                    for a match. Subsequent

                                    entries with an equivalent header name MUST be
                                    ignored. Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  description: Type specifies how to match against
                                    the value of the header.
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  description: Value is the value of the gRPC Header
                                    to be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          method:
                            description: 'Method specifies a gRPC request service/method
                              matcher. If this field is

                              not specified, all services and methods will match.'
                            properties:
                              method:
                                description: 'Value of the method to match against.
                                  If left empty or omitted, will

                                  match all services.


                                  At least one of Service and Method MUST be a non-empty
                                  string.'
                                maxLength: 1024
                                type: string
                              service:
                                description: 'Value of the service to match against.
                                  If left empty or omitted, will

                                  match any service.


                                  At least one of Service and Method MUST be a non-empty
                                  string.'
                                maxLength: 1024
                                type: string
                              type:
                                default: Exact
                                description: 'Type specifies how to match against
                                  the service and/or method.

                                  Support: Core (Exact with service and method specified)


                                  Support: Implementation-specific (Exact with method
                                  specified but no service specified)


                                  Support: Implementation-specific (RegularExpression)'
                                enum:
                                - Exact
                                - RegularExpression
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: One or both of 'service' or 'method' must be
                                specified
                              rule: 'has(self.type) ? has(self.service) || has(self.method)
                                : true'
                            - message: service must only contain valid characters
                                (matching ^(?i)\.?[a-z_][a-z_0-9]*(\.[a-z_][a-z_0-9]*)*$)
                              rule: '(!has(self.type) || self.type == ''Exact'') &&
                                has(self.service) ? self.service.matches(r"""^(?i)\.?[a-z_][a-z_0-9]*(\.[a-z_][a-z_0-9]*)*$"""):
                                true'
                            - message: method must only contain valid characters (matching
                                ^[A-Za-z_][A-Za-z_0-9]*$)
                              rule: '(!has(self.type) || self.type == ''Exact'') &&
                                has(self.method) ? self.method.matches(r"""^[A-Za-z_][A-Za-z_0-9]*$"""):
                                true'
                        type: object
                      maxItems: 64
                      type: array
                      x-kubernetes-list-type: atomic
                    name:
                      description: 'Name is the name of the route rule. This name
                        MUST be unique within a Route if it is set.


                        Support: Extended'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: While 16 rules and 64 matches per rule are allowed, the
                    total number of matches across all rules in a route must be less
                    than 128
                  rule: '(self.size() > 0 ? (has(self[0].matches) ? self[0].matches.size()
                    : 0) : 0) + (self.size() > 1 ? (has(self[1].matches) ? self[1].matches.size()
                    : 0) : 0) + (self.size() > 2 ? (has(self[2].matches) ? self[2].matches.size()
                    : 0) : 0) + (self.size() > 3 ? (has(self[3].matches) ? self[3].matches.size()
                    : 0) : 0) + (self.size() > 4 ? (has(self[4].matches) ? self[4].matches.size()
                    : 0) : 0) + (self.size() > 5 ? (has(self[5].matches) ? self[5].matches.size()
                    : 0) : 0) + (self.size() > 6 ? (has(self[6].matches) ? self[6].matches.size()
                    : 0) : 0) + (self.size() > 7 ? (has(self[7].matches) ? self[7].matches.size()
                    : 0) : 0) + (self.size() > 8 ? (has(self[8].matches) ? self[8].matches.size()
                    : 0) : 0) + (self.size() > 9 ? (has(self[9].matches) ? self[9].matches.size()
                    : 0) : 0) + (self.size() > 10 ? (has(self[10].matches) ? self[10].matches.size()
                    : 0) : 0) + (self.size() > 11 ? (has(self[11].matches) ? self[11].matches.size()
                    : 0) : 0) + (self.size() > 12 ? (has(self[12].matches) ? self[12].matches.size()
                    : 0) : 0) + (self.size() > 13 ? (has(self[13].matches) ? self[13].matches.size()
                    : 0) : 0) + (self.size() > 14 ? (has(self[14].matches) ? self[14].matches.size()
                    : 0) : 0) + (self.size() > 15 ? (has(self[15].matches) ? self[15].matches.size()
                    : 0) : 0) <= 128'
            type: object
          status:
            description: Status defines the current state of GRPCRoute.
            properties:
              parents:
                description: 'Parents is a list of parent resources (usually Gateways)
                  that are

                  associated with the route, and the status of the route with respect
                  to

                  each parent. When this route attaches to a parent, the controller
                  that

                  manages the parent must add an entry to this list when the controller

                  first sees the route and should update the entry as appropriate
                  when the

                  route or gateway is modified.


                  Note that parent references that cannot be resolved by an implementation

                  of this API will not be added to this list. Implementations of this
                  API

                  can only populate Route status for the Gateways/parent resources
                  they are

                  responsible for.


                  A maximum of 32 Gateways will be represented in this list. An empty
                  list

                  means the route has not been attached to any Gateway.'
                items:
                  description: 'RouteParentStatus describes the status of a route
                    with respect to an

                    associated Parent.'
                  properties:
                    conditions:
                      description: 'Conditions describes the status of the route with
                        respect to the Gateway.

                        Note that the route''s availability is also subject to the
                        Gateway''s own

                        status conditions and listener status.


                        If the Route''s ParentRef specifies an existing Gateway that
                        supports

                        Routes of this kind AND that Gateway''s controller has sufficient
                        access,

                        then that Gateway''s controller MUST set the "Accepted" condition
                        on the

                        Route, to indicate whether the route has been accepted or
                        rejected by the

                        Gateway, and why.


                        A Route MUST be considered "Accepted" if at least one of the
                        Route''s

                        rules is implemented by the Gateway.


                        There are a number of cases where the "Accepted" condition
                        may not be set

                        due to lack of controller visibility, that includes when:


                        * The Route refers to a nonexistent parent.

                        * The Route is of a type that the controller does not support.

                        * The Route is in a namespace the controller does not have
                        access to.'
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    parentRef:
                      description: 'ParentRef corresponds with a ParentRef in the
                        spec that this

                        RouteParentStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - conditions
                  - controllerName
                  - parentRef
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
            required:
            - parents
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  name: httproutes.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: HTTPRoute
    listKind: HTTPRouteList
    plural: httproutes
    singular: httproute
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.hostnames
      name: Hostnames
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: 'HTTPRoute provides a way to route HTTP requests. This includes
          the capability

          to match requests by hostname, path, header, or query param. Filters can
          be

          used to specify additional processing steps. Backends specify where matching

          requests should be routed.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of HTTPRoute.
            properties:
              hostnames:
                description: "Hostnames defines a set of hostnames that should match\
                  \ against the HTTP Host\nheader to select a HTTPRoute used to process\
                  \ the request. Implementations\nMUST ignore any port value specified\
                  \ in the HTTP Host header while\nperforming a match and (absent\
                  \ of any applicable header modification\nconfiguration) MUST forward\
                  \ this header unmodified to the backend.\n\nValid values for Hostnames\
                  \ are determined by RFC 1123 definition of a\nhostname with 2 notable\
                  \ exceptions:\n\n1. IPs are not allowed.\n2. A hostname may be prefixed\
                  \ with a wildcard label (`*.`). The wildcard\n   label must appear\
                  \ by itself as the first label.\n\nIf a hostname is specified by\
                  \ both the Listener and HTTPRoute, there\nmust be at least one intersecting\
                  \ hostname for the HTTPRoute to be\nattached to the Listener. For\
                  \ example:\n\n* A Listener with `test.example.com` as the hostname\
                  \ matches HTTPRoutes\n  that have either not specified any hostnames,\
                  \ or have specified at\n  least one of `test.example.com` or `*.example.com`.\n\
                  * A Listener with `*.example.com` as the hostname matches HTTPRoutes\n\
                  \  that have either not specified any hostnames or have specified\
                  \ at least\n  one hostname that matches the Listener hostname. For\
                  \ example,\n  `*.example.com`, `test.example.com`, and `foo.test.example.com`\
                  \ would\n  all match. On the other hand, `example.com` and `test.example.net`\
                  \ would\n  not match.\n\nHostnames that are prefixed with a wildcard\
                  \ label (`*.`) are interpreted\nas a suffix match. That means that\
                  \ a match for `*.example.com` would match\nboth `test.example.com`,\
                  \ and `foo.test.example.com`, but not `example.com`.\n\nIf both\
                  \ the Listener and HTTPRoute have specified hostnames, any\nHTTPRoute\
                  \ hostnames that do not match the Listener hostname MUST be\nignored.\
                  \ For example, if a Listener specified `*.example.com`, and the\n\
                  HTTPRoute specified `test.example.com` and `test.example.net`,\n\
                  `test.example.net` must not be considered for a match.\n\nIf both\
                  \ the Listener and HTTPRoute have specified hostnames, and none\n\
                  match with the criteria above, then the HTTPRoute is not accepted.\
                  \ The\nimplementation must raise an 'Accepted' Condition with a\
                  \ status of\n`False` in the corresponding RouteParentStatus.\n\n\
                  In the event that multiple HTTPRoutes specify intersecting hostnames\
                  \ (e.g.\noverlapping wildcard matching and exact matching hostnames),\
                  \ precedence must\nbe given to rules from the HTTPRoute with the\
                  \ largest number of:\n\n* Characters in a matching non-wildcard\
                  \ hostname.\n* Characters in a matching hostname.\n\nIf ties exist\
                  \ across multiple Routes, the matching precedence rules for\nHTTPRouteMatches\
                  \ takes over.\n\nSupport: Core"
                items:
                  description: "Hostname is the fully qualified domain name of a network\
                    \ host. This matches\nthe RFC 1123 definition of a hostname with\
                    \ 2 notable exceptions:\n\n 1. IPs are not allowed.\n 2. A hostname\
                    \ may be prefixed with a wildcard label (`*.`). The wildcard\n\
                    \    label must appear by itself as the first label.\n\nHostname\
                    \ can be \"precise\" which is a domain name without the terminating\n\
                    dot of a network host (e.g. \"foo.example.com\") or \"wildcard\"\
                    , which is a\ndomain name prefixed with a single wildcard label\
                    \ (e.g. `*.example.com`).\n\nNote that as per RFC1035 and RFC1123,\
                    \ a *label* must consist of lower case\nalphanumeric characters\
                    \ or '-', and must start and end with an alphanumeric\ncharacter.\
                    \ No other punctuation is allowed."
                  maxLength: 253
                  minLength: 1
                  pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                  type: string
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
              parentRefs:
                description: "ParentRefs references the resources (usually Gateways)\
                  \ that a Route wants\nto be attached to. Note that the referenced\
                  \ parent resource needs to\nallow this for the attachment to be\
                  \ complete. For Gateways, that means\nthe Gateway needs to allow\
                  \ attachment from Routes of this kind and\nnamespace. For Services,\
                  \ that means the Service must either be in the same\nnamespace for\
                  \ a \"producer\" route, or the mesh implementation must support\n\
                  and allow \"consumer\" routes for the referenced Service. ReferenceGrant\
                  \ is\nnot applicable for governing ParentRefs to Services - it is\
                  \ not possible to\ncreate a \"producer\" route for a Service in\
                  \ a different namespace from the\nRoute.\n\nThere are two kinds\
                  \ of parent resources with \"Core\" support:\n\n* Gateway (Gateway\
                  \ conformance profile)\n* Service (Mesh conformance profile, ClusterIP\
                  \ Services only)\n\nThis API may be extended in the future to support\
                  \ additional kinds of parent\nresources.\n\nParentRefs must be _distinct_.\
                  \ This means either that:\n\n* They select different objects.  If\
                  \ this is the case, then parentRef\n  entries are distinct. In terms\
                  \ of fields, this means that the\n  multi-part key defined by `group`,\
                  \ `kind`, `namespace`, and `name` must\n  be unique across all parentRef\
                  \ entries in the Route.\n* They do not select different objects,\
                  \ but for each optional field used,\n  each ParentRef that selects\
                  \ the same object must set the same set of\n  optional fields to\
                  \ different values. If one ParentRef sets a\n  combination of optional\
                  \ fields, all must set the same combination.\n\nSome examples:\n\
                  \n* If one ParentRef sets `sectionName`, all ParentRefs referencing\
                  \ the\n  same object must also set `sectionName`.\n* If one ParentRef\
                  \ sets `port`, all ParentRefs referencing the same\n  object must\
                  \ also set `port`.\n* If one ParentRef sets `sectionName` and `port`,\
                  \ all ParentRefs\n  referencing the same object must also set `sectionName`\
                  \ and `port`.\n\nIt is possible to separately reference multiple\
                  \ distinct objects that may\nbe collapsed by an implementation.\
                  \ For example, some implementations may\nchoose to merge compatible\
                  \ Gateway Listeners together. If that is the\ncase, the list of\
                  \ routes attached to those resources should also be\nmerged.\n\n\
                  Note that for ParentRefs that cross namespace boundaries, there\
                  \ are specific\nrules. Cross-namespace references are only valid\
                  \ if they are explicitly\nallowed by something in the namespace\
                  \ they are referring to. For example,\nGateway has the AllowedRoutes\
                  \ field, and ReferenceGrant provides a\ngeneric way to enable other\
                  \ kinds of cross-namespace reference."
                items:
                  description: 'ParentReference identifies an API object (usually
                    a Gateway) that can be considered

                    a parent of this resource (usually a route). There are two kinds
                    of parent resources

                    with "Core" support:


                    * Gateway (Gateway conformance profile)

                    * Service (Mesh conformance profile, ClusterIP Services only)


                    This API may be extended in the future to support additional kinds
                    of parent

                    resources.


                    The API object must be valid in the cluster; the Group and Kind
                    must

                    be registered in the cluster for this reference to be valid.'
                  properties:
                    group:
                      default: gateway.networking.k8s.io
                      description: 'Group is the group of the referent.

                        When unspecified, "gateway.networking.k8s.io" is inferred.

                        To set the core API group (such as for a "Service" kind referent),

                        Group must be explicitly set to "" (empty string).


                        Support: Core'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      default: Gateway
                      description: 'Kind is kind of the referent.


                        There are two kinds of parent resources with "Core" support:


                        * Gateway (Gateway conformance profile)

                        * Service (Mesh conformance profile, ClusterIP Services only)


                        Support for other resources is Implementation-Specific.'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: 'Name is the name of the referent.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      type: string
                    namespace:
                      description: 'Namespace is the namespace of the referent. When
                        unspecified, this refers

                        to the local namespace of the Route.


                        Note that there are specific rules for ParentRefs which cross
                        namespace

                        boundaries. Cross-namespace references are only valid if they
                        are explicitly

                        allowed by something in the namespace they are referring to.
                        For example:

                        Gateway has the AllowedRoutes field, and ReferenceGrant provides
                        a

                        generic way to enable any other kind of cross-namespace reference.


                        Support: Core'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                    port:
                      description: 'Port is the network port this Route targets. It
                        can be interpreted

                        differently based on the type of parent resource.


                        When the parent resource is a Gateway, this targets all listeners

                        listening on the specified port that also support this kind
                        of Route(and

                        select this Route). It''s not recommended to set `Port` unless
                        the

                        networking behaviors specified in a Route must apply to a
                        specific port

                        as opposed to a listener(s) whose port(s) may be changed.
                        When both Port

                        and SectionName are specified, the name and port of the selected
                        listener

                        must match both specified values.


                        Implementations MAY choose to support other parent resources.

                        Implementations supporting other types of parent resources
                        MUST clearly

                        document how/if Port is interpreted.


                        For the purpose of status, an attachment is considered successful
                        as

                        long as the parent resource accepts it partially. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment

                        from the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route,

                        the Route MUST be considered detached from the Gateway.


                        Support: Extended'
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    sectionName:
                      description: 'SectionName is the name of a section within the
                        target resource. In the

                        following resources, SectionName is interpreted as the following:


                        * Gateway: Listener name. When both Port (experimental) and
                        SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.

                        * Service: Port name. When both Port (experimental) and SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.


                        Implementations MAY choose to support attaching Routes to
                        other resources.

                        If that is the case, they MUST clearly document how SectionName
                        is

                        interpreted.


                        When unspecified (empty string), this will reference the entire
                        resource.

                        For the purpose of status, an attachment is considered successful
                        if at

                        least one section in the parent resource accepts it. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment from

                        the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route, the

                        Route MUST be considered detached from the Gateway.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: sectionName must be specified when parentRefs includes
                    2 or more references to the same parent
                  rule: 'self.all(p1, self.all(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '''') && (!has(p2.__namespace__) || p2.__namespace__
                    == '''')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) ? ((!has(p1.sectionName)
                    || p1.sectionName == '''') == (!has(p2.sectionName) || p2.sectionName
                    == '''')) : true))'
                - message: sectionName must be unique when parentRefs includes 2 or
                    more references to the same parent
                  rule: self.all(p1, self.exists_one(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '') && (!has(p2.__namespace__) || p2.__namespace__
                    == '')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) && (((!has(p1.sectionName)
                    || p1.sectionName == '') && (!has(p2.sectionName) || p2.sectionName
                    == '')) || (has(p1.sectionName) && has(p2.sectionName) && p1.sectionName
                    == p2.sectionName))))
              rules:
                default:
                - matches:
                  - path:
                      type: PathPrefix
                      value: /
                description: Rules are a list of HTTP matchers, filters and actions.
                items:
                  description: 'HTTPRouteRule defines semantics for matching an HTTP
                    request based on

                    conditions (matches), processing it (filters), and forwarding
                    the request to

                    an API object (backendRefs).'
                  properties:
                    backendRefs:
                      description: 'BackendRefs defines the backend(s) where matching
                        requests should be

                        sent.


                        Failure behavior here depends on how many BackendRefs are
                        specified and

                        how many are invalid.


                        If *all* entries in BackendRefs are invalid, and there are
                        also no filters

                        specified in this route rule, *all* traffic which matches
                        this rule MUST

                        receive a 500 status code.


                        See the HTTPBackendRef definition for the rules about what
                        makes a single

                        HTTPBackendRef invalid.


                        When a HTTPBackendRef is invalid, 500 status codes MUST be
                        returned for

                        requests that would have otherwise been routed to an invalid
                        backend. If

                        multiple backends are specified, and some are invalid, the
                        proportion of

                        requests that would otherwise have been routed to an invalid
                        backend

                        MUST receive a 500 status code.


                        For example, if two backends are specified with equal weights,
                        and one is

                        invalid, 50 percent of traffic must receive a 500. Implementations
                        may

                        choose how that 50 percent is determined.


                        When a HTTPBackendRef refers to a Service that has no ready
                        endpoints,

                        implementations SHOULD return a 503 for requests to that backend
                        instead.

                        If an implementation chooses to do this, all of the above
                        rules for 500 responses

                        MUST also apply for responses that return a 503.


                        Support: Core for Kubernetes Service


                        Support: Extended for Kubernetes ServiceImport


                        Support: Implementation-specific for any other resource


                        Support for weight: Core'
                      items:
                        description: 'HTTPBackendRef defines how a HTTPRoute forwards
                          a HTTP request.


                          Note that when a namespace different than the local namespace
                          is specified, a

                          ReferenceGrant object is required in the referent namespace
                          to allow that

                          namespace''s owner to accept the reference. See the ReferenceGrant

                          documentation for details.'
                        properties:
                          filters:
                            description: 'Filters defined at this level should be
                              executed if and only if the

                              request is being forwarded to the backend defined here.


                              Support: Implementation-specific (For broader support
                              of filters, use the

                              Filters field in HTTPRouteRule.)'
                            items:
                              description: 'HTTPRouteFilter defines processing steps
                                that must be completed during the

                                request or response lifecycle. HTTPRouteFilters are
                                meant as an extension

                                point to express processing that may be done in Gateway
                                implementations. Some

                                examples include request or response modification,
                                implementing

                                authentication strategies, rate-limiting, and traffic
                                shaping. API

                                guarantee/conformance is defined based on the type
                                of the filter.'
                              properties:
                                extensionRef:
                                  description: 'ExtensionRef is an optional, implementation-specific
                                    extension to the

                                    "filter" behavior.  For example, resource "myroutefilter"
                                    in group

                                    "networking.example.net"). ExtensionRef MUST NOT
                                    be used for core and

                                    extended filters.


                                    This filter can be used multiple times within
                                    the same rule.


                                    Support: Implementation-specific'
                                  properties:
                                    group:
                                      description: 'Group is the group of the referent.
                                        For example, "gateway.networking.k8s.io".

                                        When unspecified or empty string, core API
                                        group is inferred.'
                                      maxLength: 253
                                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    kind:
                                      description: Kind is kind of the referent. For
                                        example "HTTPRoute" or "Service".
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                      type: string
                                    name:
                                      description: Name is the name of the referent.
                                      maxLength: 253
                                      minLength: 1
                                      type: string
                                  required:
                                  - group
                                  - kind
                                  - name
                                  type: object
                                requestHeaderModifier:
                                  description: 'RequestHeaderModifier defines a schema
                                    for a filter that modifies request

                                    headers.


                                    Support: Core'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                requestMirror:
                                  description: 'RequestMirror defines a schema for
                                    a filter that mirrors requests.

                                    Requests are sent to the specified destination,
                                    but responses from

                                    that destination are ignored.


                                    This filter can be used multiple times within
                                    the same rule. Note that

                                    not all implementations will be able to support
                                    mirroring to multiple

                                    backends.


                                    Support: Extended'
                                  properties:
                                    backendRef:
                                      description: 'BackendRef references a resource
                                        where mirrored requests are sent.


                                        Mirrored requests must be sent only to a single
                                        destination endpoint

                                        within this BackendRef, irrespective of how
                                        many endpoints are present

                                        within this BackendRef.


                                        If the referent cannot be found, this BackendRef
                                        is invalid and must be

                                        dropped from the Gateway. The controller must
                                        ensure the "ResolvedRefs"

                                        condition on the Route status is set to `status:
                                        False` and not configure

                                        this backend in the underlying implementation.


                                        If there is a cross-namespace reference to
                                        an *existing* object

                                        that is not allowed by a ReferenceGrant, the
                                        controller must ensure the

                                        "ResolvedRefs"  condition on the Route is
                                        set to `status: False`,

                                        with the "RefNotPermitted" reason and not
                                        configure this backend in the

                                        underlying implementation.


                                        In either error case, the Message of the `ResolvedRefs`
                                        Condition

                                        should be used to provide more detail about
                                        the problem.


                                        Support: Extended for Kubernetes Service


                                        Support: Implementation-specific for any other
                                        resource'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    fraction:
                                      description: 'Fraction represents the fraction
                                        of requests that should be

                                        mirrored to BackendRef.


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      properties:
                                        denominator:
                                          default: 100
                                          format: int32
                                          minimum: 1
                                          type: integer
                                        numerator:
                                          format: int32
                                          minimum: 0
                                          type: integer
                                      required:
                                      - numerator
                                      type: object
                                      x-kubernetes-validations:
                                      - message: numerator must be less than or equal
                                          to denominator
                                        rule: self.numerator <= self.denominator
                                    percent:
                                      description: 'Percent represents the percentage
                                        of requests that should be

                                        mirrored to BackendRef. Its minimum value
                                        is 0 (indicating 0% of

                                        requests) and its maximum value is 100 (indicating
                                        100% of requests).


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      format: int32
                                      maximum: 100
                                      minimum: 0
                                      type: integer
                                  required:
                                  - backendRef
                                  type: object
                                  x-kubernetes-validations:
                                  - message: Only one of percent or fraction may be
                                      specified in HTTPRequestMirrorFilter
                                    rule: '!(has(self.percent) && has(self.fraction))'
                                requestRedirect:
                                  description: 'RequestRedirect defines a schema for
                                    a filter that responds to the

                                    request with an HTTP redirection.


                                    Support: Core'
                                  properties:
                                    hostname:
                                      description: 'Hostname is the hostname to be
                                        used in the value of the `Location`

                                        header in the response.

                                        When empty, the hostname in the `Host` header
                                        of the request is used.


                                        Support: Core'
                                      maxLength: 253
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    path:
                                      description: 'Path defines parameters used to
                                        modify the path of the incoming request.

                                        The modified path is then used to construct
                                        the `Location` header. When

                                        empty, the request path is used as-is.


                                        Support: Extended'
                                      properties:
                                        replaceFullPath:
                                          description: 'ReplaceFullPath specifies
                                            the value with which to replace the full
                                            path

                                            of a request during a rewrite or redirect.'
                                          maxLength: 1024
                                          type: string
                                        replacePrefixMatch:
                                          description: 'ReplacePrefixMatch specifies
                                            the value with which to replace the prefix

                                            match of a request during a rewrite or
                                            redirect. For example, a request

                                            to "/foo/bar" with a prefix match of "/foo"
                                            and a ReplacePrefixMatch

                                            of "/xyz" would be modified to "/xyz/bar".


                                            Note that this matches the behavior of
                                            the PathPrefix match type. This

                                            matches full path elements. A path element
                                            refers to the list of labels

                                            in the path split by the `/` separator.
                                            When specified, a trailing `/` is

                                            ignored. For example, the paths `/abc`,
                                            `/abc/`, and `/abc/def` would all

                                            match the prefix `/abc`, but the path
                                            `/abcd` would not.


                                            ReplacePrefixMatch is only compatible
                                            with a `PathPrefix` HTTPRouteMatch.

                                            Using any other HTTPRouteMatch type on
                                            the same HTTPRouteRule will result in

                                            the implementation setting the Accepted
                                            Condition for the Route to `status: False`.


                                            Request Path | Prefix Match | Replace
                                            Prefix | Modified Path'
                                          maxLength: 1024
                                          type: string
                                        type:
                                          description: 'Type defines the type of path
                                            modifier. Additional types may be

                                            added in a future release of the API.


                                            Note that values may be added to this
                                            enum, implementations

                                            must ensure that unknown values will not
                                            cause a crash.


                                            Unknown values here must result in the
                                            implementation setting the

                                            Accepted Condition for the Route to `status:
                                            False`, with a

                                            Reason of `UnsupportedValue`.'
                                          enum:
                                          - ReplaceFullPath
                                          - ReplacePrefixMatch
                                          type: string
                                      required:
                                      - type
                                      type: object
                                      x-kubernetes-validations:
                                      - message: replaceFullPath must be specified
                                          when type is set to 'ReplaceFullPath'
                                        rule: 'self.type == ''ReplaceFullPath'' ?
                                          has(self.replaceFullPath) : true'
                                      - message: type must be 'ReplaceFullPath' when
                                          replaceFullPath is set
                                        rule: 'has(self.replaceFullPath) ? self.type
                                          == ''ReplaceFullPath'' : true'
                                      - message: replacePrefixMatch must be specified
                                          when type is set to 'ReplacePrefixMatch'
                                        rule: 'self.type == ''ReplacePrefixMatch''
                                          ? has(self.replacePrefixMatch) : true'
                                      - message: type must be 'ReplacePrefixMatch'
                                          when replacePrefixMatch is set
                                        rule: 'has(self.replacePrefixMatch) ? self.type
                                          == ''ReplacePrefixMatch'' : true'
                                    port:
                                      description: "Port is the port to be used in\
                                        \ the value of the `Location`\nheader in the\
                                        \ response.\n\nIf no port is specified, the\
                                        \ redirect port MUST be derived using the\n\
                                        following rules:\n\n* If redirect scheme is\
                                        \ not-empty, the redirect port MUST be the\
                                        \ well-known\n  port associated with the redirect\
                                        \ scheme. Specifically \"http\" to port 80\n\
                                        \  and \"https\" to port 443. If the redirect\
                                        \ scheme does not have a\n  well-known port,\
                                        \ the listener port of the Gateway SHOULD\
                                        \ be used.\n* If redirect scheme is empty,\
                                        \ the redirect port MUST be the Gateway\n\
                                        \  Listener port.\n\nImplementations SHOULD\
                                        \ NOT add the port number in the 'Location'\n\
                                        header in the following cases:\n\n* A Location\
                                        \ header that will use HTTP (whether that\
                                        \ is determined via\n  the Listener protocol\
                                        \ or the Scheme field) _and_ use port 80.\n\
                                        * A Location header that will use HTTPS (whether\
                                        \ that is determined via\n  the Listener protocol\
                                        \ or the Scheme field) _and_ use port 443.\n\
                                        \nSupport: Extended"
                                      format: int32
                                      maximum: 65535
                                      minimum: 1
                                      type: integer
                                    scheme:
                                      description: 'Scheme is the scheme to be used
                                        in the value of the `Location` header in

                                        the response. When empty, the scheme of the
                                        request is used.


                                        Scheme redirects can affect the port of the
                                        redirect, for more information,

                                        refer to the documentation for the port field
                                        of this filter.


                                        Note that values may be added to this enum,
                                        implementations

                                        must ensure that unknown values will not cause
                                        a crash.


                                        Unknown values here must result in the implementation
                                        setting the

                                        Accepted Condition for the Route to `status:
                                        False`, with a

                                        Reason of `UnsupportedValue`.


                                        Support: Extended'
                                      enum:
                                      - http
                                      - https
                                      type: string
                                    statusCode:
                                      default: 302
                                      description: 'StatusCode is the HTTP status
                                        code to be used in response.


                                        Note that values may be added to this enum,
                                        implementations

                                        must ensure that unknown values will not cause
                                        a crash.


                                        Unknown values here must result in the implementation
                                        setting the

                                        Accepted Condition for the Route to `status:
                                        False`, with a

                                        Reason of `UnsupportedValue`.


                                        Support: Core'
                                      enum:
                                      - 301
                                      - 302
                                      type: integer
                                  type: object
                                responseHeaderModifier:
                                  description: 'ResponseHeaderModifier defines a schema
                                    for a filter that modifies response

                                    headers.


                                    Support: Extended'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                type:
                                  description: "Type identifies the type of filter\
                                    \ to apply. As with other API fields,\ntypes are\
                                    \ classified into three conformance levels:\n\n\
                                    - Core: Filter types and their corresponding configuration\
                                    \ defined by\n  \"Support: Core\" in this package,\
                                    \ e.g. \"RequestHeaderModifier\". All\n  implementations\
                                    \ must support core filters.\n\n- Extended: Filter\
                                    \ types and their corresponding configuration\
                                    \ defined by\n  \"Support: Extended\" in this\
                                    \ package, e.g. \"RequestMirror\". Implementers\n\
                                    \  are encouraged to support extended filters.\n\
                                    \n- Implementation-specific: Filters that are\
                                    \ defined and supported by\n  specific vendors.\n\
                                    \  In the future, filters showing convergence\
                                    \ in behavior across multiple\n  implementations\
                                    \ will be considered for inclusion in extended\
                                    \ or core\n  conformance levels. Filter-specific\
                                    \ configuration for such filters\n  is specified\
                                    \ using the ExtensionRef field. `Type` should\
                                    \ be set to\n  \"ExtensionRef\" for custom filters.\n\
                                    \nImplementers are encouraged to define custom\
                                    \ implementation types to\nextend the core API\
                                    \ with implementation-specific behavior.\n\nIf\
                                    \ a reference to a custom filter type cannot be\
                                    \ resolved, the filter\nMUST NOT be skipped. Instead,\
                                    \ requests that would have been processed by\n\
                                    that filter MUST receive a HTTP error response.\n\
                                    \nNote that values may be added to this enum,\
                                    \ implementations\nmust ensure that unknown values\
                                    \ will not cause a crash.\n\nUnknown values here\
                                    \ must result in the implementation setting the\n\
                                    Accepted Condition for the Route to `status: False`,\
                                    \ with a\nReason of `UnsupportedValue`."
                                  enum:
                                  - RequestHeaderModifier
                                  - ResponseHeaderModifier
                                  - RequestMirror
                                  - RequestRedirect
                                  - URLRewrite
                                  - ExtensionRef
                                  type: string
                                urlRewrite:
                                  description: 'URLRewrite defines a schema for a
                                    filter that modifies a request during forwarding.


                                    Support: Extended'
                                  properties:
                                    hostname:
                                      description: 'Hostname is the value to be used
                                        to replace the Host header value during

                                        forwarding.


                                        Support: Extended'
                                      maxLength: 253
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    path:
                                      description: 'Path defines a path rewrite.


                                        Support: Extended'
                                      properties:
                                        replaceFullPath:
                                          description: 'ReplaceFullPath specifies
                                            the value with which to replace the full
                                            path

                                            of a request during a rewrite or redirect.'
                                          maxLength: 1024
                                          type: string
                                        replacePrefixMatch:
                                          description: 'ReplacePrefixMatch specifies
                                            the value with which to replace the prefix

                                            match of a request during a rewrite or
                                            redirect. For example, a request

                                            to "/foo/bar" with a prefix match of "/foo"
                                            and a ReplacePrefixMatch

                                            of "/xyz" would be modified to "/xyz/bar".


                                            Note that this matches the behavior of
                                            the PathPrefix match type. This

                                            matches full path elements. A path element
                                            refers to the list of labels

                                            in the path split by the `/` separator.
                                            When specified, a trailing `/` is

                                            ignored. For example, the paths `/abc`,
                                            `/abc/`, and `/abc/def` would all

                                            match the prefix `/abc`, but the path
                                            `/abcd` would not.


                                            ReplacePrefixMatch is only compatible
                                            with a `PathPrefix` HTTPRouteMatch.

                                            Using any other HTTPRouteMatch type on
                                            the same HTTPRouteRule will result in

                                            the implementation setting the Accepted
                                            Condition for the Route to `status: False`.


                                            Request Path | Prefix Match | Replace
                                            Prefix | Modified Path'
                                          maxLength: 1024
                                          type: string
                                        type:
                                          description: 'Type defines the type of path
                                            modifier. Additional types may be

                                            added in a future release of the API.


                                            Note that values may be added to this
                                            enum, implementations

                                            must ensure that unknown values will not
                                            cause a crash.


                                            Unknown values here must result in the
                                            implementation setting the

                                            Accepted Condition for the Route to `status:
                                            False`, with a

                                            Reason of `UnsupportedValue`.'
                                          enum:
                                          - ReplaceFullPath
                                          - ReplacePrefixMatch
                                          type: string
                                      required:
                                      - type
                                      type: object
                                      x-kubernetes-validations:
                                      - message: replaceFullPath must be specified
                                          when type is set to 'ReplaceFullPath'
                                        rule: 'self.type == ''ReplaceFullPath'' ?
                                          has(self.replaceFullPath) : true'
                                      - message: type must be 'ReplaceFullPath' when
                                          replaceFullPath is set
                                        rule: 'has(self.replaceFullPath) ? self.type
                                          == ''ReplaceFullPath'' : true'
                                      - message: replacePrefixMatch must be specified
                                          when type is set to 'ReplacePrefixMatch'
                                        rule: 'self.type == ''ReplacePrefixMatch''
                                          ? has(self.replacePrefixMatch) : true'
                                      - message: type must be 'ReplacePrefixMatch'
                                          when replacePrefixMatch is set
                                        rule: 'has(self.replacePrefixMatch) ? self.type
                                          == ''ReplacePrefixMatch'' : true'
                                  type: object
                              required:
                              - type
                              type: object
                              x-kubernetes-validations:
                              - message: filter.requestHeaderModifier must be nil
                                  if the filter.type is not RequestHeaderModifier
                                rule: '!(has(self.requestHeaderModifier) && self.type
                                  != ''RequestHeaderModifier'')'
                              - message: filter.requestHeaderModifier must be specified
                                  for RequestHeaderModifier filter.type
                                rule: '!(!has(self.requestHeaderModifier) && self.type
                                  == ''RequestHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be nil
                                  if the filter.type is not ResponseHeaderModifier
                                rule: '!(has(self.responseHeaderModifier) && self.type
                                  != ''ResponseHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be specified
                                  for ResponseHeaderModifier filter.type
                                rule: '!(!has(self.responseHeaderModifier) && self.type
                                  == ''ResponseHeaderModifier'')'
                              - message: filter.requestMirror must be nil if the filter.type
                                  is not RequestMirror
                                rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                              - message: filter.requestMirror must be specified for
                                  RequestMirror filter.type
                                rule: '!(!has(self.requestMirror) && self.type ==
                                  ''RequestMirror'')'
                              - message: filter.requestRedirect must be nil if the
                                  filter.type is not RequestRedirect
                                rule: '!(has(self.requestRedirect) && self.type !=
                                  ''RequestRedirect'')'
                              - message: filter.requestRedirect must be specified
                                  for RequestRedirect filter.type
                                rule: '!(!has(self.requestRedirect) && self.type ==
                                  ''RequestRedirect'')'
                              - message: filter.urlRewrite must be nil if the filter.type
                                  is not URLRewrite
                                rule: '!(has(self.urlRewrite) && self.type != ''URLRewrite'')'
                              - message: filter.urlRewrite must be specified for URLRewrite
                                  filter.type
                                rule: '!(!has(self.urlRewrite) && self.type == ''URLRewrite'')'
                              - message: filter.extensionRef must be nil if the filter.type
                                  is not ExtensionRef
                                rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                              - message: filter.extensionRef must be specified for
                                  ExtensionRef filter.type
                                rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: atomic
                            x-kubernetes-validations:
                            - message: May specify either httpRouteFilterRequestRedirect
                                or httpRouteFilterRequestRewrite, but not both
                              rule: '!(self.exists(f, f.type == ''RequestRedirect'')
                                && self.exists(f, f.type == ''URLRewrite''))'
                            - message: RequestHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                                <= 1
                            - message: ResponseHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                                <= 1
                            - message: RequestRedirect filter cannot be repeated
                              rule: self.filter(f, f.type == 'RequestRedirect').size()
                                <= 1
                            - message: URLRewrite filter cannot be repeated
                              rule: self.filter(f, f.type == 'URLRewrite').size()
                                <= 1
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            description: 'Weight specifies the proportion of requests
                              forwarded to the referenced

                              backend. This is computed as weight/(sum of all weights
                              in this

                              BackendRefs list). For non-zero values, there may be
                              some epsilon from

                              the exact proportion defined here depending on the precision
                              an

                              implementation supports. Weight is not a percentage
                              and the sum of

                              weights does not need to equal 100.


                              If only one backend is specified and it has a weight
                              greater than 0, 100%

                              of the traffic is forwarded to that backend. If weight
                              is set to 0, no

                              traffic should be forwarded for this entry. If unspecified,
                              weight

                              defaults to 1.


                              Support for this field varies based on the context where
                              used.'
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                    filters:
                      description: "Filters define the filters that are applied to\
                        \ requests that match\nthis rule.\n\nWherever possible, implementations\
                        \ SHOULD implement filters in the order\nthey are specified.\n\
                        \nImplementations MAY choose to implement this ordering strictly,\
                        \ rejecting\nany combination or order of filters that cannot\
                        \ be supported. If implementations\nchoose a strict interpretation\
                        \ of filter ordering, they MUST clearly document\nthat behavior.\n\
                        \nTo reject an invalid combination or order of filters, implementations\
                        \ SHOULD\nconsider the Route Rules with this configuration\
                        \ invalid. If all Route Rules\nin a Route are invalid, the\
                        \ entire Route would be considered invalid. If only\na portion\
                        \ of Route Rules are invalid, implementations MUST set the\n\
                        \"PartiallyInvalid\" condition for the Route.\n\nConformance-levels\
                        \ at this level are defined based on the type of filter:\n\
                        \n- ALL core filters MUST be supported by all implementations.\n\
                        - Implementers are encouraged to support extended filters.\n\
                        - Implementation-specific custom filters have no API guarantees\
                        \ across\n  implementations.\n\nSpecifying the same filter\
                        \ multiple times is not supported unless explicitly\nindicated\
                        \ in the filter.\n\nAll filters are expected to be compatible\
                        \ with each other except for the\nURLRewrite and RequestRedirect\
                        \ filters, which may not be combined. If an\nimplementation\
                        \ cannot support other combinations of filters, they must\
                        \ clearly\ndocument that limitation. In cases where incompatible\
                        \ or unsupported\nfilters are specified and cause the `Accepted`\
                        \ condition to be set to status\n`False`, implementations\
                        \ may use the `IncompatibleFilters` reason to specify\nthis\
                        \ configuration error.\n\nSupport: Core"
                      items:
                        description: 'HTTPRouteFilter defines processing steps that
                          must be completed during the

                          request or response lifecycle. HTTPRouteFilters are meant
                          as an extension

                          point to express processing that may be done in Gateway
                          implementations. Some

                          examples include request or response modification, implementing

                          authentication strategies, rate-limiting, and traffic shaping.
                          API

                          guarantee/conformance is defined based on the type of the
                          filter.'
                        properties:
                          extensionRef:
                            description: 'ExtensionRef is an optional, implementation-specific
                              extension to the

                              "filter" behavior.  For example, resource "myroutefilter"
                              in group

                              "networking.example.net"). ExtensionRef MUST NOT be
                              used for core and

                              extended filters.


                              This filter can be used multiple times within the same
                              rule.


                              Support: Implementation-specific'
                            properties:
                              group:
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                description: Kind is kind of the referent. For example
                                  "HTTPRoute" or "Service".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                            required:
                            - group
                            - kind
                            - name
                            type: object
                          requestHeaderModifier:
                            description: 'RequestHeaderModifier defines a schema for
                              a filter that modifies request

                              headers.


                              Support: Core'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          requestMirror:
                            description: 'RequestMirror defines a schema for a filter
                              that mirrors requests.

                              Requests are sent to the specified destination, but
                              responses from

                              that destination are ignored.


                              This filter can be used multiple times within the same
                              rule. Note that

                              not all implementations will be able to support mirroring
                              to multiple

                              backends.


                              Support: Extended'
                            properties:
                              backendRef:
                                description: 'BackendRef references a resource where
                                  mirrored requests are sent.


                                  Mirrored requests must be sent only to a single
                                  destination endpoint

                                  within this BackendRef, irrespective of how many
                                  endpoints are present

                                  within this BackendRef.


                                  If the referent cannot be found, this BackendRef
                                  is invalid and must be

                                  dropped from the Gateway. The controller must ensure
                                  the "ResolvedRefs"

                                  condition on the Route status is set to `status:
                                  False` and not configure

                                  this backend in the underlying implementation.


                                  If there is a cross-namespace reference to an *existing*
                                  object

                                  that is not allowed by a ReferenceGrant, the controller
                                  must ensure the

                                  "ResolvedRefs"  condition on the Route is set to
                                  `status: False`,

                                  with the "RefNotPermitted" reason and not configure
                                  this backend in the

                                  underlying implementation.


                                  In either error case, the Message of the `ResolvedRefs`
                                  Condition

                                  should be used to provide more detail about the
                                  problem.


                                  Support: Extended for Kubernetes Service


                                  Support: Implementation-specific for any other resource'
                                properties:
                                  group:
                                    default: ''
                                    description: 'Group is the group of the referent.
                                      For example, "gateway.networking.k8s.io".

                                      When unspecified or empty string, core API group
                                      is inferred.'
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    description: 'Kind is the Kubernetes resource
                                      kind of the referent. For example

                                      "Service".


                                      Defaults to "Service" when not specified.


                                      ExternalName services can refer to CNAME DNS
                                      records that may live

                                      outside of the cluster and as such are difficult
                                      to reason about in

                                      terms of conformance. They also may not be safe
                                      to forward to (see

                                      CVE-2021-25740 for more information). Implementations
                                      SHOULD NOT

                                      support ExternalName Services.


                                      Support: Core (Services with a type other than
                                      ExternalName)


                                      Support: Implementation-specific (Services with
                                      type ExternalName)'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    description: Name is the name of the referent.
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: 'Namespace is the namespace of the
                                      backend. When unspecified, the local

                                      namespace is inferred.


                                      Note that when a namespace different than the
                                      local namespace is specified,

                                      a ReferenceGrant object is required in the referent
                                      namespace to allow that

                                      namespace''s owner to accept the reference.
                                      See the ReferenceGrant

                                      documentation for details.


                                      Support: Core'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    description: 'Port specifies the destination port
                                      number to use for this resource.

                                      Port is required when the referent is a Kubernetes
                                      Service. In this

                                      case, the port number is the service port number,
                                      not the target port.

                                      For other resources, destination port might
                                      be derived from the referent

                                      resource or this field.'
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              fraction:
                                description: 'Fraction represents the fraction of
                                  requests that should be

                                  mirrored to BackendRef.


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                properties:
                                  denominator:
                                    default: 100
                                    format: int32
                                    minimum: 1
                                    type: integer
                                  numerator:
                                    format: int32
                                    minimum: 0
                                    type: integer
                                required:
                                - numerator
                                type: object
                                x-kubernetes-validations:
                                - message: numerator must be less than or equal to
                                    denominator
                                  rule: self.numerator <= self.denominator
                              percent:
                                description: 'Percent represents the percentage of
                                  requests that should be

                                  mirrored to BackendRef. Its minimum value is 0 (indicating
                                  0% of

                                  requests) and its maximum value is 100 (indicating
                                  100% of requests).


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                format: int32
                                maximum: 100
                                minimum: 0
                                type: integer
                            required:
                            - backendRef
                            type: object
                            x-kubernetes-validations:
                            - message: Only one of percent or fraction may be specified
                                in HTTPRequestMirrorFilter
                              rule: '!(has(self.percent) && has(self.fraction))'
                          requestRedirect:
                            description: 'RequestRedirect defines a schema for a filter
                              that responds to the

                              request with an HTTP redirection.


                              Support: Core'
                            properties:
                              hostname:
                                description: 'Hostname is the hostname to be used
                                  in the value of the `Location`

                                  header in the response.

                                  When empty, the hostname in the `Host` header of
                                  the request is used.


                                  Support: Core'
                                maxLength: 253
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              path:
                                description: 'Path defines parameters used to modify
                                  the path of the incoming request.

                                  The modified path is then used to construct the
                                  `Location` header. When

                                  empty, the request path is used as-is.


                                  Support: Extended'
                                properties:
                                  replaceFullPath:
                                    description: 'ReplaceFullPath specifies the value
                                      with which to replace the full path

                                      of a request during a rewrite or redirect.'
                                    maxLength: 1024
                                    type: string
                                  replacePrefixMatch:
                                    description: 'ReplacePrefixMatch specifies the
                                      value with which to replace the prefix

                                      match of a request during a rewrite or redirect.
                                      For example, a request

                                      to "/foo/bar" with a prefix match of "/foo"
                                      and a ReplacePrefixMatch

                                      of "/xyz" would be modified to "/xyz/bar".


                                      Note that this matches the behavior of the PathPrefix
                                      match type. This

                                      matches full path elements. A path element refers
                                      to the list of labels

                                      in the path split by the `/` separator. When
                                      specified, a trailing `/` is

                                      ignored. For example, the paths `/abc`, `/abc/`,
                                      and `/abc/def` would all

                                      match the prefix `/abc`, but the path `/abcd`
                                      would not.


                                      ReplacePrefixMatch is only compatible with a
                                      `PathPrefix` HTTPRouteMatch.

                                      Using any other HTTPRouteMatch type on the same
                                      HTTPRouteRule will result in

                                      the implementation setting the Accepted Condition
                                      for the Route to `status: False`.


                                      Request Path | Prefix Match | Replace Prefix
                                      | Modified Path'
                                    maxLength: 1024
                                    type: string
                                  type:
                                    description: 'Type defines the type of path modifier.
                                      Additional types may be

                                      added in a future release of the API.


                                      Note that values may be added to this enum,
                                      implementations

                                      must ensure that unknown values will not cause
                                      a crash.


                                      Unknown values here must result in the implementation
                                      setting the

                                      Accepted Condition for the Route to `status:
                                      False`, with a

                                      Reason of `UnsupportedValue`.'
                                    enum:
                                    - ReplaceFullPath
                                    - ReplacePrefixMatch
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: replaceFullPath must be specified when
                                    type is set to 'ReplaceFullPath'
                                  rule: 'self.type == ''ReplaceFullPath'' ? has(self.replaceFullPath)
                                    : true'
                                - message: type must be 'ReplaceFullPath' when replaceFullPath
                                    is set
                                  rule: 'has(self.replaceFullPath) ? self.type ==
                                    ''ReplaceFullPath'' : true'
                                - message: replacePrefixMatch must be specified when
                                    type is set to 'ReplacePrefixMatch'
                                  rule: 'self.type == ''ReplacePrefixMatch'' ? has(self.replacePrefixMatch)
                                    : true'
                                - message: type must be 'ReplacePrefixMatch' when
                                    replacePrefixMatch is set
                                  rule: 'has(self.replacePrefixMatch) ? self.type
                                    == ''ReplacePrefixMatch'' : true'
                              port:
                                description: "Port is the port to be used in the value\
                                  \ of the `Location`\nheader in the response.\n\n\
                                  If no port is specified, the redirect port MUST\
                                  \ be derived using the\nfollowing rules:\n\n* If\
                                  \ redirect scheme is not-empty, the redirect port\
                                  \ MUST be the well-known\n  port associated with\
                                  \ the redirect scheme. Specifically \"http\" to\
                                  \ port 80\n  and \"https\" to port 443. If the redirect\
                                  \ scheme does not have a\n  well-known port, the\
                                  \ listener port of the Gateway SHOULD be used.\n\
                                  * If redirect scheme is empty, the redirect port\
                                  \ MUST be the Gateway\n  Listener port.\n\nImplementations\
                                  \ SHOULD NOT add the port number in the 'Location'\n\
                                  header in the following cases:\n\n* A Location header\
                                  \ that will use HTTP (whether that is determined\
                                  \ via\n  the Listener protocol or the Scheme field)\
                                  \ _and_ use port 80.\n* A Location header that will\
                                  \ use HTTPS (whether that is determined via\n  the\
                                  \ Listener protocol or the Scheme field) _and_ use\
                                  \ port 443.\n\nSupport: Extended"
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                              scheme:
                                description: 'Scheme is the scheme to be used in the
                                  value of the `Location` header in

                                  the response. When empty, the scheme of the request
                                  is used.


                                  Scheme redirects can affect the port of the redirect,
                                  for more information,

                                  refer to the documentation for the port field of
                                  this filter.


                                  Note that values may be added to this enum, implementations

                                  must ensure that unknown values will not cause a
                                  crash.


                                  Unknown values here must result in the implementation
                                  setting the

                                  Accepted Condition for the Route to `status: False`,
                                  with a

                                  Reason of `UnsupportedValue`.


                                  Support: Extended'
                                enum:
                                - http
                                - https
                                type: string
                              statusCode:
                                default: 302
                                description: 'StatusCode is the HTTP status code to
                                  be used in response.


                                  Note that values may be added to this enum, implementations

                                  must ensure that unknown values will not cause a
                                  crash.


                                  Unknown values here must result in the implementation
                                  setting the

                                  Accepted Condition for the Route to `status: False`,
                                  with a

                                  Reason of `UnsupportedValue`.


                                  Support: Core'
                                enum:
                                - 301
                                - 302
                                type: integer
                            type: object
                          responseHeaderModifier:
                            description: 'ResponseHeaderModifier defines a schema
                              for a filter that modifies response

                              headers.


                              Support: Extended'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          type:
                            description: "Type identifies the type of filter to apply.\
                              \ As with other API fields,\ntypes are classified into\
                              \ three conformance levels:\n\n- Core: Filter types\
                              \ and their corresponding configuration defined by\n\
                              \  \"Support: Core\" in this package, e.g. \"RequestHeaderModifier\"\
                              . All\n  implementations must support core filters.\n\
                              \n- Extended: Filter types and their corresponding configuration\
                              \ defined by\n  \"Support: Extended\" in this package,\
                              \ e.g. \"RequestMirror\". Implementers\n  are encouraged\
                              \ to support extended filters.\n\n- Implementation-specific:\
                              \ Filters that are defined and supported by\n  specific\
                              \ vendors.\n  In the future, filters showing convergence\
                              \ in behavior across multiple\n  implementations will\
                              \ be considered for inclusion in extended or core\n\
                              \  conformance levels. Filter-specific configuration\
                              \ for such filters\n  is specified using the ExtensionRef\
                              \ field. `Type` should be set to\n  \"ExtensionRef\"\
                              \ for custom filters.\n\nImplementers are encouraged\
                              \ to define custom implementation types to\nextend the\
                              \ core API with implementation-specific behavior.\n\n\
                              If a reference to a custom filter type cannot be resolved,\
                              \ the filter\nMUST NOT be skipped. Instead, requests\
                              \ that would have been processed by\nthat filter MUST\
                              \ receive a HTTP error response.\n\nNote that values\
                              \ may be added to this enum, implementations\nmust ensure\
                              \ that unknown values will not cause a crash.\n\nUnknown\
                              \ values here must result in the implementation setting\
                              \ the\nAccepted Condition for the Route to `status:\
                              \ False`, with a\nReason of `UnsupportedValue`."
                            enum:
                            - RequestHeaderModifier
                            - ResponseHeaderModifier
                            - RequestMirror
                            - RequestRedirect
                            - URLRewrite
                            - ExtensionRef
                            type: string
                          urlRewrite:
                            description: 'URLRewrite defines a schema for a filter
                              that modifies a request during forwarding.


                              Support: Extended'
                            properties:
                              hostname:
                                description: 'Hostname is the value to be used to
                                  replace the Host header value during

                                  forwarding.


                                  Support: Extended'
                                maxLength: 253
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              path:
                                description: 'Path defines a path rewrite.


                                  Support: Extended'
                                properties:
                                  replaceFullPath:
                                    description: 'ReplaceFullPath specifies the value
                                      with which to replace the full path

                                      of a request during a rewrite or redirect.'
                                    maxLength: 1024
                                    type: string
                                  replacePrefixMatch:
                                    description: 'ReplacePrefixMatch specifies the
                                      value with which to replace the prefix

                                      match of a request during a rewrite or redirect.
                                      For example, a request

                                      to "/foo/bar" with a prefix match of "/foo"
                                      and a ReplacePrefixMatch

                                      of "/xyz" would be modified to "/xyz/bar".


                                      Note that this matches the behavior of the PathPrefix
                                      match type. This

                                      matches full path elements. A path element refers
                                      to the list of labels

                                      in the path split by the `/` separator. When
                                      specified, a trailing `/` is

                                      ignored. For example, the paths `/abc`, `/abc/`,
                                      and `/abc/def` would all

                                      match the prefix `/abc`, but the path `/abcd`
                                      would not.


                                      ReplacePrefixMatch is only compatible with a
                                      `PathPrefix` HTTPRouteMatch.

                                      Using any other HTTPRouteMatch type on the same
                                      HTTPRouteRule will result in

                                      the implementation setting the Accepted Condition
                                      for the Route to `status: False`.


                                      Request Path | Prefix Match | Replace Prefix
                                      | Modified Path'
                                    maxLength: 1024
                                    type: string
                                  type:
                                    description: 'Type defines the type of path modifier.
                                      Additional types may be

                                      added in a future release of the API.


                                      Note that values may be added to this enum,
                                      implementations

                                      must ensure that unknown values will not cause
                                      a crash.


                                      Unknown values here must result in the implementation
                                      setting the

                                      Accepted Condition for the Route to `status:
                                      False`, with a

                                      Reason of `UnsupportedValue`.'
                                    enum:
                                    - ReplaceFullPath
                                    - ReplacePrefixMatch
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: replaceFullPath must be specified when
                                    type is set to 'ReplaceFullPath'
                                  rule: 'self.type == ''ReplaceFullPath'' ? has(self.replaceFullPath)
                                    : true'
                                - message: type must be 'ReplaceFullPath' when replaceFullPath
                                    is set
                                  rule: 'has(self.replaceFullPath) ? self.type ==
                                    ''ReplaceFullPath'' : true'
                                - message: replacePrefixMatch must be specified when
                                    type is set to 'ReplacePrefixMatch'
                                  rule: 'self.type == ''ReplacePrefixMatch'' ? has(self.replacePrefixMatch)
                                    : true'
                                - message: type must be 'ReplacePrefixMatch' when
                                    replacePrefixMatch is set
                                  rule: 'has(self.replacePrefixMatch) ? self.type
                                    == ''ReplacePrefixMatch'' : true'
                            type: object
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: filter.requestHeaderModifier must be nil if the
                            filter.type is not RequestHeaderModifier
                          rule: '!(has(self.requestHeaderModifier) && self.type !=
                            ''RequestHeaderModifier'')'
                        - message: filter.requestHeaderModifier must be specified
                            for RequestHeaderModifier filter.type
                          rule: '!(!has(self.requestHeaderModifier) && self.type ==
                            ''RequestHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be nil if the
                            filter.type is not ResponseHeaderModifier
                          rule: '!(has(self.responseHeaderModifier) && self.type !=
                            ''ResponseHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be specified
                            for ResponseHeaderModifier filter.type
                          rule: '!(!has(self.responseHeaderModifier) && self.type
                            == ''ResponseHeaderModifier'')'
                        - message: filter.requestMirror must be nil if the filter.type
                            is not RequestMirror
                          rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                        - message: filter.requestMirror must be specified for RequestMirror
                            filter.type
                          rule: '!(!has(self.requestMirror) && self.type == ''RequestMirror'')'
                        - message: filter.requestRedirect must be nil if the filter.type
                            is not RequestRedirect
                          rule: '!(has(self.requestRedirect) && self.type != ''RequestRedirect'')'
                        - message: filter.requestRedirect must be specified for RequestRedirect
                            filter.type
                          rule: '!(!has(self.requestRedirect) && self.type == ''RequestRedirect'')'
                        - message: filter.urlRewrite must be nil if the filter.type
                            is not URLRewrite
                          rule: '!(has(self.urlRewrite) && self.type != ''URLRewrite'')'
                        - message: filter.urlRewrite must be specified for URLRewrite
                            filter.type
                          rule: '!(!has(self.urlRewrite) && self.type == ''URLRewrite'')'
                        - message: filter.extensionRef must be nil if the filter.type
                            is not ExtensionRef
                          rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                        - message: filter.extensionRef must be specified for ExtensionRef
                            filter.type
                          rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                      x-kubernetes-validations:
                      - message: May specify either httpRouteFilterRequestRedirect
                          or httpRouteFilterRequestRewrite, but not both
                        rule: '!(self.exists(f, f.type == ''RequestRedirect'') &&
                          self.exists(f, f.type == ''URLRewrite''))'
                      - message: RequestHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                          <= 1
                      - message: ResponseHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                          <= 1
                      - message: RequestRedirect filter cannot be repeated
                        rule: self.filter(f, f.type == 'RequestRedirect').size() <=
                          1
                      - message: URLRewrite filter cannot be repeated
                        rule: self.filter(f, f.type == 'URLRewrite').size() <= 1
                    matches:
                      default:
                      - path:
                          type: PathPrefix
                          value: /
                      description: "Matches define conditions used for matching the\
                        \ rule against incoming\nHTTP requests. Each match is independent,\
                        \ i.e. this rule will be matched\nif **any** one of the matches\
                        \ is satisfied.\n\nFor example, take the following matches\
                        \ configuration:\n\n```\nmatches:\n- path:\n    value: \"\
                        /foo\"\n  headers:\n  - name: \"version\"\n    value: \"v2\"\
                        \n- path:\n    value: \"/v2/foo\"\n```\n\nFor a request to\
                        \ match against this rule, a request must satisfy\nEITHER\
                        \ of the two conditions:\n\n- path prefixed with `/foo` AND\
                        \ contains the header `version: v2`\n- path prefix of `/v2/foo`\n\
                        \nSee the documentation for HTTPRouteMatch on how to specify\
                        \ multiple\nmatch conditions that should be ANDed together.\n\
                        \nIf no matches are specified, the default is a prefix\npath\
                        \ match on \"/\", which has the effect of matching every\n\
                        HTTP request.\n\nProxy or Load Balancer routing configuration\
                        \ generated from HTTPRoutes\nMUST prioritize matches based\
                        \ on the following criteria, continuing on\nties. Across all\
                        \ rules specified on applicable Routes, precedence must be\n\
                        given to the match having:\n\n* \"Exact\" path match.\n* \"\
                        Prefix\" path match with largest number of characters.\n*\
                        \ Method match.\n* Largest number of header matches.\n* Largest\
                        \ number of query param matches.\n\nNote: The precedence of\
                        \ RegularExpression path matches are implementation-specific.\n\
                        \nIf ties still exist across multiple Routes, matching precedence\
                        \ MUST be\ndetermined in order of the following criteria,\
                        \ continuing on ties:\n\n* The oldest Route based on creation\
                        \ timestamp.\n* The Route appearing first in alphabetical\
                        \ order by\n  \"{namespace}/{name}\".\n\nIf ties still exist\
                        \ within an HTTPRoute, matching precedence MUST be granted\n\
                        to the FIRST matching rule (in list order) with a match meeting\
                        \ the above\ncriteria.\n\nWhen no rules matching a request\
                        \ have been successfully attached to the\nparent a request\
                        \ is coming from, a HTTP 404 status code MUST be returned."
                      items:
                        description: "HTTPRouteMatch defines the predicate used to\
                          \ match requests to a given\naction. Multiple match types\
                          \ are ANDed together, i.e. the match will\nevaluate to true\
                          \ only if all conditions are satisfied.\n\nFor example,\
                          \ the match below will match a HTTP request only if its\
                          \ path\nstarts with `/foo` AND it contains the `version:\
                          \ v1` header:\n\n```\nmatch:\n\n\tpath:\n\t  value: \"/foo\"\
                          \n\theaders:\n\t- name: \"version\"\n\t  value \"v1\"\n\n\
                          ```"
                        properties:
                          headers:
                            description: 'Headers specifies HTTP request header matchers.
                              Multiple match values are

                              ANDed together, meaning, a request must match all the
                              specified headers

                              to select the route.'
                            items:
                              description: 'HTTPHeaderMatch describes how to select
                                a HTTP route by matching HTTP request

                                headers.'
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, only the first

                                    entry with an equivalent name MUST be considered
                                    for a match. Subsequent

                                    entries with an equivalent header name MUST be
                                    ignored. Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.


                                    When a header is repeated in an HTTP request,
                                    it is

                                    implementation-specific behavior as to how this
                                    is represented.

                                    Generally, proxies should follow the guidance
                                    from the RFC:

                                    https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                    regarding

                                    processing a repeated header, with special handling
                                    for "Set-Cookie".'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  description: 'Type specifies how to match against
                                    the value of the header.


                                    Support: Core (Exact)


                                    Support: Implementation-specific (RegularExpression)


                                    Since RegularExpression HeaderMatchType has implementation-specific

                                    conformance, implementations can support POSIX,
                                    PCRE or any other dialects

                                    of regular expressions. Please read the implementation''s
                                    documentation to

                                    determine the supported dialect.'
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          method:
                            description: 'Method specifies HTTP method matcher.

                              When specified, this route will be matched only if the
                              request has the

                              specified method.


                              Support: Extended'
                            enum:
                            - GET
                            - HEAD
                            - POST
                            - PUT
                            - DELETE
                            - CONNECT
                            - OPTIONS
                            - TRACE
                            - PATCH
                            type: string
                          path:
                            default:
                              type: PathPrefix
                              value: /
                            description: 'Path specifies a HTTP request path matcher.
                              If this field is not

                              specified, a default prefix match on the "/" path is
                              provided.'
                            properties:
                              type:
                                default: PathPrefix
                                description: 'Type specifies how to match against
                                  the path Value.


                                  Support: Core (Exact, PathPrefix)


                                  Support: Implementation-specific (RegularExpression)'
                                enum:
                                - Exact
                                - PathPrefix
                                - RegularExpression
                                type: string
                              value:
                                default: /
                                description: Value of the HTTP path to match against.
                                maxLength: 1024
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: value must be an absolute path and start with
                                '/' when type one of ['Exact', 'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? self.value.startsWith(''/'')
                                : true'
                            - message: must not contain '//' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''//'')
                                : true'
                            - message: must not contain '/./' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''/./'')
                                : true'
                            - message: must not contain '/../' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''/../'')
                                : true'
                            - message: must not contain '%2f' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''%2f'')
                                : true'
                            - message: must not contain '%2F' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''%2F'')
                                : true'
                            - message: must not contain '#' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''#'')
                                : true'
                            - message: must not end with '/..' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.endsWith(''/..'')
                                : true'
                            - message: must not end with '/.' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.endsWith(''/.'')
                                : true'
                            - message: type must be one of ['Exact', 'PathPrefix',
                                'RegularExpression']
                              rule: self.type in ['Exact','PathPrefix'] || self.type
                                == 'RegularExpression'
                            - message: must only contain valid characters (matching
                                ^(?:[-A-Za-z0-9/._~!$&'()*+,;=:@]|[%][0-9a-fA-F]{2})+$)
                                for types ['Exact', 'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? self.value.matches(r"""^(?:[-A-Za-z0-9/._~!$&''()*+,;=:@]|[%][0-9a-fA-F]{2})+$""")
                                : true'
                          queryParams:
                            description: 'QueryParams specifies HTTP query parameter
                              matchers. Multiple match

                              values are ANDed together, meaning, a request must match
                              all the

                              specified query parameters to select the route.


                              Support: Extended'
                            items:
                              description: 'HTTPQueryParamMatch describes how to select
                                a HTTP route by matching HTTP

                                query parameters.'
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP query
                                    param to be matched. This must be an

                                    exact string match. (See

                                    https://tools.ietf.org/html/rfc7230#section-2.7.3).


                                    If multiple entries specify equivalent query param
                                    names, only the first

                                    entry with an equivalent name MUST be considered
                                    for a match. Subsequent

                                    entries with an equivalent query param name MUST
                                    be ignored.


                                    If a query param is repeated in an HTTP request,
                                    the behavior is

                                    purposely left undefined, since different data
                                    planes have different

                                    capabilities. However, it is *recommended* that
                                    implementations should

                                    match against the first value of the param if
                                    the data plane supports it,

                                    as this behavior is expected in other load balancing
                                    contexts outside of

                                    the Gateway API.


                                    Users SHOULD NOT route traffic based on repeated
                                    query params to guard

                                    themselves against potential differences in the
                                    implementations.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  description: 'Type specifies how to match against
                                    the value of the query parameter.


                                    Support: Extended (Exact)


                                    Support: Implementation-specific (RegularExpression)


                                    Since RegularExpression QueryParamMatchType has
                                    Implementation-specific

                                    conformance, implementations can support POSIX,
                                    PCRE or any other

                                    dialects of regular expressions. Please read the
                                    implementation''s

                                    documentation to determine the supported dialect.'
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  description: Value is the value of HTTP query param
                                    to be matched.
                                  maxLength: 1024
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                      maxItems: 64
                      type: array
                      x-kubernetes-list-type: atomic
                    name:
                      description: 'Name is the name of the route rule. This name
                        MUST be unique within a Route if it is set.


                        Support: Extended'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    timeouts:
                      description: 'Timeouts defines the timeouts that can be configured
                        for an HTTP request.


                        Support: Extended'
                      properties:
                        backendRequest:
                          description: 'BackendRequest specifies a timeout for an
                            individual request from the gateway

                            to a backend. This covers the time from when the request
                            first starts being

                            sent from the gateway to when the full response has been
                            received from the backend.


                            Setting a timeout to the zero duration (e.g. "0s") SHOULD
                            disable the timeout

                            completely. Implementations that cannot completely disable
                            the timeout MUST

                            instead interpret the zero duration as the longest possible
                            value to which

                            the timeout can be set.


                            An entire client HTTP transaction with a gateway, covered
                            by the Request timeout,

                            may result in more than one call from the gateway to the
                            destination backend,

                            for example, if automatic retries are supported.


                            The value of BackendRequest must be a Gateway API Duration
                            string as defined by

                            GEP-2257.  When this field is unspecified, its behavior
                            is implementation-specific;

                            when specified, the value of BackendRequest must be no
                            more than the value of the

                            Request timeout (since the Request timeout encompasses
                            the BackendRequest timeout).


                            Support: Extended'
                          pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                          type: string
                        request:
                          description: 'Request specifies the maximum duration for
                            a gateway to respond to an HTTP request.

                            If the gateway has not been able to respond before this
                            deadline is met, the gateway

                            MUST return a timeout error.


                            For example, setting the `rules.timeouts.request` field
                            to the value `10s` in an

                            `HTTPRoute` will cause a timeout if a client request is
                            taking longer than 10 seconds

                            to complete.


                            Setting a timeout to the zero duration (e.g. "0s") SHOULD
                            disable the timeout

                            completely. Implementations that cannot completely disable
                            the timeout MUST

                            instead interpret the zero duration as the longest possible
                            value to which

                            the timeout can be set.


                            This timeout is intended to cover as close to the whole
                            request-response transaction

                            as possible although an implementation MAY choose to start
                            the timeout after the entire

                            request stream has been received instead of immediately
                            after the transaction is

                            initiated by the client.


                            The value of Request is a Gateway API Duration string
                            as defined by GEP-2257. When this

                            field is unspecified, request timeout behavior is implementation-specific.


                            Support: Extended'
                          pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                          type: string
                      type: object
                      x-kubernetes-validations:
                      - message: backendRequest timeout cannot be longer than request
                          timeout
                        rule: '!(has(self.request) && has(self.backendRequest) &&
                          duration(self.request) != duration(''0s'') && duration(self.backendRequest)
                          > duration(self.request))'
                  type: object
                  x-kubernetes-validations:
                  - message: RequestRedirect filter must not be used together with
                      backendRefs
                    rule: '(has(self.backendRefs) && size(self.backendRefs) > 0) ?
                      (!has(self.filters) || self.filters.all(f, !has(f.requestRedirect))):
                      true'
                  - message: When using RequestRedirect filter with path.replacePrefixMatch,
                      exactly one PathPrefix match must be specified
                    rule: '(has(self.filters) && self.filters.exists_one(f, has(f.requestRedirect)
                      && has(f.requestRedirect.path) && f.requestRedirect.path.type
                      == ''ReplacePrefixMatch'' && has(f.requestRedirect.path.replacePrefixMatch)))
                      ? ((size(self.matches) != 1 || !has(self.matches[0].path) ||
                      self.matches[0].path.type != ''PathPrefix'') ? false : true)
                      : true'
                  - message: When using URLRewrite filter with path.replacePrefixMatch,
                      exactly one PathPrefix match must be specified
                    rule: '(has(self.filters) && self.filters.exists_one(f, has(f.urlRewrite)
                      && has(f.urlRewrite.path) && f.urlRewrite.path.type == ''ReplacePrefixMatch''
                      && has(f.urlRewrite.path.replacePrefixMatch))) ? ((size(self.matches)
                      != 1 || !has(self.matches[0].path) || self.matches[0].path.type
                      != ''PathPrefix'') ? false : true) : true'
                  - message: Within backendRefs, when using RequestRedirect filter
                      with path.replacePrefixMatch, exactly one PathPrefix match must
                      be specified
                    rule: '(has(self.backendRefs) && self.backendRefs.exists_one(b,
                      (has(b.filters) && b.filters.exists_one(f, has(f.requestRedirect)
                      && has(f.requestRedirect.path) && f.requestRedirect.path.type
                      == ''ReplacePrefixMatch'' && has(f.requestRedirect.path.replacePrefixMatch)))
                      )) ? ((size(self.matches) != 1 || !has(self.matches[0].path)
                      || self.matches[0].path.type != ''PathPrefix'') ? false : true)
                      : true'
                  - message: Within backendRefs, When using URLRewrite filter with
                      path.replacePrefixMatch, exactly one PathPrefix match must be
                      specified
                    rule: '(has(self.backendRefs) && self.backendRefs.exists_one(b,
                      (has(b.filters) && b.filters.exists_one(f, has(f.urlRewrite)
                      && has(f.urlRewrite.path) && f.urlRewrite.path.type == ''ReplacePrefixMatch''
                      && has(f.urlRewrite.path.replacePrefixMatch))) )) ? ((size(self.matches)
                      != 1 || !has(self.matches[0].path) || self.matches[0].path.type
                      != ''PathPrefix'') ? false : true) : true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: While 16 rules and 64 matches per rule are allowed, the
                    total number of matches across all rules in a route must be less
                    than 128
                  rule: '(self.size() > 0 ? self[0].matches.size() : 0) + (self.size()
                    > 1 ? self[1].matches.size() : 0) + (self.size() > 2 ? self[2].matches.size()
                    : 0) + (self.size() > 3 ? self[3].matches.size() : 0) + (self.size()
                    > 4 ? self[4].matches.size() : 0) + (self.size() > 5 ? self[5].matches.size()
                    : 0) + (self.size() > 6 ? self[6].matches.size() : 0) + (self.size()
                    > 7 ? self[7].matches.size() : 0) + (self.size() > 8 ? self[8].matches.size()
                    : 0) + (self.size() > 9 ? self[9].matches.size() : 0) + (self.size()
                    > 10 ? self[10].matches.size() : 0) + (self.size() > 11 ? self[11].matches.size()
                    : 0) + (self.size() > 12 ? self[12].matches.size() : 0) + (self.size()
                    > 13 ? self[13].matches.size() : 0) + (self.size() > 14 ? self[14].matches.size()
                    : 0) + (self.size() > 15 ? self[15].matches.size() : 0) <= 128'
            type: object
          status:
            description: Status defines the current state of HTTPRoute.
            properties:
              parents:
                description: 'Parents is a list of parent resources (usually Gateways)
                  that are

                  associated with the route, and the status of the route with respect
                  to

                  each parent. When this route attaches to a parent, the controller
                  that

                  manages the parent must add an entry to this list when the controller

                  first sees the route and should update the entry as appropriate
                  when the

                  route or gateway is modified.


                  Note that parent references that cannot be resolved by an implementation

                  of this API will not be added to this list. Implementations of this
                  API

                  can only populate Route status for the Gateways/parent resources
                  they are

                  responsible for.


                  A maximum of 32 Gateways will be represented in this list. An empty
                  list

                  means the route has not been attached to any Gateway.'
                items:
                  description: 'RouteParentStatus describes the status of a route
                    with respect to an

                    associated Parent.'
                  properties:
                    conditions:
                      description: 'Conditions describes the status of the route with
                        respect to the Gateway.

                        Note that the route''s availability is also subject to the
                        Gateway''s own

                        status conditions and listener status.


                        If the Route''s ParentRef specifies an existing Gateway that
                        supports

                        Routes of this kind AND that Gateway''s controller has sufficient
                        access,

                        then that Gateway''s controller MUST set the "Accepted" condition
                        on the

                        Route, to indicate whether the route has been accepted or
                        rejected by the

                        Gateway, and why.


                        A Route MUST be considered "Accepted" if at least one of the
                        Route''s

                        rules is implemented by the Gateway.


                        There are a number of cases where the "Accepted" condition
                        may not be set

                        due to lack of controller visibility, that includes when:


                        * The Route refers to a nonexistent parent.

                        * The Route is of a type that the controller does not support.

                        * The Route is in a namespace the controller does not have
                        access to.'
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    parentRef:
                      description: 'ParentRef corresponds with a ParentRef in the
                        spec that this

                        RouteParentStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - conditions
                  - controllerName
                  - parentRef
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
            required:
            - parents
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.hostnames
      name: Hostnames
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: 'HTTPRoute provides a way to route HTTP requests. This includes
          the capability

          to match requests by hostname, path, header, or query param. Filters can
          be

          used to specify additional processing steps. Backends specify where matching

          requests should be routed.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of HTTPRoute.
            properties:
              hostnames:
                description: "Hostnames defines a set of hostnames that should match\
                  \ against the HTTP Host\nheader to select a HTTPRoute used to process\
                  \ the request. Implementations\nMUST ignore any port value specified\
                  \ in the HTTP Host header while\nperforming a match and (absent\
                  \ of any applicable header modification\nconfiguration) MUST forward\
                  \ this header unmodified to the backend.\n\nValid values for Hostnames\
                  \ are determined by RFC 1123 definition of a\nhostname with 2 notable\
                  \ exceptions:\n\n1. IPs are not allowed.\n2. A hostname may be prefixed\
                  \ with a wildcard label (`*.`). The wildcard\n   label must appear\
                  \ by itself as the first label.\n\nIf a hostname is specified by\
                  \ both the Listener and HTTPRoute, there\nmust be at least one intersecting\
                  \ hostname for the HTTPRoute to be\nattached to the Listener. For\
                  \ example:\n\n* A Listener with `test.example.com` as the hostname\
                  \ matches HTTPRoutes\n  that have either not specified any hostnames,\
                  \ or have specified at\n  least one of `test.example.com` or `*.example.com`.\n\
                  * A Listener with `*.example.com` as the hostname matches HTTPRoutes\n\
                  \  that have either not specified any hostnames or have specified\
                  \ at least\n  one hostname that matches the Listener hostname. For\
                  \ example,\n  `*.example.com`, `test.example.com`, and `foo.test.example.com`\
                  \ would\n  all match. On the other hand, `example.com` and `test.example.net`\
                  \ would\n  not match.\n\nHostnames that are prefixed with a wildcard\
                  \ label (`*.`) are interpreted\nas a suffix match. That means that\
                  \ a match for `*.example.com` would match\nboth `test.example.com`,\
                  \ and `foo.test.example.com`, but not `example.com`.\n\nIf both\
                  \ the Listener and HTTPRoute have specified hostnames, any\nHTTPRoute\
                  \ hostnames that do not match the Listener hostname MUST be\nignored.\
                  \ For example, if a Listener specified `*.example.com`, and the\n\
                  HTTPRoute specified `test.example.com` and `test.example.net`,\n\
                  `test.example.net` must not be considered for a match.\n\nIf both\
                  \ the Listener and HTTPRoute have specified hostnames, and none\n\
                  match with the criteria above, then the HTTPRoute is not accepted.\
                  \ The\nimplementation must raise an 'Accepted' Condition with a\
                  \ status of\n`False` in the corresponding RouteParentStatus.\n\n\
                  In the event that multiple HTTPRoutes specify intersecting hostnames\
                  \ (e.g.\noverlapping wildcard matching and exact matching hostnames),\
                  \ precedence must\nbe given to rules from the HTTPRoute with the\
                  \ largest number of:\n\n* Characters in a matching non-wildcard\
                  \ hostname.\n* Characters in a matching hostname.\n\nIf ties exist\
                  \ across multiple Routes, the matching precedence rules for\nHTTPRouteMatches\
                  \ takes over.\n\nSupport: Core"
                items:
                  description: "Hostname is the fully qualified domain name of a network\
                    \ host. This matches\nthe RFC 1123 definition of a hostname with\
                    \ 2 notable exceptions:\n\n 1. IPs are not allowed.\n 2. A hostname\
                    \ may be prefixed with a wildcard label (`*.`). The wildcard\n\
                    \    label must appear by itself as the first label.\n\nHostname\
                    \ can be \"precise\" which is a domain name without the terminating\n\
                    dot of a network host (e.g. \"foo.example.com\") or \"wildcard\"\
                    , which is a\ndomain name prefixed with a single wildcard label\
                    \ (e.g. `*.example.com`).\n\nNote that as per RFC1035 and RFC1123,\
                    \ a *label* must consist of lower case\nalphanumeric characters\
                    \ or '-', and must start and end with an alphanumeric\ncharacter.\
                    \ No other punctuation is allowed."
                  maxLength: 253
                  minLength: 1
                  pattern: ^(\*\.)?[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                  type: string
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
              parentRefs:
                description: "ParentRefs references the resources (usually Gateways)\
                  \ that a Route wants\nto be attached to. Note that the referenced\
                  \ parent resource needs to\nallow this for the attachment to be\
                  \ complete. For Gateways, that means\nthe Gateway needs to allow\
                  \ attachment from Routes of this kind and\nnamespace. For Services,\
                  \ that means the Service must either be in the same\nnamespace for\
                  \ a \"producer\" route, or the mesh implementation must support\n\
                  and allow \"consumer\" routes for the referenced Service. ReferenceGrant\
                  \ is\nnot applicable for governing ParentRefs to Services - it is\
                  \ not possible to\ncreate a \"producer\" route for a Service in\
                  \ a different namespace from the\nRoute.\n\nThere are two kinds\
                  \ of parent resources with \"Core\" support:\n\n* Gateway (Gateway\
                  \ conformance profile)\n* Service (Mesh conformance profile, ClusterIP\
                  \ Services only)\n\nThis API may be extended in the future to support\
                  \ additional kinds of parent\nresources.\n\nParentRefs must be _distinct_.\
                  \ This means either that:\n\n* They select different objects.  If\
                  \ this is the case, then parentRef\n  entries are distinct. In terms\
                  \ of fields, this means that the\n  multi-part key defined by `group`,\
                  \ `kind`, `namespace`, and `name` must\n  be unique across all parentRef\
                  \ entries in the Route.\n* They do not select different objects,\
                  \ but for each optional field used,\n  each ParentRef that selects\
                  \ the same object must set the same set of\n  optional fields to\
                  \ different values. If one ParentRef sets a\n  combination of optional\
                  \ fields, all must set the same combination.\n\nSome examples:\n\
                  \n* If one ParentRef sets `sectionName`, all ParentRefs referencing\
                  \ the\n  same object must also set `sectionName`.\n* If one ParentRef\
                  \ sets `port`, all ParentRefs referencing the same\n  object must\
                  \ also set `port`.\n* If one ParentRef sets `sectionName` and `port`,\
                  \ all ParentRefs\n  referencing the same object must also set `sectionName`\
                  \ and `port`.\n\nIt is possible to separately reference multiple\
                  \ distinct objects that may\nbe collapsed by an implementation.\
                  \ For example, some implementations may\nchoose to merge compatible\
                  \ Gateway Listeners together. If that is the\ncase, the list of\
                  \ routes attached to those resources should also be\nmerged.\n\n\
                  Note that for ParentRefs that cross namespace boundaries, there\
                  \ are specific\nrules. Cross-namespace references are only valid\
                  \ if they are explicitly\nallowed by something in the namespace\
                  \ they are referring to. For example,\nGateway has the AllowedRoutes\
                  \ field, and ReferenceGrant provides a\ngeneric way to enable other\
                  \ kinds of cross-namespace reference."
                items:
                  description: 'ParentReference identifies an API object (usually
                    a Gateway) that can be considered

                    a parent of this resource (usually a route). There are two kinds
                    of parent resources

                    with "Core" support:


                    * Gateway (Gateway conformance profile)

                    * Service (Mesh conformance profile, ClusterIP Services only)


                    This API may be extended in the future to support additional kinds
                    of parent

                    resources.


                    The API object must be valid in the cluster; the Group and Kind
                    must

                    be registered in the cluster for this reference to be valid.'
                  properties:
                    group:
                      default: gateway.networking.k8s.io
                      description: 'Group is the group of the referent.

                        When unspecified, "gateway.networking.k8s.io" is inferred.

                        To set the core API group (such as for a "Service" kind referent),

                        Group must be explicitly set to "" (empty string).


                        Support: Core'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      default: Gateway
                      description: 'Kind is kind of the referent.


                        There are two kinds of parent resources with "Core" support:


                        * Gateway (Gateway conformance profile)

                        * Service (Mesh conformance profile, ClusterIP Services only)


                        Support for other resources is Implementation-Specific.'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: 'Name is the name of the referent.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      type: string
                    namespace:
                      description: 'Namespace is the namespace of the referent. When
                        unspecified, this refers

                        to the local namespace of the Route.


                        Note that there are specific rules for ParentRefs which cross
                        namespace

                        boundaries. Cross-namespace references are only valid if they
                        are explicitly

                        allowed by something in the namespace they are referring to.
                        For example:

                        Gateway has the AllowedRoutes field, and ReferenceGrant provides
                        a

                        generic way to enable any other kind of cross-namespace reference.


                        Support: Core'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                    port:
                      description: 'Port is the network port this Route targets. It
                        can be interpreted

                        differently based on the type of parent resource.


                        When the parent resource is a Gateway, this targets all listeners

                        listening on the specified port that also support this kind
                        of Route(and

                        select this Route). It''s not recommended to set `Port` unless
                        the

                        networking behaviors specified in a Route must apply to a
                        specific port

                        as opposed to a listener(s) whose port(s) may be changed.
                        When both Port

                        and SectionName are specified, the name and port of the selected
                        listener

                        must match both specified values.


                        Implementations MAY choose to support other parent resources.

                        Implementations supporting other types of parent resources
                        MUST clearly

                        document how/if Port is interpreted.


                        For the purpose of status, an attachment is considered successful
                        as

                        long as the parent resource accepts it partially. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment

                        from the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route,

                        the Route MUST be considered detached from the Gateway.


                        Support: Extended'
                      format: int32
                      maximum: 65535
                      minimum: 1
                      type: integer
                    sectionName:
                      description: 'SectionName is the name of a section within the
                        target resource. In the

                        following resources, SectionName is interpreted as the following:


                        * Gateway: Listener name. When both Port (experimental) and
                        SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.

                        * Service: Port name. When both Port (experimental) and SectionName

                        are specified, the name and port of the selected listener
                        must match

                        both specified values.


                        Implementations MAY choose to support attaching Routes to
                        other resources.

                        If that is the case, they MUST clearly document how SectionName
                        is

                        interpreted.


                        When unspecified (empty string), this will reference the entire
                        resource.

                        For the purpose of status, an attachment is considered successful
                        if at

                        least one section in the parent resource accepts it. For example,
                        Gateway

                        listeners can restrict which Routes can attach to them by
                        Route kind,

                        namespace, or hostname. If 1 of 2 Gateway listeners accept
                        attachment from

                        the referencing Route, the Route MUST be considered successfully

                        attached. If no Gateway listeners accept attachment from this
                        Route, the

                        Route MUST be considered detached from the Gateway.


                        Support: Core'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: sectionName must be specified when parentRefs includes
                    2 or more references to the same parent
                  rule: 'self.all(p1, self.all(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '''') && (!has(p2.__namespace__) || p2.__namespace__
                    == '''')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) ? ((!has(p1.sectionName)
                    || p1.sectionName == '''') == (!has(p2.sectionName) || p2.sectionName
                    == '''')) : true))'
                - message: sectionName must be unique when parentRefs includes 2 or
                    more references to the same parent
                  rule: self.all(p1, self.exists_one(p2, p1.group == p2.group && p1.kind
                    == p2.kind && p1.name == p2.name && (((!has(p1.__namespace__)
                    || p1.__namespace__ == '') && (!has(p2.__namespace__) || p2.__namespace__
                    == '')) || (has(p1.__namespace__) && has(p2.__namespace__) &&
                    p1.__namespace__ == p2.__namespace__ )) && (((!has(p1.sectionName)
                    || p1.sectionName == '') && (!has(p2.sectionName) || p2.sectionName
                    == '')) || (has(p1.sectionName) && has(p2.sectionName) && p1.sectionName
                    == p2.sectionName))))
              rules:
                default:
                - matches:
                  - path:
                      type: PathPrefix
                      value: /
                description: Rules are a list of HTTP matchers, filters and actions.
                items:
                  description: 'HTTPRouteRule defines semantics for matching an HTTP
                    request based on

                    conditions (matches), processing it (filters), and forwarding
                    the request to

                    an API object (backendRefs).'
                  properties:
                    backendRefs:
                      description: 'BackendRefs defines the backend(s) where matching
                        requests should be

                        sent.


                        Failure behavior here depends on how many BackendRefs are
                        specified and

                        how many are invalid.


                        If *all* entries in BackendRefs are invalid, and there are
                        also no filters

                        specified in this route rule, *all* traffic which matches
                        this rule MUST

                        receive a 500 status code.


                        See the HTTPBackendRef definition for the rules about what
                        makes a single

                        HTTPBackendRef invalid.


                        When a HTTPBackendRef is invalid, 500 status codes MUST be
                        returned for

                        requests that would have otherwise been routed to an invalid
                        backend. If

                        multiple backends are specified, and some are invalid, the
                        proportion of

                        requests that would otherwise have been routed to an invalid
                        backend

                        MUST receive a 500 status code.


                        For example, if two backends are specified with equal weights,
                        and one is

                        invalid, 50 percent of traffic must receive a 500. Implementations
                        may

                        choose how that 50 percent is determined.


                        When a HTTPBackendRef refers to a Service that has no ready
                        endpoints,

                        implementations SHOULD return a 503 for requests to that backend
                        instead.

                        If an implementation chooses to do this, all of the above
                        rules for 500 responses

                        MUST also apply for responses that return a 503.


                        Support: Core for Kubernetes Service


                        Support: Extended for Kubernetes ServiceImport


                        Support: Implementation-specific for any other resource


                        Support for weight: Core'
                      items:
                        description: 'HTTPBackendRef defines how a HTTPRoute forwards
                          a HTTP request.


                          Note that when a namespace different than the local namespace
                          is specified, a

                          ReferenceGrant object is required in the referent namespace
                          to allow that

                          namespace''s owner to accept the reference. See the ReferenceGrant

                          documentation for details.'
                        properties:
                          filters:
                            description: 'Filters defined at this level should be
                              executed if and only if the

                              request is being forwarded to the backend defined here.


                              Support: Implementation-specific (For broader support
                              of filters, use the

                              Filters field in HTTPRouteRule.)'
                            items:
                              description: 'HTTPRouteFilter defines processing steps
                                that must be completed during the

                                request or response lifecycle. HTTPRouteFilters are
                                meant as an extension

                                point to express processing that may be done in Gateway
                                implementations. Some

                                examples include request or response modification,
                                implementing

                                authentication strategies, rate-limiting, and traffic
                                shaping. API

                                guarantee/conformance is defined based on the type
                                of the filter.'
                              properties:
                                extensionRef:
                                  description: 'ExtensionRef is an optional, implementation-specific
                                    extension to the

                                    "filter" behavior.  For example, resource "myroutefilter"
                                    in group

                                    "networking.example.net"). ExtensionRef MUST NOT
                                    be used for core and

                                    extended filters.


                                    This filter can be used multiple times within
                                    the same rule.


                                    Support: Implementation-specific'
                                  properties:
                                    group:
                                      description: 'Group is the group of the referent.
                                        For example, "gateway.networking.k8s.io".

                                        When unspecified or empty string, core API
                                        group is inferred.'
                                      maxLength: 253
                                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    kind:
                                      description: Kind is kind of the referent. For
                                        example "HTTPRoute" or "Service".
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                      type: string
                                    name:
                                      description: Name is the name of the referent.
                                      maxLength: 253
                                      minLength: 1
                                      type: string
                                  required:
                                  - group
                                  - kind
                                  - name
                                  type: object
                                requestHeaderModifier:
                                  description: 'RequestHeaderModifier defines a schema
                                    for a filter that modifies request

                                    headers.


                                    Support: Core'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                requestMirror:
                                  description: 'RequestMirror defines a schema for
                                    a filter that mirrors requests.

                                    Requests are sent to the specified destination,
                                    but responses from

                                    that destination are ignored.


                                    This filter can be used multiple times within
                                    the same rule. Note that

                                    not all implementations will be able to support
                                    mirroring to multiple

                                    backends.


                                    Support: Extended'
                                  properties:
                                    backendRef:
                                      description: 'BackendRef references a resource
                                        where mirrored requests are sent.


                                        Mirrored requests must be sent only to a single
                                        destination endpoint

                                        within this BackendRef, irrespective of how
                                        many endpoints are present

                                        within this BackendRef.


                                        If the referent cannot be found, this BackendRef
                                        is invalid and must be

                                        dropped from the Gateway. The controller must
                                        ensure the "ResolvedRefs"

                                        condition on the Route status is set to `status:
                                        False` and not configure

                                        this backend in the underlying implementation.


                                        If there is a cross-namespace reference to
                                        an *existing* object

                                        that is not allowed by a ReferenceGrant, the
                                        controller must ensure the

                                        "ResolvedRefs"  condition on the Route is
                                        set to `status: False`,

                                        with the "RefNotPermitted" reason and not
                                        configure this backend in the

                                        underlying implementation.


                                        In either error case, the Message of the `ResolvedRefs`
                                        Condition

                                        should be used to provide more detail about
                                        the problem.


                                        Support: Extended for Kubernetes Service


                                        Support: Implementation-specific for any other
                                        resource'
                                      properties:
                                        group:
                                          default: ''
                                          description: 'Group is the group of the
                                            referent. For example, "gateway.networking.k8s.io".

                                            When unspecified or empty string, core
                                            API group is inferred.'
                                          maxLength: 253
                                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                          type: string
                                        kind:
                                          default: Service
                                          description: 'Kind is the Kubernetes resource
                                            kind of the referent. For example

                                            "Service".


                                            Defaults to "Service" when not specified.


                                            ExternalName services can refer to CNAME
                                            DNS records that may live

                                            outside of the cluster and as such are
                                            difficult to reason about in

                                            terms of conformance. They also may not
                                            be safe to forward to (see

                                            CVE-2021-25740 for more information).
                                            Implementations SHOULD NOT

                                            support ExternalName Services.


                                            Support: Core (Services with a type other
                                            than ExternalName)


                                            Support: Implementation-specific (Services
                                            with type ExternalName)'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                          type: string
                                        name:
                                          description: Name is the name of the referent.
                                          maxLength: 253
                                          minLength: 1
                                          type: string
                                        namespace:
                                          description: 'Namespace is the namespace
                                            of the backend. When unspecified, the
                                            local

                                            namespace is inferred.


                                            Note that when a namespace different than
                                            the local namespace is specified,

                                            a ReferenceGrant object is required in
                                            the referent namespace to allow that

                                            namespace''s owner to accept the reference.
                                            See the ReferenceGrant

                                            documentation for details.


                                            Support: Core'
                                          maxLength: 63
                                          minLength: 1
                                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                          type: string
                                        port:
                                          description: 'Port specifies the destination
                                            port number to use for this resource.

                                            Port is required when the referent is
                                            a Kubernetes Service. In this

                                            case, the port number is the service port
                                            number, not the target port.

                                            For other resources, destination port
                                            might be derived from the referent

                                            resource or this field.'
                                          format: int32
                                          maximum: 65535
                                          minimum: 1
                                          type: integer
                                      required:
                                      - name
                                      type: object
                                      x-kubernetes-validations:
                                      - message: Must have port for Service reference
                                        rule: '(size(self.group) == 0 && self.kind
                                          == ''Service'') ? has(self.port) : true'
                                    fraction:
                                      description: 'Fraction represents the fraction
                                        of requests that should be

                                        mirrored to BackendRef.


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      properties:
                                        denominator:
                                          default: 100
                                          format: int32
                                          minimum: 1
                                          type: integer
                                        numerator:
                                          format: int32
                                          minimum: 0
                                          type: integer
                                      required:
                                      - numerator
                                      type: object
                                      x-kubernetes-validations:
                                      - message: numerator must be less than or equal
                                          to denominator
                                        rule: self.numerator <= self.denominator
                                    percent:
                                      description: 'Percent represents the percentage
                                        of requests that should be

                                        mirrored to BackendRef. Its minimum value
                                        is 0 (indicating 0% of

                                        requests) and its maximum value is 100 (indicating
                                        100% of requests).


                                        Only one of Fraction or Percent may be specified.
                                        If neither field

                                        is specified, 100% of requests will be mirrored.'
                                      format: int32
                                      maximum: 100
                                      minimum: 0
                                      type: integer
                                  required:
                                  - backendRef
                                  type: object
                                  x-kubernetes-validations:
                                  - message: Only one of percent or fraction may be
                                      specified in HTTPRequestMirrorFilter
                                    rule: '!(has(self.percent) && has(self.fraction))'
                                requestRedirect:
                                  description: 'RequestRedirect defines a schema for
                                    a filter that responds to the

                                    request with an HTTP redirection.


                                    Support: Core'
                                  properties:
                                    hostname:
                                      description: 'Hostname is the hostname to be
                                        used in the value of the `Location`

                                        header in the response.

                                        When empty, the hostname in the `Host` header
                                        of the request is used.


                                        Support: Core'
                                      maxLength: 253
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    path:
                                      description: 'Path defines parameters used to
                                        modify the path of the incoming request.

                                        The modified path is then used to construct
                                        the `Location` header. When

                                        empty, the request path is used as-is.


                                        Support: Extended'
                                      properties:
                                        replaceFullPath:
                                          description: 'ReplaceFullPath specifies
                                            the value with which to replace the full
                                            path

                                            of a request during a rewrite or redirect.'
                                          maxLength: 1024
                                          type: string
                                        replacePrefixMatch:
                                          description: 'ReplacePrefixMatch specifies
                                            the value with which to replace the prefix

                                            match of a request during a rewrite or
                                            redirect. For example, a request

                                            to "/foo/bar" with a prefix match of "/foo"
                                            and a ReplacePrefixMatch

                                            of "/xyz" would be modified to "/xyz/bar".


                                            Note that this matches the behavior of
                                            the PathPrefix match type. This

                                            matches full path elements. A path element
                                            refers to the list of labels

                                            in the path split by the `/` separator.
                                            When specified, a trailing `/` is

                                            ignored. For example, the paths `/abc`,
                                            `/abc/`, and `/abc/def` would all

                                            match the prefix `/abc`, but the path
                                            `/abcd` would not.


                                            ReplacePrefixMatch is only compatible
                                            with a `PathPrefix` HTTPRouteMatch.

                                            Using any other HTTPRouteMatch type on
                                            the same HTTPRouteRule will result in

                                            the implementation setting the Accepted
                                            Condition for the Route to `status: False`.


                                            Request Path | Prefix Match | Replace
                                            Prefix | Modified Path'
                                          maxLength: 1024
                                          type: string
                                        type:
                                          description: 'Type defines the type of path
                                            modifier. Additional types may be

                                            added in a future release of the API.


                                            Note that values may be added to this
                                            enum, implementations

                                            must ensure that unknown values will not
                                            cause a crash.


                                            Unknown values here must result in the
                                            implementation setting the

                                            Accepted Condition for the Route to `status:
                                            False`, with a

                                            Reason of `UnsupportedValue`.'
                                          enum:
                                          - ReplaceFullPath
                                          - ReplacePrefixMatch
                                          type: string
                                      required:
                                      - type
                                      type: object
                                      x-kubernetes-validations:
                                      - message: replaceFullPath must be specified
                                          when type is set to 'ReplaceFullPath'
                                        rule: 'self.type == ''ReplaceFullPath'' ?
                                          has(self.replaceFullPath) : true'
                                      - message: type must be 'ReplaceFullPath' when
                                          replaceFullPath is set
                                        rule: 'has(self.replaceFullPath) ? self.type
                                          == ''ReplaceFullPath'' : true'
                                      - message: replacePrefixMatch must be specified
                                          when type is set to 'ReplacePrefixMatch'
                                        rule: 'self.type == ''ReplacePrefixMatch''
                                          ? has(self.replacePrefixMatch) : true'
                                      - message: type must be 'ReplacePrefixMatch'
                                          when replacePrefixMatch is set
                                        rule: 'has(self.replacePrefixMatch) ? self.type
                                          == ''ReplacePrefixMatch'' : true'
                                    port:
                                      description: "Port is the port to be used in\
                                        \ the value of the `Location`\nheader in the\
                                        \ response.\n\nIf no port is specified, the\
                                        \ redirect port MUST be derived using the\n\
                                        following rules:\n\n* If redirect scheme is\
                                        \ not-empty, the redirect port MUST be the\
                                        \ well-known\n  port associated with the redirect\
                                        \ scheme. Specifically \"http\" to port 80\n\
                                        \  and \"https\" to port 443. If the redirect\
                                        \ scheme does not have a\n  well-known port,\
                                        \ the listener port of the Gateway SHOULD\
                                        \ be used.\n* If redirect scheme is empty,\
                                        \ the redirect port MUST be the Gateway\n\
                                        \  Listener port.\n\nImplementations SHOULD\
                                        \ NOT add the port number in the 'Location'\n\
                                        header in the following cases:\n\n* A Location\
                                        \ header that will use HTTP (whether that\
                                        \ is determined via\n  the Listener protocol\
                                        \ or the Scheme field) _and_ use port 80.\n\
                                        * A Location header that will use HTTPS (whether\
                                        \ that is determined via\n  the Listener protocol\
                                        \ or the Scheme field) _and_ use port 443.\n\
                                        \nSupport: Extended"
                                      format: int32
                                      maximum: 65535
                                      minimum: 1
                                      type: integer
                                    scheme:
                                      description: 'Scheme is the scheme to be used
                                        in the value of the `Location` header in

                                        the response. When empty, the scheme of the
                                        request is used.


                                        Scheme redirects can affect the port of the
                                        redirect, for more information,

                                        refer to the documentation for the port field
                                        of this filter.


                                        Note that values may be added to this enum,
                                        implementations

                                        must ensure that unknown values will not cause
                                        a crash.


                                        Unknown values here must result in the implementation
                                        setting the

                                        Accepted Condition for the Route to `status:
                                        False`, with a

                                        Reason of `UnsupportedValue`.


                                        Support: Extended'
                                      enum:
                                      - http
                                      - https
                                      type: string
                                    statusCode:
                                      default: 302
                                      description: 'StatusCode is the HTTP status
                                        code to be used in response.


                                        Note that values may be added to this enum,
                                        implementations

                                        must ensure that unknown values will not cause
                                        a crash.


                                        Unknown values here must result in the implementation
                                        setting the

                                        Accepted Condition for the Route to `status:
                                        False`, with a

                                        Reason of `UnsupportedValue`.


                                        Support: Core'
                                      enum:
                                      - 301
                                      - 302
                                      type: integer
                                  type: object
                                responseHeaderModifier:
                                  description: 'ResponseHeaderModifier defines a schema
                                    for a filter that modifies response

                                    headers.


                                    Support: Extended'
                                  properties:
                                    add:
                                      description: "Add adds the given header(s) (name,\
                                        \ value) to the request\nbefore the action.\
                                        \ It appends to any existing values associated\n\
                                        with the header name.\n\nInput:\n  GET /foo\
                                        \ HTTP/1.1\n  my-header: foo\n\nConfig:\n\
                                        \  add:\n  - name: \"my-header\"\n    value:\
                                        \ \"bar,baz\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo,bar,baz"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    remove:
                                      description: "Remove the given header(s) from\
                                        \ the HTTP request before the action. The\n\
                                        value of Remove is a list of HTTP header names.\
                                        \ Note that the header\nnames are case-insensitive\
                                        \ (see\nhttps://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                        \nInput:\n  GET /foo HTTP/1.1\n  my-header1:\
                                        \ foo\n  my-header2: bar\n  my-header3: baz\n\
                                        \nConfig:\n  remove: [\"my-header1\", \"my-header3\"\
                                        ]\n\nOutput:\n  GET /foo HTTP/1.1\n  my-header2:\
                                        \ bar"
                                      items:
                                        type: string
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-type: set
                                    set:
                                      description: "Set overwrites the request with\
                                        \ the given header (name, value)\nbefore the\
                                        \ action.\n\nInput:\n  GET /foo HTTP/1.1\n\
                                        \  my-header: foo\n\nConfig:\n  set:\n  -\
                                        \ name: \"my-header\"\n    value: \"bar\"\n\
                                        \nOutput:\n  GET /foo HTTP/1.1\n  my-header:\
                                        \ bar"
                                      items:
                                        description: HTTPHeader represents an HTTP
                                          Header name and value as defined by RFC
                                          7230.
                                        properties:
                                          name:
                                            description: 'Name is the name of the
                                              HTTP Header to be matched. Name matching
                                              MUST be

                                              case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                              If multiple entries specify equivalent
                                              header names, the first entry with

                                              an equivalent name MUST be considered
                                              for a match. Subsequent entries

                                              with an equivalent header name MUST
                                              be ignored. Due to the

                                              case-insensitivity of header names,
                                              "foo" and "Foo" are considered

                                              equivalent.'
                                            maxLength: 256
                                            minLength: 1
                                            pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                            type: string
                                          value:
                                            description: Value is the value of HTTP
                                              Header to be matched.
                                            maxLength: 4096
                                            minLength: 1
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      maxItems: 16
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                  type: object
                                type:
                                  description: "Type identifies the type of filter\
                                    \ to apply. As with other API fields,\ntypes are\
                                    \ classified into three conformance levels:\n\n\
                                    - Core: Filter types and their corresponding configuration\
                                    \ defined by\n  \"Support: Core\" in this package,\
                                    \ e.g. \"RequestHeaderModifier\". All\n  implementations\
                                    \ must support core filters.\n\n- Extended: Filter\
                                    \ types and their corresponding configuration\
                                    \ defined by\n  \"Support: Extended\" in this\
                                    \ package, e.g. \"RequestMirror\". Implementers\n\
                                    \  are encouraged to support extended filters.\n\
                                    \n- Implementation-specific: Filters that are\
                                    \ defined and supported by\n  specific vendors.\n\
                                    \  In the future, filters showing convergence\
                                    \ in behavior across multiple\n  implementations\
                                    \ will be considered for inclusion in extended\
                                    \ or core\n  conformance levels. Filter-specific\
                                    \ configuration for such filters\n  is specified\
                                    \ using the ExtensionRef field. `Type` should\
                                    \ be set to\n  \"ExtensionRef\" for custom filters.\n\
                                    \nImplementers are encouraged to define custom\
                                    \ implementation types to\nextend the core API\
                                    \ with implementation-specific behavior.\n\nIf\
                                    \ a reference to a custom filter type cannot be\
                                    \ resolved, the filter\nMUST NOT be skipped. Instead,\
                                    \ requests that would have been processed by\n\
                                    that filter MUST receive a HTTP error response.\n\
                                    \nNote that values may be added to this enum,\
                                    \ implementations\nmust ensure that unknown values\
                                    \ will not cause a crash.\n\nUnknown values here\
                                    \ must result in the implementation setting the\n\
                                    Accepted Condition for the Route to `status: False`,\
                                    \ with a\nReason of `UnsupportedValue`."
                                  enum:
                                  - RequestHeaderModifier
                                  - ResponseHeaderModifier
                                  - RequestMirror
                                  - RequestRedirect
                                  - URLRewrite
                                  - ExtensionRef
                                  type: string
                                urlRewrite:
                                  description: 'URLRewrite defines a schema for a
                                    filter that modifies a request during forwarding.


                                    Support: Extended'
                                  properties:
                                    hostname:
                                      description: 'Hostname is the value to be used
                                        to replace the Host header value during

                                        forwarding.


                                        Support: Extended'
                                      maxLength: 253
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                      type: string
                                    path:
                                      description: 'Path defines a path rewrite.


                                        Support: Extended'
                                      properties:
                                        replaceFullPath:
                                          description: 'ReplaceFullPath specifies
                                            the value with which to replace the full
                                            path

                                            of a request during a rewrite or redirect.'
                                          maxLength: 1024
                                          type: string
                                        replacePrefixMatch:
                                          description: 'ReplacePrefixMatch specifies
                                            the value with which to replace the prefix

                                            match of a request during a rewrite or
                                            redirect. For example, a request

                                            to "/foo/bar" with a prefix match of "/foo"
                                            and a ReplacePrefixMatch

                                            of "/xyz" would be modified to "/xyz/bar".


                                            Note that this matches the behavior of
                                            the PathPrefix match type. This

                                            matches full path elements. A path element
                                            refers to the list of labels

                                            in the path split by the `/` separator.
                                            When specified, a trailing `/` is

                                            ignored. For example, the paths `/abc`,
                                            `/abc/`, and `/abc/def` would all

                                            match the prefix `/abc`, but the path
                                            `/abcd` would not.


                                            ReplacePrefixMatch is only compatible
                                            with a `PathPrefix` HTTPRouteMatch.

                                            Using any other HTTPRouteMatch type on
                                            the same HTTPRouteRule will result in

                                            the implementation setting the Accepted
                                            Condition for the Route to `status: False`.


                                            Request Path | Prefix Match | Replace
                                            Prefix | Modified Path'
                                          maxLength: 1024
                                          type: string
                                        type:
                                          description: 'Type defines the type of path
                                            modifier. Additional types may be

                                            added in a future release of the API.


                                            Note that values may be added to this
                                            enum, implementations

                                            must ensure that unknown values will not
                                            cause a crash.


                                            Unknown values here must result in the
                                            implementation setting the

                                            Accepted Condition for the Route to `status:
                                            False`, with a

                                            Reason of `UnsupportedValue`.'
                                          enum:
                                          - ReplaceFullPath
                                          - ReplacePrefixMatch
                                          type: string
                                      required:
                                      - type
                                      type: object
                                      x-kubernetes-validations:
                                      - message: replaceFullPath must be specified
                                          when type is set to 'ReplaceFullPath'
                                        rule: 'self.type == ''ReplaceFullPath'' ?
                                          has(self.replaceFullPath) : true'
                                      - message: type must be 'ReplaceFullPath' when
                                          replaceFullPath is set
                                        rule: 'has(self.replaceFullPath) ? self.type
                                          == ''ReplaceFullPath'' : true'
                                      - message: replacePrefixMatch must be specified
                                          when type is set to 'ReplacePrefixMatch'
                                        rule: 'self.type == ''ReplacePrefixMatch''
                                          ? has(self.replacePrefixMatch) : true'
                                      - message: type must be 'ReplacePrefixMatch'
                                          when replacePrefixMatch is set
                                        rule: 'has(self.replacePrefixMatch) ? self.type
                                          == ''ReplacePrefixMatch'' : true'
                                  type: object
                              required:
                              - type
                              type: object
                              x-kubernetes-validations:
                              - message: filter.requestHeaderModifier must be nil
                                  if the filter.type is not RequestHeaderModifier
                                rule: '!(has(self.requestHeaderModifier) && self.type
                                  != ''RequestHeaderModifier'')'
                              - message: filter.requestHeaderModifier must be specified
                                  for RequestHeaderModifier filter.type
                                rule: '!(!has(self.requestHeaderModifier) && self.type
                                  == ''RequestHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be nil
                                  if the filter.type is not ResponseHeaderModifier
                                rule: '!(has(self.responseHeaderModifier) && self.type
                                  != ''ResponseHeaderModifier'')'
                              - message: filter.responseHeaderModifier must be specified
                                  for ResponseHeaderModifier filter.type
                                rule: '!(!has(self.responseHeaderModifier) && self.type
                                  == ''ResponseHeaderModifier'')'
                              - message: filter.requestMirror must be nil if the filter.type
                                  is not RequestMirror
                                rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                              - message: filter.requestMirror must be specified for
                                  RequestMirror filter.type
                                rule: '!(!has(self.requestMirror) && self.type ==
                                  ''RequestMirror'')'
                              - message: filter.requestRedirect must be nil if the
                                  filter.type is not RequestRedirect
                                rule: '!(has(self.requestRedirect) && self.type !=
                                  ''RequestRedirect'')'
                              - message: filter.requestRedirect must be specified
                                  for RequestRedirect filter.type
                                rule: '!(!has(self.requestRedirect) && self.type ==
                                  ''RequestRedirect'')'
                              - message: filter.urlRewrite must be nil if the filter.type
                                  is not URLRewrite
                                rule: '!(has(self.urlRewrite) && self.type != ''URLRewrite'')'
                              - message: filter.urlRewrite must be specified for URLRewrite
                                  filter.type
                                rule: '!(!has(self.urlRewrite) && self.type == ''URLRewrite'')'
                              - message: filter.extensionRef must be nil if the filter.type
                                  is not ExtensionRef
                                rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                              - message: filter.extensionRef must be specified for
                                  ExtensionRef filter.type
                                rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                            maxItems: 16
                            type: array
                            x-kubernetes-list-type: atomic
                            x-kubernetes-validations:
                            - message: May specify either httpRouteFilterRequestRedirect
                                or httpRouteFilterRequestRewrite, but not both
                              rule: '!(self.exists(f, f.type == ''RequestRedirect'')
                                && self.exists(f, f.type == ''URLRewrite''))'
                            - message: RequestHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                                <= 1
                            - message: ResponseHeaderModifier filter cannot be repeated
                              rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                                <= 1
                            - message: RequestRedirect filter cannot be repeated
                              rule: self.filter(f, f.type == 'RequestRedirect').size()
                                <= 1
                            - message: URLRewrite filter cannot be repeated
                              rule: self.filter(f, f.type == 'URLRewrite').size()
                                <= 1
                          group:
                            default: ''
                            description: 'Group is the group of the referent. For
                              example, "gateway.networking.k8s.io".

                              When unspecified or empty string, core API group is
                              inferred.'
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            description: 'Kind is the Kubernetes resource kind of
                              the referent. For example

                              "Service".


                              Defaults to "Service" when not specified.


                              ExternalName services can refer to CNAME DNS records
                              that may live

                              outside of the cluster and as such are difficult to
                              reason about in

                              terms of conformance. They also may not be safe to forward
                              to (see

                              CVE-2021-25740 for more information). Implementations
                              SHOULD NOT

                              support ExternalName Services.


                              Support: Core (Services with a type other than ExternalName)


                              Support: Implementation-specific (Services with type
                              ExternalName)'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            description: Name is the name of the referent.
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            description: 'Namespace is the namespace of the backend.
                              When unspecified, the local

                              namespace is inferred.


                              Note that when a namespace different than the local
                              namespace is specified,

                              a ReferenceGrant object is required in the referent
                              namespace to allow that

                              namespace''s owner to accept the reference. See the
                              ReferenceGrant

                              documentation for details.


                              Support: Core'
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            description: 'Port specifies the destination port number
                              to use for this resource.

                              Port is required when the referent is a Kubernetes Service.
                              In this

                              case, the port number is the service port number, not
                              the target port.

                              For other resources, destination port might be derived
                              from the referent

                              resource or this field.'
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            description: 'Weight specifies the proportion of requests
                              forwarded to the referenced

                              backend. This is computed as weight/(sum of all weights
                              in this

                              BackendRefs list). For non-zero values, there may be
                              some epsilon from

                              the exact proportion defined here depending on the precision
                              an

                              implementation supports. Weight is not a percentage
                              and the sum of

                              weights does not need to equal 100.


                              If only one backend is specified and it has a weight
                              greater than 0, 100%

                              of the traffic is forwarded to that backend. If weight
                              is set to 0, no

                              traffic should be forwarded for this entry. If unspecified,
                              weight

                              defaults to 1.


                              Support for this field varies based on the context where
                              used.'
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                    filters:
                      description: "Filters define the filters that are applied to\
                        \ requests that match\nthis rule.\n\nWherever possible, implementations\
                        \ SHOULD implement filters in the order\nthey are specified.\n\
                        \nImplementations MAY choose to implement this ordering strictly,\
                        \ rejecting\nany combination or order of filters that cannot\
                        \ be supported. If implementations\nchoose a strict interpretation\
                        \ of filter ordering, they MUST clearly document\nthat behavior.\n\
                        \nTo reject an invalid combination or order of filters, implementations\
                        \ SHOULD\nconsider the Route Rules with this configuration\
                        \ invalid. If all Route Rules\nin a Route are invalid, the\
                        \ entire Route would be considered invalid. If only\na portion\
                        \ of Route Rules are invalid, implementations MUST set the\n\
                        \"PartiallyInvalid\" condition for the Route.\n\nConformance-levels\
                        \ at this level are defined based on the type of filter:\n\
                        \n- ALL core filters MUST be supported by all implementations.\n\
                        - Implementers are encouraged to support extended filters.\n\
                        - Implementation-specific custom filters have no API guarantees\
                        \ across\n  implementations.\n\nSpecifying the same filter\
                        \ multiple times is not supported unless explicitly\nindicated\
                        \ in the filter.\n\nAll filters are expected to be compatible\
                        \ with each other except for the\nURLRewrite and RequestRedirect\
                        \ filters, which may not be combined. If an\nimplementation\
                        \ cannot support other combinations of filters, they must\
                        \ clearly\ndocument that limitation. In cases where incompatible\
                        \ or unsupported\nfilters are specified and cause the `Accepted`\
                        \ condition to be set to status\n`False`, implementations\
                        \ may use the `IncompatibleFilters` reason to specify\nthis\
                        \ configuration error.\n\nSupport: Core"
                      items:
                        description: 'HTTPRouteFilter defines processing steps that
                          must be completed during the

                          request or response lifecycle. HTTPRouteFilters are meant
                          as an extension

                          point to express processing that may be done in Gateway
                          implementations. Some

                          examples include request or response modification, implementing

                          authentication strategies, rate-limiting, and traffic shaping.
                          API

                          guarantee/conformance is defined based on the type of the
                          filter.'
                        properties:
                          extensionRef:
                            description: 'ExtensionRef is an optional, implementation-specific
                              extension to the

                              "filter" behavior.  For example, resource "myroutefilter"
                              in group

                              "networking.example.net"). ExtensionRef MUST NOT be
                              used for core and

                              extended filters.


                              This filter can be used multiple times within the same
                              rule.


                              Support: Implementation-specific'
                            properties:
                              group:
                                description: 'Group is the group of the referent.
                                  For example, "gateway.networking.k8s.io".

                                  When unspecified or empty string, core API group
                                  is inferred.'
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                description: Kind is kind of the referent. For example
                                  "HTTPRoute" or "Service".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                            required:
                            - group
                            - kind
                            - name
                            type: object
                          requestHeaderModifier:
                            description: 'RequestHeaderModifier defines a schema for
                              a filter that modifies request

                              headers.


                              Support: Core'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          requestMirror:
                            description: 'RequestMirror defines a schema for a filter
                              that mirrors requests.

                              Requests are sent to the specified destination, but
                              responses from

                              that destination are ignored.


                              This filter can be used multiple times within the same
                              rule. Note that

                              not all implementations will be able to support mirroring
                              to multiple

                              backends.


                              Support: Extended'
                            properties:
                              backendRef:
                                description: 'BackendRef references a resource where
                                  mirrored requests are sent.


                                  Mirrored requests must be sent only to a single
                                  destination endpoint

                                  within this BackendRef, irrespective of how many
                                  endpoints are present

                                  within this BackendRef.


                                  If the referent cannot be found, this BackendRef
                                  is invalid and must be

                                  dropped from the Gateway. The controller must ensure
                                  the "ResolvedRefs"

                                  condition on the Route status is set to `status:
                                  False` and not configure

                                  this backend in the underlying implementation.


                                  If there is a cross-namespace reference to an *existing*
                                  object

                                  that is not allowed by a ReferenceGrant, the controller
                                  must ensure the

                                  "ResolvedRefs"  condition on the Route is set to
                                  `status: False`,

                                  with the "RefNotPermitted" reason and not configure
                                  this backend in the

                                  underlying implementation.


                                  In either error case, the Message of the `ResolvedRefs`
                                  Condition

                                  should be used to provide more detail about the
                                  problem.


                                  Support: Extended for Kubernetes Service


                                  Support: Implementation-specific for any other resource'
                                properties:
                                  group:
                                    default: ''
                                    description: 'Group is the group of the referent.
                                      For example, "gateway.networking.k8s.io".

                                      When unspecified or empty string, core API group
                                      is inferred.'
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    description: 'Kind is the Kubernetes resource
                                      kind of the referent. For example

                                      "Service".


                                      Defaults to "Service" when not specified.


                                      ExternalName services can refer to CNAME DNS
                                      records that may live

                                      outside of the cluster and as such are difficult
                                      to reason about in

                                      terms of conformance. They also may not be safe
                                      to forward to (see

                                      CVE-2021-25740 for more information). Implementations
                                      SHOULD NOT

                                      support ExternalName Services.


                                      Support: Core (Services with a type other than
                                      ExternalName)


                                      Support: Implementation-specific (Services with
                                      type ExternalName)'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    description: Name is the name of the referent.
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    description: 'Namespace is the namespace of the
                                      backend. When unspecified, the local

                                      namespace is inferred.


                                      Note that when a namespace different than the
                                      local namespace is specified,

                                      a ReferenceGrant object is required in the referent
                                      namespace to allow that

                                      namespace''s owner to accept the reference.
                                      See the ReferenceGrant

                                      documentation for details.


                                      Support: Core'
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    description: 'Port specifies the destination port
                                      number to use for this resource.

                                      Port is required when the referent is a Kubernetes
                                      Service. In this

                                      case, the port number is the service port number,
                                      not the target port.

                                      For other resources, destination port might
                                      be derived from the referent

                                      resource or this field.'
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              fraction:
                                description: 'Fraction represents the fraction of
                                  requests that should be

                                  mirrored to BackendRef.


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                properties:
                                  denominator:
                                    default: 100
                                    format: int32
                                    minimum: 1
                                    type: integer
                                  numerator:
                                    format: int32
                                    minimum: 0
                                    type: integer
                                required:
                                - numerator
                                type: object
                                x-kubernetes-validations:
                                - message: numerator must be less than or equal to
                                    denominator
                                  rule: self.numerator <= self.denominator
                              percent:
                                description: 'Percent represents the percentage of
                                  requests that should be

                                  mirrored to BackendRef. Its minimum value is 0 (indicating
                                  0% of

                                  requests) and its maximum value is 100 (indicating
                                  100% of requests).


                                  Only one of Fraction or Percent may be specified.
                                  If neither field

                                  is specified, 100% of requests will be mirrored.'
                                format: int32
                                maximum: 100
                                minimum: 0
                                type: integer
                            required:
                            - backendRef
                            type: object
                            x-kubernetes-validations:
                            - message: Only one of percent or fraction may be specified
                                in HTTPRequestMirrorFilter
                              rule: '!(has(self.percent) && has(self.fraction))'
                          requestRedirect:
                            description: 'RequestRedirect defines a schema for a filter
                              that responds to the

                              request with an HTTP redirection.


                              Support: Core'
                            properties:
                              hostname:
                                description: 'Hostname is the hostname to be used
                                  in the value of the `Location`

                                  header in the response.

                                  When empty, the hostname in the `Host` header of
                                  the request is used.


                                  Support: Core'
                                maxLength: 253
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              path:
                                description: 'Path defines parameters used to modify
                                  the path of the incoming request.

                                  The modified path is then used to construct the
                                  `Location` header. When

                                  empty, the request path is used as-is.


                                  Support: Extended'
                                properties:
                                  replaceFullPath:
                                    description: 'ReplaceFullPath specifies the value
                                      with which to replace the full path

                                      of a request during a rewrite or redirect.'
                                    maxLength: 1024
                                    type: string
                                  replacePrefixMatch:
                                    description: 'ReplacePrefixMatch specifies the
                                      value with which to replace the prefix

                                      match of a request during a rewrite or redirect.
                                      For example, a request

                                      to "/foo/bar" with a prefix match of "/foo"
                                      and a ReplacePrefixMatch

                                      of "/xyz" would be modified to "/xyz/bar".


                                      Note that this matches the behavior of the PathPrefix
                                      match type. This

                                      matches full path elements. A path element refers
                                      to the list of labels

                                      in the path split by the `/` separator. When
                                      specified, a trailing `/` is

                                      ignored. For example, the paths `/abc`, `/abc/`,
                                      and `/abc/def` would all

                                      match the prefix `/abc`, but the path `/abcd`
                                      would not.


                                      ReplacePrefixMatch is only compatible with a
                                      `PathPrefix` HTTPRouteMatch.

                                      Using any other HTTPRouteMatch type on the same
                                      HTTPRouteRule will result in

                                      the implementation setting the Accepted Condition
                                      for the Route to `status: False`.


                                      Request Path | Prefix Match | Replace Prefix
                                      | Modified Path'
                                    maxLength: 1024
                                    type: string
                                  type:
                                    description: 'Type defines the type of path modifier.
                                      Additional types may be

                                      added in a future release of the API.


                                      Note that values may be added to this enum,
                                      implementations

                                      must ensure that unknown values will not cause
                                      a crash.


                                      Unknown values here must result in the implementation
                                      setting the

                                      Accepted Condition for the Route to `status:
                                      False`, with a

                                      Reason of `UnsupportedValue`.'
                                    enum:
                                    - ReplaceFullPath
                                    - ReplacePrefixMatch
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: replaceFullPath must be specified when
                                    type is set to 'ReplaceFullPath'
                                  rule: 'self.type == ''ReplaceFullPath'' ? has(self.replaceFullPath)
                                    : true'
                                - message: type must be 'ReplaceFullPath' when replaceFullPath
                                    is set
                                  rule: 'has(self.replaceFullPath) ? self.type ==
                                    ''ReplaceFullPath'' : true'
                                - message: replacePrefixMatch must be specified when
                                    type is set to 'ReplacePrefixMatch'
                                  rule: 'self.type == ''ReplacePrefixMatch'' ? has(self.replacePrefixMatch)
                                    : true'
                                - message: type must be 'ReplacePrefixMatch' when
                                    replacePrefixMatch is set
                                  rule: 'has(self.replacePrefixMatch) ? self.type
                                    == ''ReplacePrefixMatch'' : true'
                              port:
                                description: "Port is the port to be used in the value\
                                  \ of the `Location`\nheader in the response.\n\n\
                                  If no port is specified, the redirect port MUST\
                                  \ be derived using the\nfollowing rules:\n\n* If\
                                  \ redirect scheme is not-empty, the redirect port\
                                  \ MUST be the well-known\n  port associated with\
                                  \ the redirect scheme. Specifically \"http\" to\
                                  \ port 80\n  and \"https\" to port 443. If the redirect\
                                  \ scheme does not have a\n  well-known port, the\
                                  \ listener port of the Gateway SHOULD be used.\n\
                                  * If redirect scheme is empty, the redirect port\
                                  \ MUST be the Gateway\n  Listener port.\n\nImplementations\
                                  \ SHOULD NOT add the port number in the 'Location'\n\
                                  header in the following cases:\n\n* A Location header\
                                  \ that will use HTTP (whether that is determined\
                                  \ via\n  the Listener protocol or the Scheme field)\
                                  \ _and_ use port 80.\n* A Location header that will\
                                  \ use HTTPS (whether that is determined via\n  the\
                                  \ Listener protocol or the Scheme field) _and_ use\
                                  \ port 443.\n\nSupport: Extended"
                                format: int32
                                maximum: 65535
                                minimum: 1
                                type: integer
                              scheme:
                                description: 'Scheme is the scheme to be used in the
                                  value of the `Location` header in

                                  the response. When empty, the scheme of the request
                                  is used.


                                  Scheme redirects can affect the port of the redirect,
                                  for more information,

                                  refer to the documentation for the port field of
                                  this filter.


                                  Note that values may be added to this enum, implementations

                                  must ensure that unknown values will not cause a
                                  crash.


                                  Unknown values here must result in the implementation
                                  setting the

                                  Accepted Condition for the Route to `status: False`,
                                  with a

                                  Reason of `UnsupportedValue`.


                                  Support: Extended'
                                enum:
                                - http
                                - https
                                type: string
                              statusCode:
                                default: 302
                                description: 'StatusCode is the HTTP status code to
                                  be used in response.


                                  Note that values may be added to this enum, implementations

                                  must ensure that unknown values will not cause a
                                  crash.


                                  Unknown values here must result in the implementation
                                  setting the

                                  Accepted Condition for the Route to `status: False`,
                                  with a

                                  Reason of `UnsupportedValue`.


                                  Support: Core'
                                enum:
                                - 301
                                - 302
                                type: integer
                            type: object
                          responseHeaderModifier:
                            description: 'ResponseHeaderModifier defines a schema
                              for a filter that modifies response

                              headers.


                              Support: Extended'
                            properties:
                              add:
                                description: "Add adds the given header(s) (name,\
                                  \ value) to the request\nbefore the action. It appends\
                                  \ to any existing values associated\nwith the header\
                                  \ name.\n\nInput:\n  GET /foo HTTP/1.1\n  my-header:\
                                  \ foo\n\nConfig:\n  add:\n  - name: \"my-header\"\
                                  \n    value: \"bar,baz\"\n\nOutput:\n  GET /foo\
                                  \ HTTP/1.1\n  my-header: foo,bar,baz"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              remove:
                                description: "Remove the given header(s) from the\
                                  \ HTTP request before the action. The\nvalue of\
                                  \ Remove is a list of HTTP header names. Note that\
                                  \ the header\nnames are case-insensitive (see\n\
                                  https://datatracker.ietf.org/doc/html/rfc2616#section-4.2).\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header1: foo\n\
                                  \  my-header2: bar\n  my-header3: baz\n\nConfig:\n\
                                  \  remove: [\"my-header1\", \"my-header3\"]\n\n\
                                  Output:\n  GET /foo HTTP/1.1\n  my-header2: bar"
                                items:
                                  type: string
                                maxItems: 16
                                type: array
                                x-kubernetes-list-type: set
                              set:
                                description: "Set overwrites the request with the\
                                  \ given header (name, value)\nbefore the action.\n\
                                  \nInput:\n  GET /foo HTTP/1.1\n  my-header: foo\n\
                                  \nConfig:\n  set:\n  - name: \"my-header\"\n   \
                                  \ value: \"bar\"\n\nOutput:\n  GET /foo HTTP/1.1\n\
                                  \  my-header: bar"
                                items:
                                  description: HTTPHeader represents an HTTP Header
                                    name and value as defined by RFC 7230.
                                  properties:
                                    name:
                                      description: 'Name is the name of the HTTP Header
                                        to be matched. Name matching MUST be

                                        case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                        If multiple entries specify equivalent header
                                        names, the first entry with

                                        an equivalent name MUST be considered for
                                        a match. Subsequent entries

                                        with an equivalent header name MUST be ignored.
                                        Due to the

                                        case-insensitivity of header names, "foo"
                                        and "Foo" are considered

                                        equivalent.'
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    value:
                                      description: Value is the value of HTTP Header
                                        to be matched.
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                maxItems: 16
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                            type: object
                          type:
                            description: "Type identifies the type of filter to apply.\
                              \ As with other API fields,\ntypes are classified into\
                              \ three conformance levels:\n\n- Core: Filter types\
                              \ and their corresponding configuration defined by\n\
                              \  \"Support: Core\" in this package, e.g. \"RequestHeaderModifier\"\
                              . All\n  implementations must support core filters.\n\
                              \n- Extended: Filter types and their corresponding configuration\
                              \ defined by\n  \"Support: Extended\" in this package,\
                              \ e.g. \"RequestMirror\". Implementers\n  are encouraged\
                              \ to support extended filters.\n\n- Implementation-specific:\
                              \ Filters that are defined and supported by\n  specific\
                              \ vendors.\n  In the future, filters showing convergence\
                              \ in behavior across multiple\n  implementations will\
                              \ be considered for inclusion in extended or core\n\
                              \  conformance levels. Filter-specific configuration\
                              \ for such filters\n  is specified using the ExtensionRef\
                              \ field. `Type` should be set to\n  \"ExtensionRef\"\
                              \ for custom filters.\n\nImplementers are encouraged\
                              \ to define custom implementation types to\nextend the\
                              \ core API with implementation-specific behavior.\n\n\
                              If a reference to a custom filter type cannot be resolved,\
                              \ the filter\nMUST NOT be skipped. Instead, requests\
                              \ that would have been processed by\nthat filter MUST\
                              \ receive a HTTP error response.\n\nNote that values\
                              \ may be added to this enum, implementations\nmust ensure\
                              \ that unknown values will not cause a crash.\n\nUnknown\
                              \ values here must result in the implementation setting\
                              \ the\nAccepted Condition for the Route to `status:\
                              \ False`, with a\nReason of `UnsupportedValue`."
                            enum:
                            - RequestHeaderModifier
                            - ResponseHeaderModifier
                            - RequestMirror
                            - RequestRedirect
                            - URLRewrite
                            - ExtensionRef
                            type: string
                          urlRewrite:
                            description: 'URLRewrite defines a schema for a filter
                              that modifies a request during forwarding.


                              Support: Extended'
                            properties:
                              hostname:
                                description: 'Hostname is the value to be used to
                                  replace the Host header value during

                                  forwarding.


                                  Support: Extended'
                                maxLength: 253
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              path:
                                description: 'Path defines a path rewrite.


                                  Support: Extended'
                                properties:
                                  replaceFullPath:
                                    description: 'ReplaceFullPath specifies the value
                                      with which to replace the full path

                                      of a request during a rewrite or redirect.'
                                    maxLength: 1024
                                    type: string
                                  replacePrefixMatch:
                                    description: 'ReplacePrefixMatch specifies the
                                      value with which to replace the prefix

                                      match of a request during a rewrite or redirect.
                                      For example, a request

                                      to "/foo/bar" with a prefix match of "/foo"
                                      and a ReplacePrefixMatch

                                      of "/xyz" would be modified to "/xyz/bar".


                                      Note that this matches the behavior of the PathPrefix
                                      match type. This

                                      matches full path elements. A path element refers
                                      to the list of labels

                                      in the path split by the `/` separator. When
                                      specified, a trailing `/` is

                                      ignored. For example, the paths `/abc`, `/abc/`,
                                      and `/abc/def` would all

                                      match the prefix `/abc`, but the path `/abcd`
                                      would not.


                                      ReplacePrefixMatch is only compatible with a
                                      `PathPrefix` HTTPRouteMatch.

                                      Using any other HTTPRouteMatch type on the same
                                      HTTPRouteRule will result in

                                      the implementation setting the Accepted Condition
                                      for the Route to `status: False`.


                                      Request Path | Prefix Match | Replace Prefix
                                      | Modified Path'
                                    maxLength: 1024
                                    type: string
                                  type:
                                    description: 'Type defines the type of path modifier.
                                      Additional types may be

                                      added in a future release of the API.


                                      Note that values may be added to this enum,
                                      implementations

                                      must ensure that unknown values will not cause
                                      a crash.


                                      Unknown values here must result in the implementation
                                      setting the

                                      Accepted Condition for the Route to `status:
                                      False`, with a

                                      Reason of `UnsupportedValue`.'
                                    enum:
                                    - ReplaceFullPath
                                    - ReplacePrefixMatch
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: replaceFullPath must be specified when
                                    type is set to 'ReplaceFullPath'
                                  rule: 'self.type == ''ReplaceFullPath'' ? has(self.replaceFullPath)
                                    : true'
                                - message: type must be 'ReplaceFullPath' when replaceFullPath
                                    is set
                                  rule: 'has(self.replaceFullPath) ? self.type ==
                                    ''ReplaceFullPath'' : true'
                                - message: replacePrefixMatch must be specified when
                                    type is set to 'ReplacePrefixMatch'
                                  rule: 'self.type == ''ReplacePrefixMatch'' ? has(self.replacePrefixMatch)
                                    : true'
                                - message: type must be 'ReplacePrefixMatch' when
                                    replacePrefixMatch is set
                                  rule: 'has(self.replacePrefixMatch) ? self.type
                                    == ''ReplacePrefixMatch'' : true'
                            type: object
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: filter.requestHeaderModifier must be nil if the
                            filter.type is not RequestHeaderModifier
                          rule: '!(has(self.requestHeaderModifier) && self.type !=
                            ''RequestHeaderModifier'')'
                        - message: filter.requestHeaderModifier must be specified
                            for RequestHeaderModifier filter.type
                          rule: '!(!has(self.requestHeaderModifier) && self.type ==
                            ''RequestHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be nil if the
                            filter.type is not ResponseHeaderModifier
                          rule: '!(has(self.responseHeaderModifier) && self.type !=
                            ''ResponseHeaderModifier'')'
                        - message: filter.responseHeaderModifier must be specified
                            for ResponseHeaderModifier filter.type
                          rule: '!(!has(self.responseHeaderModifier) && self.type
                            == ''ResponseHeaderModifier'')'
                        - message: filter.requestMirror must be nil if the filter.type
                            is not RequestMirror
                          rule: '!(has(self.requestMirror) && self.type != ''RequestMirror'')'
                        - message: filter.requestMirror must be specified for RequestMirror
                            filter.type
                          rule: '!(!has(self.requestMirror) && self.type == ''RequestMirror'')'
                        - message: filter.requestRedirect must be nil if the filter.type
                            is not RequestRedirect
                          rule: '!(has(self.requestRedirect) && self.type != ''RequestRedirect'')'
                        - message: filter.requestRedirect must be specified for RequestRedirect
                            filter.type
                          rule: '!(!has(self.requestRedirect) && self.type == ''RequestRedirect'')'
                        - message: filter.urlRewrite must be nil if the filter.type
                            is not URLRewrite
                          rule: '!(has(self.urlRewrite) && self.type != ''URLRewrite'')'
                        - message: filter.urlRewrite must be specified for URLRewrite
                            filter.type
                          rule: '!(!has(self.urlRewrite) && self.type == ''URLRewrite'')'
                        - message: filter.extensionRef must be nil if the filter.type
                            is not ExtensionRef
                          rule: '!(has(self.extensionRef) && self.type != ''ExtensionRef'')'
                        - message: filter.extensionRef must be specified for ExtensionRef
                            filter.type
                          rule: '!(!has(self.extensionRef) && self.type == ''ExtensionRef'')'
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: atomic
                      x-kubernetes-validations:
                      - message: May specify either httpRouteFilterRequestRedirect
                          or httpRouteFilterRequestRewrite, but not both
                        rule: '!(self.exists(f, f.type == ''RequestRedirect'') &&
                          self.exists(f, f.type == ''URLRewrite''))'
                      - message: RequestHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'RequestHeaderModifier').size()
                          <= 1
                      - message: ResponseHeaderModifier filter cannot be repeated
                        rule: self.filter(f, f.type == 'ResponseHeaderModifier').size()
                          <= 1
                      - message: RequestRedirect filter cannot be repeated
                        rule: self.filter(f, f.type == 'RequestRedirect').size() <=
                          1
                      - message: URLRewrite filter cannot be repeated
                        rule: self.filter(f, f.type == 'URLRewrite').size() <= 1
                    matches:
                      default:
                      - path:
                          type: PathPrefix
                          value: /
                      description: "Matches define conditions used for matching the\
                        \ rule against incoming\nHTTP requests. Each match is independent,\
                        \ i.e. this rule will be matched\nif **any** one of the matches\
                        \ is satisfied.\n\nFor example, take the following matches\
                        \ configuration:\n\n```\nmatches:\n- path:\n    value: \"\
                        /foo\"\n  headers:\n  - name: \"version\"\n    value: \"v2\"\
                        \n- path:\n    value: \"/v2/foo\"\n```\n\nFor a request to\
                        \ match against this rule, a request must satisfy\nEITHER\
                        \ of the two conditions:\n\n- path prefixed with `/foo` AND\
                        \ contains the header `version: v2`\n- path prefix of `/v2/foo`\n\
                        \nSee the documentation for HTTPRouteMatch on how to specify\
                        \ multiple\nmatch conditions that should be ANDed together.\n\
                        \nIf no matches are specified, the default is a prefix\npath\
                        \ match on \"/\", which has the effect of matching every\n\
                        HTTP request.\n\nProxy or Load Balancer routing configuration\
                        \ generated from HTTPRoutes\nMUST prioritize matches based\
                        \ on the following criteria, continuing on\nties. Across all\
                        \ rules specified on applicable Routes, precedence must be\n\
                        given to the match having:\n\n* \"Exact\" path match.\n* \"\
                        Prefix\" path match with largest number of characters.\n*\
                        \ Method match.\n* Largest number of header matches.\n* Largest\
                        \ number of query param matches.\n\nNote: The precedence of\
                        \ RegularExpression path matches are implementation-specific.\n\
                        \nIf ties still exist across multiple Routes, matching precedence\
                        \ MUST be\ndetermined in order of the following criteria,\
                        \ continuing on ties:\n\n* The oldest Route based on creation\
                        \ timestamp.\n* The Route appearing first in alphabetical\
                        \ order by\n  \"{namespace}/{name}\".\n\nIf ties still exist\
                        \ within an HTTPRoute, matching precedence MUST be granted\n\
                        to the FIRST matching rule (in list order) with a match meeting\
                        \ the above\ncriteria.\n\nWhen no rules matching a request\
                        \ have been successfully attached to the\nparent a request\
                        \ is coming from, a HTTP 404 status code MUST be returned."
                      items:
                        description: "HTTPRouteMatch defines the predicate used to\
                          \ match requests to a given\naction. Multiple match types\
                          \ are ANDed together, i.e. the match will\nevaluate to true\
                          \ only if all conditions are satisfied.\n\nFor example,\
                          \ the match below will match a HTTP request only if its\
                          \ path\nstarts with `/foo` AND it contains the `version:\
                          \ v1` header:\n\n```\nmatch:\n\n\tpath:\n\t  value: \"/foo\"\
                          \n\theaders:\n\t- name: \"version\"\n\t  value \"v1\"\n\n\
                          ```"
                        properties:
                          headers:
                            description: 'Headers specifies HTTP request header matchers.
                              Multiple match values are

                              ANDed together, meaning, a request must match all the
                              specified headers

                              to select the route.'
                            items:
                              description: 'HTTPHeaderMatch describes how to select
                                a HTTP route by matching HTTP request

                                headers.'
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP Header
                                    to be matched. Name matching MUST be

                                    case-insensitive. (See https://tools.ietf.org/html/rfc7230#section-3.2).


                                    If multiple entries specify equivalent header
                                    names, only the first

                                    entry with an equivalent name MUST be considered
                                    for a match. Subsequent

                                    entries with an equivalent header name MUST be
                                    ignored. Due to the

                                    case-insensitivity of header names, "foo" and
                                    "Foo" are considered

                                    equivalent.


                                    When a header is repeated in an HTTP request,
                                    it is

                                    implementation-specific behavior as to how this
                                    is represented.

                                    Generally, proxies should follow the guidance
                                    from the RFC:

                                    https://www.rfc-editor.org/rfc/rfc7230.html#section-3.2.2
                                    regarding

                                    processing a repeated header, with special handling
                                    for "Set-Cookie".'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  description: 'Type specifies how to match against
                                    the value of the header.


                                    Support: Core (Exact)


                                    Support: Implementation-specific (RegularExpression)


                                    Since RegularExpression HeaderMatchType has implementation-specific

                                    conformance, implementations can support POSIX,
                                    PCRE or any other dialects

                                    of regular expressions. Please read the implementation''s
                                    documentation to

                                    determine the supported dialect.'
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  description: Value is the value of HTTP Header to
                                    be matched.
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          method:
                            description: 'Method specifies HTTP method matcher.

                              When specified, this route will be matched only if the
                              request has the

                              specified method.


                              Support: Extended'
                            enum:
                            - GET
                            - HEAD
                            - POST
                            - PUT
                            - DELETE
                            - CONNECT
                            - OPTIONS
                            - TRACE
                            - PATCH
                            type: string
                          path:
                            default:
                              type: PathPrefix
                              value: /
                            description: 'Path specifies a HTTP request path matcher.
                              If this field is not

                              specified, a default prefix match on the "/" path is
                              provided.'
                            properties:
                              type:
                                default: PathPrefix
                                description: 'Type specifies how to match against
                                  the path Value.


                                  Support: Core (Exact, PathPrefix)


                                  Support: Implementation-specific (RegularExpression)'
                                enum:
                                - Exact
                                - PathPrefix
                                - RegularExpression
                                type: string
                              value:
                                default: /
                                description: Value of the HTTP path to match against.
                                maxLength: 1024
                                type: string
                            type: object
                            x-kubernetes-validations:
                            - message: value must be an absolute path and start with
                                '/' when type one of ['Exact', 'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? self.value.startsWith(''/'')
                                : true'
                            - message: must not contain '//' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''//'')
                                : true'
                            - message: must not contain '/./' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''/./'')
                                : true'
                            - message: must not contain '/../' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''/../'')
                                : true'
                            - message: must not contain '%2f' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''%2f'')
                                : true'
                            - message: must not contain '%2F' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''%2F'')
                                : true'
                            - message: must not contain '#' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.contains(''#'')
                                : true'
                            - message: must not end with '/..' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.endsWith(''/..'')
                                : true'
                            - message: must not end with '/.' when type one of ['Exact',
                                'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? !self.value.endsWith(''/.'')
                                : true'
                            - message: type must be one of ['Exact', 'PathPrefix',
                                'RegularExpression']
                              rule: self.type in ['Exact','PathPrefix'] || self.type
                                == 'RegularExpression'
                            - message: must only contain valid characters (matching
                                ^(?:[-A-Za-z0-9/._~!$&'()*+,;=:@]|[%][0-9a-fA-F]{2})+$)
                                for types ['Exact', 'PathPrefix']
                              rule: '(self.type in [''Exact'',''PathPrefix'']) ? self.value.matches(r"""^(?:[-A-Za-z0-9/._~!$&''()*+,;=:@]|[%][0-9a-fA-F]{2})+$""")
                                : true'
                          queryParams:
                            description: 'QueryParams specifies HTTP query parameter
                              matchers. Multiple match

                              values are ANDed together, meaning, a request must match
                              all the

                              specified query parameters to select the route.


                              Support: Extended'
                            items:
                              description: 'HTTPQueryParamMatch describes how to select
                                a HTTP route by matching HTTP

                                query parameters.'
                              properties:
                                name:
                                  description: 'Name is the name of the HTTP query
                                    param to be matched. This must be an

                                    exact string match. (See

                                    https://tools.ietf.org/html/rfc7230#section-2.7.3).


                                    If multiple entries specify equivalent query param
                                    names, only the first

                                    entry with an equivalent name MUST be considered
                                    for a match. Subsequent

                                    entries with an equivalent query param name MUST
                                    be ignored.


                                    If a query param is repeated in an HTTP request,
                                    the behavior is

                                    purposely left undefined, since different data
                                    planes have different

                                    capabilities. However, it is *recommended* that
                                    implementations should

                                    match against the first value of the param if
                                    the data plane supports it,

                                    as this behavior is expected in other load balancing
                                    contexts outside of

                                    the Gateway API.


                                    Users SHOULD NOT route traffic based on repeated
                                    query params to guard

                                    themselves against potential differences in the
                                    implementations.'
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  description: 'Type specifies how to match against
                                    the value of the query parameter.


                                    Support: Extended (Exact)


                                    Support: Implementation-specific (RegularExpression)


                                    Since RegularExpression QueryParamMatchType has
                                    Implementation-specific

                                    conformance, implementations can support POSIX,
                                    PCRE or any other

                                    dialects of regular expressions. Please read the
                                    implementation''s

                                    documentation to determine the supported dialect.'
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  description: Value is the value of HTTP query param
                                    to be matched.
                                  maxLength: 1024
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            maxItems: 16
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                        type: object
                      maxItems: 64
                      type: array
                      x-kubernetes-list-type: atomic
                    name:
                      description: 'Name is the name of the route rule. This name
                        MUST be unique within a Route if it is set.


                        Support: Extended'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    timeouts:
                      description: 'Timeouts defines the timeouts that can be configured
                        for an HTTP request.


                        Support: Extended'
                      properties:
                        backendRequest:
                          description: 'BackendRequest specifies a timeout for an
                            individual request from the gateway

                            to a backend. This covers the time from when the request
                            first starts being

                            sent from the gateway to when the full response has been
                            received from the backend.


                            Setting a timeout to the zero duration (e.g. "0s") SHOULD
                            disable the timeout

                            completely. Implementations that cannot completely disable
                            the timeout MUST

                            instead interpret the zero duration as the longest possible
                            value to which

                            the timeout can be set.


                            An entire client HTTP transaction with a gateway, covered
                            by the Request timeout,

                            may result in more than one call from the gateway to the
                            destination backend,

                            for example, if automatic retries are supported.


                            The value of BackendRequest must be a Gateway API Duration
                            string as defined by

                            GEP-2257.  When this field is unspecified, its behavior
                            is implementation-specific;

                            when specified, the value of BackendRequest must be no
                            more than the value of the

                            Request timeout (since the Request timeout encompasses
                            the BackendRequest timeout).


                            Support: Extended'
                          pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                          type: string
                        request:
                          description: 'Request specifies the maximum duration for
                            a gateway to respond to an HTTP request.

                            If the gateway has not been able to respond before this
                            deadline is met, the gateway

                            MUST return a timeout error.


                            For example, setting the `rules.timeouts.request` field
                            to the value `10s` in an

                            `HTTPRoute` will cause a timeout if a client request is
                            taking longer than 10 seconds

                            to complete.


                            Setting a timeout to the zero duration (e.g. "0s") SHOULD
                            disable the timeout

                            completely. Implementations that cannot completely disable
                            the timeout MUST

                            instead interpret the zero duration as the longest possible
                            value to which

                            the timeout can be set.


                            This timeout is intended to cover as close to the whole
                            request-response transaction

                            as possible although an implementation MAY choose to start
                            the timeout after the entire

                            request stream has been received instead of immediately
                            after the transaction is

                            initiated by the client.


                            The value of Request is a Gateway API Duration string
                            as defined by GEP-2257. When this

                            field is unspecified, request timeout behavior is implementation-specific.


                            Support: Extended'
                          pattern: ^([0-9]{1,5}(h|m|s|ms)){1,4}$
                          type: string
                      type: object
                      x-kubernetes-validations:
                      - message: backendRequest timeout cannot be longer than request
                          timeout
                        rule: '!(has(self.request) && has(self.backendRequest) &&
                          duration(self.request) != duration(''0s'') && duration(self.backendRequest)
                          > duration(self.request))'
                  type: object
                  x-kubernetes-validations:
                  - message: RequestRedirect filter must not be used together with
                      backendRefs
                    rule: '(has(self.backendRefs) && size(self.backendRefs) > 0) ?
                      (!has(self.filters) || self.filters.all(f, !has(f.requestRedirect))):
                      true'
                  - message: When using RequestRedirect filter with path.replacePrefixMatch,
                      exactly one PathPrefix match must be specified
                    rule: '(has(self.filters) && self.filters.exists_one(f, has(f.requestRedirect)
                      && has(f.requestRedirect.path) && f.requestRedirect.path.type
                      == ''ReplacePrefixMatch'' && has(f.requestRedirect.path.replacePrefixMatch)))
                      ? ((size(self.matches) != 1 || !has(self.matches[0].path) ||
                      self.matches[0].path.type != ''PathPrefix'') ? false : true)
                      : true'
                  - message: When using URLRewrite filter with path.replacePrefixMatch,
                      exactly one PathPrefix match must be specified
                    rule: '(has(self.filters) && self.filters.exists_one(f, has(f.urlRewrite)
                      && has(f.urlRewrite.path) && f.urlRewrite.path.type == ''ReplacePrefixMatch''
                      && has(f.urlRewrite.path.replacePrefixMatch))) ? ((size(self.matches)
                      != 1 || !has(self.matches[0].path) || self.matches[0].path.type
                      != ''PathPrefix'') ? false : true) : true'
                  - message: Within backendRefs, when using RequestRedirect filter
                      with path.replacePrefixMatch, exactly one PathPrefix match must
                      be specified
                    rule: '(has(self.backendRefs) && self.backendRefs.exists_one(b,
                      (has(b.filters) && b.filters.exists_one(f, has(f.requestRedirect)
                      && has(f.requestRedirect.path) && f.requestRedirect.path.type
                      == ''ReplacePrefixMatch'' && has(f.requestRedirect.path.replacePrefixMatch)))
                      )) ? ((size(self.matches) != 1 || !has(self.matches[0].path)
                      || self.matches[0].path.type != ''PathPrefix'') ? false : true)
                      : true'
                  - message: Within backendRefs, When using URLRewrite filter with
                      path.replacePrefixMatch, exactly one PathPrefix match must be
                      specified
                    rule: '(has(self.backendRefs) && self.backendRefs.exists_one(b,
                      (has(b.filters) && b.filters.exists_one(f, has(f.urlRewrite)
                      && has(f.urlRewrite.path) && f.urlRewrite.path.type == ''ReplacePrefixMatch''
                      && has(f.urlRewrite.path.replacePrefixMatch))) )) ? ((size(self.matches)
                      != 1 || !has(self.matches[0].path) || self.matches[0].path.type
                      != ''PathPrefix'') ? false : true) : true'
                maxItems: 16
                type: array
                x-kubernetes-list-type: atomic
                x-kubernetes-validations:
                - message: While 16 rules and 64 matches per rule are allowed, the
                    total number of matches across all rules in a route must be less
                    than 128
                  rule: '(self.size() > 0 ? self[0].matches.size() : 0) + (self.size()
                    > 1 ? self[1].matches.size() : 0) + (self.size() > 2 ? self[2].matches.size()
                    : 0) + (self.size() > 3 ? self[3].matches.size() : 0) + (self.size()
                    > 4 ? self[4].matches.size() : 0) + (self.size() > 5 ? self[5].matches.size()
                    : 0) + (self.size() > 6 ? self[6].matches.size() : 0) + (self.size()
                    > 7 ? self[7].matches.size() : 0) + (self.size() > 8 ? self[8].matches.size()
                    : 0) + (self.size() > 9 ? self[9].matches.size() : 0) + (self.size()
                    > 10 ? self[10].matches.size() : 0) + (self.size() > 11 ? self[11].matches.size()
                    : 0) + (self.size() > 12 ? self[12].matches.size() : 0) + (self.size()
                    > 13 ? self[13].matches.size() : 0) + (self.size() > 14 ? self[14].matches.size()
                    : 0) + (self.size() > 15 ? self[15].matches.size() : 0) <= 128'
            type: object
          status:
            description: Status defines the current state of HTTPRoute.
            properties:
              parents:
                description: 'Parents is a list of parent resources (usually Gateways)
                  that are

                  associated with the route, and the status of the route with respect
                  to

                  each parent. When this route attaches to a parent, the controller
                  that

                  manages the parent must add an entry to this list when the controller

                  first sees the route and should update the entry as appropriate
                  when the

                  route or gateway is modified.


                  Note that parent references that cannot be resolved by an implementation

                  of this API will not be added to this list. Implementations of this
                  API

                  can only populate Route status for the Gateways/parent resources
                  they are

                  responsible for.


                  A maximum of 32 Gateways will be represented in this list. An empty
                  list

                  means the route has not been attached to any Gateway.'
                items:
                  description: 'RouteParentStatus describes the status of a route
                    with respect to an

                    associated Parent.'
                  properties:
                    conditions:
                      description: 'Conditions describes the status of the route with
                        respect to the Gateway.

                        Note that the route''s availability is also subject to the
                        Gateway''s own

                        status conditions and listener status.


                        If the Route''s ParentRef specifies an existing Gateway that
                        supports

                        Routes of this kind AND that Gateway''s controller has sufficient
                        access,

                        then that Gateway''s controller MUST set the "Accepted" condition
                        on the

                        Route, to indicate whether the route has been accepted or
                        rejected by the

                        Gateway, and why.


                        A Route MUST be considered "Accepted" if at least one of the
                        Route''s

                        rules is implemented by the Gateway.


                        There are a number of cases where the "Accepted" condition
                        may not be set

                        due to lack of controller visibility, that includes when:


                        * The Route refers to a nonexistent parent.

                        * The Route is of a type that the controller does not support.

                        * The Route is in a namespace the controller does not have
                        access to.'
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: 'lastTransitionTime is the last time the
                              condition transitioned from one status to another.

                              This should be when the underlying condition changed.  If
                              that is not known, then using the time when the API
                              field changed is acceptable.'
                            format: date-time
                            type: string
                          message:
                            description: 'message is a human readable message indicating
                              details about the transition.

                              This may be an empty string.'
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: 'observedGeneration represents the .metadata.generation
                              that the condition was set based upon.

                              For instance, if .metadata.generation is currently 12,
                              but the .status.conditions[x].observedGeneration is
                              9, the condition is out of date

                              with respect to the current state of the instance.'
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: 'reason contains a programmatic identifier
                              indicating the reason for the condition''s last transition.

                              Producers of specific condition types may define expected
                              values and meanings for this field,

                              and whether the values are considered a guaranteed API.

                              The value should be a CamelCase string.

                              This field may not be empty.'
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - 'True'
                            - 'False'
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: 'ControllerName is a domain/path string that indicates
                        the name of the

                        controller that wrote this status. This corresponds with the

                        controllerName field on GatewayClass.


                        Example: "example.net/gateway-controller".


                        The format of this field is DOMAIN "/" PATH, where DOMAIN
                        and PATH are

                        valid Kubernetes names

                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).


                        Controllers MUST populate this field when writing status.
                        Controllers should ensure that

                        entries to status populated with their ControllerName are
                        cleaned up when they are no

                        longer necessary.'
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                    parentRef:
                      description: 'ParentRef corresponds with a ParentRef in the
                        spec that this

                        RouteParentStatus struct describes the status of.'
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          description: 'Group is the group of the referent.

                            When unspecified, "gateway.networking.k8s.io" is inferred.

                            To set the core API group (such as for a "Service" kind
                            referent),

                            Group must be explicitly set to "" (empty string).


                            Support: Core'
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          description: 'Kind is kind of the referent.


                            There are two kinds of parent resources with "Core" support:


                            * Gateway (Gateway conformance profile)

                            * Service (Mesh conformance profile, ClusterIP Services
                            only)


                            Support for other resources is Implementation-Specific.'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          description: 'Name is the name of the referent.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          description: 'Namespace is the namespace of the referent.
                            When unspecified, this refers

                            to the local namespace of the Route.


                            Note that there are specific rules for ParentRefs which
                            cross namespace

                            boundaries. Cross-namespace references are only valid
                            if they are explicitly

                            allowed by something in the namespace they are referring
                            to. For example:

                            Gateway has the AllowedRoutes field, and ReferenceGrant
                            provides a

                            generic way to enable any other kind of cross-namespace
                            reference.


                            Support: Core'
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          description: 'Port is the network port this Route targets.
                            It can be interpreted

                            differently based on the type of parent resource.


                            When the parent resource is a Gateway, this targets all
                            listeners

                            listening on the specified port that also support this
                            kind of Route(and

                            select this Route). It''s not recommended to set `Port`
                            unless the

                            networking behaviors specified in a Route must apply to
                            a specific port

                            as opposed to a listener(s) whose port(s) may be changed.
                            When both Port

                            and SectionName are specified, the name and port of the
                            selected listener

                            must match both specified values.


                            Implementations MAY choose to support other parent resources.

                            Implementations supporting other types of parent resources
                            MUST clearly

                            document how/if Port is interpreted.


                            For the purpose of status, an attachment is considered
                            successful as

                            long as the parent resource accepts it partially. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment

                            from the referencing Route, the Route MUST be considered
                            successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route,

                            the Route MUST be considered detached from the Gateway.


                            Support: Extended'
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          description: 'SectionName is the name of a section within
                            the target resource. In the

                            following resources, SectionName is interpreted as the
                            following:


                            * Gateway: Listener name. When both Port (experimental)
                            and SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.

                            * Service: Port name. When both Port (experimental) and
                            SectionName

                            are specified, the name and port of the selected listener
                            must match

                            both specified values.


                            Implementations MAY choose to support attaching Routes
                            to other resources.

                            If that is the case, they MUST clearly document how SectionName
                            is

                            interpreted.


                            When unspecified (empty string), this will reference the
                            entire resource.

                            For the purpose of status, an attachment is considered
                            successful if at

                            least one section in the parent resource accepts it. For
                            example, Gateway

                            listeners can restrict which Routes can attach to them
                            by Route kind,

                            namespace, or hostname. If 1 of 2 Gateway listeners accept
                            attachment from

                            the referencing Route, the Route MUST be considered successfully

                            attached. If no Gateway listeners accept attachment from
                            this Route, the

                            Route MUST be considered detached from the Gateway.


                            Support: Core'
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - conditions
                  - controllerName
                  - parentRef
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-list-type: atomic
            required:
            - parents
            type: object
        required:
        - spec
        type: object
    served: true
    storage: false
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api/pull/3328
    gateway.networking.k8s.io/bundle-version: v1.4.0
    gateway.networking.k8s.io/channel: standard
  name: referencegrants.gateway.networking.k8s.io
spec:
  conversion:
    strategy: None
  group: gateway.networking.k8s.io
  names:
    categories:
    - gateway-api
    kind: ReferenceGrant
    listKind: ReferenceGrantList
    plural: referencegrants
    shortNames:
    - refgrant
    singular: referencegrant
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: 'ReferenceGrant identifies kinds of resources in other namespaces
          that are

          trusted to reference the specified kinds of resources in the same namespace

          as the policy.


          Each ReferenceGrant can be used to represent a unique trust relationship.

          Additional Reference Grants can be used to add to the set of trusted

          sources of inbound references for the namespace they are defined within.


          All cross-namespace references in Gateway API (with the exception of cross-namespace

          Gateway-route attachment) require a ReferenceGrant.


          ReferenceGrant is a form of runtime verification allowing users to assert

          which cross-namespace object references are permitted. Implementations that

          support ReferenceGrant MUST NOT permit cross-namespace references which
          have

          no grant, and MUST respond to the removal of a grant by revoking the access

          that the grant allowed.'
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of ReferenceGrant.
            properties:
              from:
                description: 'From describes the trusted namespaces and kinds that
                  can reference the

                  resources described in "To". Each entry in this list MUST be considered

                  to be an additional place that references can be valid from, or
                  to put

                  this another way, entries MUST be combined using OR.


                  Support: Core'
                items:
                  description: ReferenceGrantFrom describes trusted namespaces and
                    kinds.
                  properties:
                    group:
                      description: 'Group is the group of the referent.

                        When empty, the Kubernetes core API group is inferred.


                        Support: Core'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: 'Kind is the kind of the referent. Although implementations
                        may support

                        additional resources, the following types are part of the
                        "Core"

                        support level for this field.


                        When used to permit a SecretObjectReference:


                        * Gateway


                        When used to permit a BackendObjectReference:


                        * GRPCRoute

                        * HTTPRoute

                        * TCPRoute

                        * TLSRoute

                        * UDPRoute'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    namespace:
                      description: 'Namespace is the namespace of the referent.


                        Support: Core'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                  required:
                  - group
                  - kind
                  - namespace
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
              to:
                description: 'To describes the resources that may be referenced by
                  the resources

                  described in "From". Each entry in this list MUST be considered
                  to be an

                  additional place that references can be valid to, or to put this
                  another

                  way, entries MUST be combined using OR.


                  Support: Core'
                items:
                  description: 'ReferenceGrantTo describes what Kinds are allowed
                    as targets of the

                    references.'
                  properties:
                    group:
                      description: 'Group is the group of the referent.

                        When empty, the Kubernetes core API group is inferred.


                        Support: Core'
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      description: 'Kind is the kind of the referent. Although implementations
                        may support

                        additional resources, the following types are part of the
                        "Core"

                        support level for this field:


                        * Secret when used to permit a SecretObjectReference

                        * Service when used to permit a BackendObjectReference'
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      description: 'Name is the name of the referent. When unspecified,
                        this policy

                        refers to all resources of the specified Group and Kind in
                        the local

                        namespace.'
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - group
                  - kind
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-list-type: atomic
            required:
            - from
            - to
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
